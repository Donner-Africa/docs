import{M as _}from"./Modal-11ca2eeb.js";import{l as w,r as v,a as i,c as k,w as g,b as s,n as u,P as p,e as m,t as c,f as l,h as d,G as I,F as h,g as y,v as b,x as S,z as B}from"./index-b26534f3.js";const T={name:"ConfirmationModal",components:{Modal:_},props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},message:{type:String,default:""},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},processingText:{type:String,default:"Processing..."},destructive:{type:Boolean,default:!1},destructiveMessage:{type:String,default:"This action cannot be undone."},requiresReason:{type:Boolean,default:!1},reasonPlaceholder:{type:String,default:"Please provide a reason for this action..."},confirmations:{type:Array,default:()=>[]},impacts:{type:Array,default:()=>[]},requiresDualControl:{type:Boolean,default:!1},processing:{type:Boolean,default:!1},size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)},type:{type:String,default:"warning",validator:n=>["info","warning","danger","success"].includes(n)}},data(){return{reason:"",confirmedItems:[]}},computed:{modalSize(){return{sm:"modal-sm",md:"",lg:"modal-lg"}[this.size]},headerIcon(){return{info:"fa fa-info-circle",warning:"fa fa-exclamation-triangle",danger:"fa fa-exclamation-circle",success:"fa fa-check-circle"}[this.type]},iconColor(){return{info:"#2196f3",warning:"#ff9800",danger:"#f44336",success:"#5cac31"}[this.type]},confirmButtonClass(){return this.destructive?"btn-danger":{info:"btn-info",warning:"btn-warning text-white",danger:"btn-danger",success:"btn-success"}[this.type]},canConfirm(){return this.requiresReason&&!this.reason.trim()?!1:this.confirmations.length>0?this.confirmedItems.every(Boolean):!0}},watch:{confirmations:{immediate:!0,handler(n){this.confirmedItems=new Array(n.length).fill(!1)}},show(n){n||(this.reason="",this.confirmedItems=new Array(this.confirmations.length).fill(!1))}},methods:{impactIcon(n){const e={gain:"fa fa-plus-circle text-success",lose:"fa fa-minus-circle text-danger",neutral:"fa fa-circle text-muted"};return e[n]||e.neutral},handleConfirm(){this.$emit("confirm",{reason:this.reason,confirmedItems:this.confirmedItems})},handleCancel(){this.$emit("update:show",!1),this.$emit("cancel")}}},z={class:"modal-title d-flex align-items-center"},M={class:"confirmation-content"},q={key:0,class:"alert alert-danger d-flex align-items-center mb-4"},A={key:1,class:"text-dark mb-4"},V={key:2,class:"impact-section mb-4"},P={class:"impact-list"},D={key:3,class:"form-group mb-4"},R=["placeholder","disabled"],U={key:4,class:"confirmations-section mb-4"},N=["id","onUpdate:modelValue","disabled"],F=["for"],j={key:5,class:"alert alert-warning d-flex align-items-center mb-4"},E={class:"d-flex justify-content-between w-[100%]"},G=["disabled"],L=["disabled"],W={key:0,class:"fa fa-spinner fa-spin me-2"};function H(n,e,t,J,f,o){const x=v("modal");return i(),k(x,{show:t.show,"onUpdate:show":e[3]||(e[3]=a=>n.$emit("update:show",a)),onClose:e[4]||(e[4]=a=>n.$emit("close")),"modal-classes":o.modalSize,"show-close":!t.processing},{header:g(()=>[s("h5",z,[s("i",{class:u([o.headerIcon,"me-2"]),style:p({color:o.iconColor})},null,6),m(" "+c(t.title),1)])]),footer:g(()=>[s("div",E,[s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=(...a)=>o.handleCancel&&o.handleCancel(...a)),disabled:t.processing},c(t.cancelText),9,G),s("button",{type:"button",class:u(["btn",o.confirmButtonClass]),onClick:e[2]||(e[2]=(...a)=>o.handleConfirm&&o.handleConfirm(...a)),disabled:!o.canConfirm||t.processing},[t.processing?(i(),l("i",W)):d("",!0),m(" "+c(t.processing?t.processingText:t.confirmText),1)],10,L)])]),default:g(()=>[s("div",M,[t.destructive?(i(),l("div",q,[e[6]||(e[6]=s("i",{class:"fa fa-exclamation-triangle me-2"},null,-1)),s("span",null,[e[5]||(e[5]=s("strong",null,"Warning:",-1)),m(" "+c(t.destructiveMessage),1)])])):d("",!0),t.message?(i(),l("p",A,c(t.message),1)):d("",!0),I(n.$slots,"default",{},void 0,!0),t.impacts&&t.impacts.length?(i(),l("div",V,[e[7]||(e[7]=s("h6",{class:"text-dark mb-3"},[s("i",{class:"fa fa-info-circle me-2 text-info"}),m(" Impact Analysis ")],-1)),s("ul",P,[(i(!0),l(h,null,y(t.impacts,(a,r)=>(i(),l("li",{key:r,class:u(["impact-item",`impact-${a.type||"neutral"}`])},[s("i",{class:u([o.impactIcon(a.type),"me-2"])},null,2),m(" "+c(a.text),1)],2))),128))])])):d("",!0),t.requiresReason?(i(),l("div",D,[e[8]||(e[8]=s("label",{class:"form-label text-dark"},[m(" Reason "),s("span",{class:"text-danger"},"*")],-1)),b(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.reason=a),class:"form-control",placeholder:t.reasonPlaceholder,rows:"3",disabled:t.processing},null,8,R),[[S,f.reason]]),e[9]||(e[9]=s("small",{class:"text-muted"},"This will be recorded in the audit log.",-1))])):d("",!0),t.confirmations&&t.confirmations.length?(i(),l("div",U,[(i(!0),l(h,null,y(t.confirmations,(a,r)=>(i(),l("div",{key:r,class:"form-check mb-2"},[b(s("input",{type:"checkbox",id:`confirm-${r}`,"onUpdate:modelValue":C=>f.confirmedItems[r]=C,class:"form-check-input",disabled:t.processing},null,8,N),[[B,f.confirmedItems[r]]]),s("label",{for:`confirm-${r}`,class:"form-check-label text-dark"},c(a),9,F)]))),128))])):d("",!0),t.requiresDualControl?(i(),l("div",j,[...e[10]||(e[10]=[s("i",{class:"fa fa-users me-2"},null,-1),s("span",null,"This action requires approval from another authorized user.",-1)])])):d("",!0)])]),_:3},8,["show","modal-classes","show-close"])}const Q=w(T,[["render",H],["__scopeId","data-v-5621a119"]]);export{Q as C};
