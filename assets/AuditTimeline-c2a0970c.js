import{l as g,a as i,f as a,b as t,e as f,t as d,h as r,F as h,g as p,P as y,n as m}from"./index-a1754a89.js";const v={name:"AuditTimeline",props:{title:{type:String,default:"Activity Log"},entries:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showDetails:{type:Boolean,default:!0},initialLimit:{type:Number,default:5},maxHeight:{type:String,default:"400px"}},data(){return{displayLimit:this.initialLimit}},computed:{displayedEntries(){return this.entries.slice(0,this.displayLimit)},hasMore(){return this.entries.length>this.displayLimit},remainingCount(){return this.entries.length-this.displayLimit}},watch:{entries(){this.displayLimit=this.initialLimit}},methods:{getActionType(n){if(!n)return"neutral";const e=n.toLowerCase();return e.includes("created")||e.includes("added")?"create":e.includes("updated")||e.includes("changed")?"update":e.includes("deleted")||e.includes("removed")||e.includes("suspended")?"delete":e.includes("approved")||e.includes("verified")||e.includes("completed")?"success":e.includes("rejected")||e.includes("failed")?"error":"neutral"},getActionIcon(n){const e=this.getActionType(n);return{create:"fa fa-plus",update:"fa fa-edit",delete:"fa fa-trash",success:"fa fa-check",error:"fa fa-times",neutral:"fa fa-circle"}[e]},formatAction(n){return n?n.toLowerCase().replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"Unknown action"},formatRelativeTime(n){if(!n)return"";const e=new Date(n),c=new Date-e,u=Math.floor(c/6e4),l=Math.floor(c/36e5),s=Math.floor(c/864e5);return u<1?"Just now":u<60?`${u} min ago`:l<24?`${l} hr ago`:s<7?`${s} days ago`:e.toLocaleDateString()},formatFullDate(n){return n?new Date(n).toLocaleString():""},loadMore(){this.displayLimit+=this.initialLimit}}},k={class:"audit-timeline"},b={class:"timeline-header d-flex justify-content-between align-items-center mb-3"},w={class:"mb-0 text-dark"},x={key:0,class:"badge bg-secondary"},L={key:0,class:"empty-state text-center py-4"},A={key:1,class:"loading-state py-4"},D={class:"timeline-marker"},M={key:0,class:"timeline-line"},C={class:"timeline-content"},T={class:"timeline-action"},S={class:"action-text text-dark"},B={key:0,class:"entity-ref text-primary ms-1"},N={class:"timeline-meta text-muted"},E={class:"actor"},F=["title"],H={key:0,class:"lockdown-badge ms-2"},z={key:0,class:"timeline-details mt-2"},I={key:0,class:"diff-view"},R={class:"diff-item diff-before"},V={class:"diff-value"},j={class:"diff-item diff-after"},O={class:"diff-value"},U={key:1,class:"reason-view"},J={class:"reason-value"},K={key:0,class:"text-center pt-3"};function P(n,e,o,c,u,l){return i(),a("div",k,[t("div",b,[t("h6",w,[e[1]||(e[1]=t("i",{class:"fa fa-history me-2"},null,-1)),f(" "+d(o.title),1)]),o.entries.length?(i(),a("span",x,d(o.entries.length)+" "+d(o.entries.length===1?"entry":"entries"),1)):r("",!0)]),!o.entries.length&&!o.loading?(i(),a("div",L,[...e[2]||(e[2]=[t("i",{class:"fa fa-clipboard-list text-muted mb-2",style:{"font-size":"2rem"}},null,-1),t("p",{class:"text-muted mb-0"},"No activity recorded yet.",-1)])])):r("",!0),o.loading?(i(),a("div",A,[(i(),a(h,null,p(3,s=>t("div",{key:s,class:"timeline-item-skeleton mb-3"},[...e[3]||(e[3]=[t("div",{class:"skeleton-dot"},null,-1),t("div",{class:"skeleton-content"},[t("div",{class:"skeleton-line skeleton-line-title"}),t("div",{class:"skeleton-line skeleton-line-meta"})],-1)])])),64))])):(i(),a("div",{key:2,class:"timeline-container",style:y({maxHeight:o.maxHeight})},[(i(!0),a(h,null,p(l.displayedEntries,(s,_)=>(i(),a("div",{key:s.id||_,class:m(["timeline-item",{lockdown:s.lockdown}])},[t("div",D,[t("span",{class:m(["timeline-dot",`dot-${l.getActionType(s.action)}`])},[t("i",{class:m(l.getActionIcon(s.action))},null,2)],2),_<l.displayedEntries.length-1?(i(),a("span",M)):r("",!0)]),t("div",C,[t("div",T,[t("span",S,d(l.formatAction(s.action)),1),s.entity?(i(),a("span",B,d(s.entity),1)):r("",!0)]),t("div",N,[t("span",E,[e[4]||(e[4]=t("i",{class:"fa fa-user me-1"},null,-1)),f(" "+d(s.actor||"System"),1)]),e[6]||(e[6]=t("span",{class:"separator"},"â€¢",-1)),t("span",{class:"timestamp",title:l.formatFullDate(s.timestamp)},d(l.formatRelativeTime(s.timestamp)),9,F),s.lockdown?(i(),a("span",H,[...e[5]||(e[5]=[t("i",{class:"fa fa-lock"},null,-1),f(" LOCKDOWN ",-1)])])):r("",!0)]),s.details&&o.showDetails?(i(),a("div",z,[s.details.before&&s.details.after?(i(),a("div",I,[t("div",R,[e[7]||(e[7]=t("span",{class:"diff-label"},"Before:",-1)),t("span",V,d(s.details.before),1)]),t("div",j,[e[8]||(e[8]=t("span",{class:"diff-label"},"After:",-1)),t("span",O,d(s.details.after),1)])])):s.details.reason?(i(),a("div",U,[e[9]||(e[9]=t("span",{class:"reason-label"},"Reason:",-1)),t("span",J,d(s.details.reason),1)])):r("",!0)])):r("",!0)])],2))),128)),l.hasMore?(i(),a("div",K,[t("button",{class:"btn btn-outline-secondary btn-sm",onClick:e[0]||(e[0]=(...s)=>l.loadMore&&l.loadMore(...s))},[e[10]||(e[10]=t("i",{class:"fa fa-chevron-down me-1"},null,-1)),f(" Show More ("+d(l.remainingCount)+") ",1)])])):r("",!0)],4))])}const q=g(v,[["render",P],["__scopeId","data-v-12cb6950"]]);export{q as A};
