import{W as f,aY as U,r as z,a as i,c as m,w as t,d as a,u as e,aZ as L,b as n,a_ as D,a$ as I,b0 as V,b1 as j,b2 as B,h as M,b3 as y,b4 as N,b5 as R,b6 as A,a1 as F,b7 as H,X as P,l as Y,B as T,V as q,b8 as E,o as G,U as x,b9 as K,ba as W,_ as k,ac as X,a7 as Z,Y as w,t as $,a8 as J,f as Q,F as ee,g as ae,ab as S,e as se,aO as te,aa as ne,bb as re,j as h}from"./index-a1754a89.js";import{C as oe}from"./ComplianceService-fa7fe5ce.js";import ie from"./OrganisationService-039a049c.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=f("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=f("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=f("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=f("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=f("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),me=["src"],fe={__name:"AppSidebar",props:{collapsible:{type:String,default:"icon"},variant:{type:String,default:"inset"},verificationScore:{type:Number,default:null},user:{type:Object,default:()=>({name:"User",email:"",avatar:""})}},setup(l){const c=l,{state:d}=U(),b=[{title:"Fundraisers",url:"/me/raisers",icon:P},{title:"Donations",url:"/me/donations",icon:de},{title:"Transfers",url:"/me/transfers",icon:le}],_=[{title:"Profile",url:"/me/profile",icon:ue}];return(u,o)=>{const p=z("RouterLink");return i(),m(e(H),F(c,{class:"border-none"}),{default:t(()=>[a(e(L),{class:""},{default:t(()=>[a(p,{to:"/",class:"flex items-center gap-2"},{default:t(()=>[n("img",{src:e(d)==="expanded"?"/img/logo.svg":"/img/icon.png",alt:"Donner",class:"h-10 transition-all duration-200"},null,8,me)]),_:1})]),_:1}),a(e(D),{class:"overflow-x-hidden mt-4"},{default:t(()=>[l.verificationScore!=null&&l.verificationScore<3?(i(),m(e(I),{key:0,class:"px-2 mx-1 mb-2"},{default:t(()=>[a(e(V),null,{default:t(()=>[a(e(j),{tooltip:"Complete your KYC",class:"cursor-pointer bg-gradient-to-r rounded-full border-0 from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600",onClick:o[0]||(o[0]=g=>u.$router.push("/me/kyc"))},{default:t(()=>[a(e(B),{class:"size-4"}),o[1]||(o[1]=n("span",null,"Complete Compliance",-1))]),_:1})]),_:1})]),_:1})):M("",!0),a(y,{items:b,label:"Menu"}),o[2]||(o[2]=n("hr",{class:"h-px my-2 mx-3 bg-slate-100 border-0"},null,-1)),a(y,{items:_,label:"Account"})]),_:1}),a(e(N),null,{default:t(()=>[a(R,{user:l.user},null,8,["user"])]),_:1}),a(e(A))]),_:1},16)}}};const _e={class:"relative top-0 z-40 flex h-14 items-center gap-4 bg-transparent ps-4 pe-2 pt-3"},pe={class:"flex items-center gap-2"},ge={class:"flex aspect-square size-6 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground"},he={class:"grid flex-1 text-left text-sm leading-tight"},be={class:"truncate font-semibold uppercase"},ve={class:"flex size-6 items-center justify-center rounded-sm border"},ye={class:"flex size-6 items-center justify-center rounded-md border bg-background"},xe={class:"flex-1 m-2 md:m-2 rounded-2xl overflow-hidden shadow-none border border-border bg-background"},ke={class:"container-fluid mx-auto py-4 px-4"},we={__name:"Index",setup(l){const c=T(),d=q(),b=async g=>{await d.switchOrganisation(g)},_=h([]),u=h(null),o=h(!0),p=h({name:"User",email:"",avatar:""});return E({selector:"html",attribute:"data-bs-theme",valueDark:"dark",valueLight:"light"}),G(async()=>{if(!await x.get("isLoggedIn")){c.push("/account/login");return}try{const s=await x.get("user");s&&(p.value={name:s.name||"User",email:s.email||"",avatar:s.photoUrl||""})}catch{console.error("Failed to fetch user data")}try{const{data:s}=await ie.getOrganisations();_.value=s||[]}catch{}try{const{data:s}=await oe.fetchUserComplianceData("NG");u.value=(s==null?void 0:s.score)||0}catch{u.value=0}o.value=!1}),(g,s)=>{const O=z("RouterView");return i(),m(e(re),{"storage-key":"donnerSidebar",class:"min-h-screen",style:{"--sidebar-width":"260px"}},{default:t(()=>[a(fe,{"verification-score":u.value,user:p.value},null,8,["verification-score","user"]),a(e(K),{class:"shadow-none"},{default:t(()=>[n("header",_e,[a(e(W),{class:"btn btn-sm text-secondary shadow-xs bg-[#fff] w-fit px-2 py-3"}),s[4]||(s[4]=n("div",{class:"flex-1"},null,-1)),n("div",pe,[a(e(k),{size:"sm",variant:"outline",class:"gap-2 shadow-none",onClick:s[0]||(s[0]=r=>e(c).push("/raisers/start"))},{default:t(()=>[a(e(C),{class:"size-4"}),s[2]||(s[2]=n("span",null,"Start Raising",-1))]),_:1}),a(e(X),null,{default:t(()=>[a(e(Z),{"as-child":""},{default:t(()=>[a(e(k),{variant:"ghost",size:"sm",class:"gap-2 px-2 data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground d-none"},{default:t(()=>{var r;return[n("div",ge,[a(e(w),{class:"size-4"})]),n("div",he,[n("span",be,$(((r=e(d).activeOrganisation)==null?void 0:r.name)||"Select Org"),1)]),a(e(ce),{class:"ml-auto size-4"})]}),_:1})]),_:1}),a(e(J),{class:"w-[--reka-dropdown-menu-trigger-width] min-w-56 rounded-lg",align:"end",side:"bottom","side-offset":4},{default:t(()=>[(i(!0),Q(ee,null,ae(_.value,r=>(i(),m(e(S),{key:r.reference,onClick:v=>b(r),class:"cursor-pointer"},{default:t(()=>{var v;return[n("div",ve,[a(e(w),{class:"size-4 shrink-0"})]),se(" "+$(r.name)+" ",1),((v=e(d).activeOrganisation)==null?void 0:v.reference)===r.reference?(i(),m(e(te),{key:0,class:"ml-auto size-4"})):M("",!0)]}),_:2},1032,["onClick"]))),128)),a(e(ne)),a(e(S),{class:"gap-2 p-2",onClick:s[1]||(s[1]=r=>e(c).push("/onboarding/organisation"))},{default:t(()=>[n("div",ye,[a(e(C),{class:"size-4"})]),s[3]||(s[3]=n("div",{class:"font-medium text-muted-foreground"},"Add Organisation",-1))]),_:1})]),_:1})]),_:1})])]),n("main",xe,[n("div",ke,[a(O)])])]),_:1})]),_:1})}}},ze=Y(we,[["__scopeId","data-v-23dd7fe7"]]);export{ze as default};
