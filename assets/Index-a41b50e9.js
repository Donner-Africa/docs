import{W as g,aZ as O,r as L,a as i,c as l,w as t,d as s,u as e,a_ as I,b as n,a$ as j,b0 as A,b1 as V,b2 as B,b3 as N,h as M,b4 as y,b5 as R,b6 as E,b7 as F,a1 as P,b8 as H,X as T,l as Y,B as q,V as G,b9 as K,o as W,U as x,ba as X,bb as Z,bc as J,bd as Q,_ as w,ac as ee,a7 as se,Y as $,t as C,a8 as ae,f as te,F as ne,g as re,ab as S,e as oe,aP as ie,aa as le,be as ce,j as b,bf as de}from"./index-c49e93e4.js";import{C as ue}from"./ComplianceService-a07dc706.js";import me from"./OrganisationService-eac9b745.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=g("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=g("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=g("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=g("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=g("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),be=["src"],he={__name:"AppSidebar",props:{collapsible:{type:String,default:"icon"},variant:{type:String,default:"inset"},verificationScore:{type:Number,default:null},user:{type:Object,default:()=>({name:"User",email:"",avatar:""})}},setup(c){const d=c,{state:u}=O(),h=[{title:"Fundraisers",url:"/me/raisers",icon:T},{title:"Donations",url:"/me/donations",icon:pe},{title:"Transfers",url:"/me/transfers",icon:fe}],p=[{title:"Profile",url:"/me/profile",icon:_e}];return(m,o)=>{const _=L("RouterLink");return i(),l(e(H),P(d,{class:"border-none"}),{default:t(()=>[s(e(I),{class:""},{default:t(()=>[s(_,{to:"/",class:"flex items-center gap-2"},{default:t(()=>[n("img",{src:e(u)==="expanded"?"/img/logo.svg":"/img/icon.png",alt:"Donner",class:"h-10 transition-all duration-200"},null,8,be)]),_:1})]),_:1}),s(e(j),{class:"overflow-x-hidden mt-4"},{default:t(()=>[c.verificationScore!=null&&c.verificationScore<3?(i(),l(e(A),{key:0,class:"px-2 mx-1 mb-2"},{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(B),{tooltip:"Complete your KYC",class:"cursor-pointer bg-gradient-to-r rounded-full border-0 from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600",onClick:o[0]||(o[0]=v=>m.$router.push("/me/kyc"))},{default:t(()=>[s(e(N),{class:"size-4"}),o[1]||(o[1]=n("span",null,"Complete Compliance",-1))]),_:1})]),_:1})]),_:1})):M("",!0),s(y,{items:h,label:"Menu"}),o[2]||(o[2]=n("hr",{class:"h-px my-2 mx-3 bg-border border-0"},null,-1)),s(y,{items:p,label:"Account"})]),_:1}),s(e(R),null,{default:t(()=>[s(E,{user:c.user},null,8,["user"])]),_:1}),s(e(F))]),_:1},16)}}};const ve={class:"relative top-0 z-40 flex h-14 items-center gap-4 bg-background/80 backdrop-blur-sm border-b border-border/40 ps-4 pe-2 pt-3"},ke={class:"flex items-center gap-2"},ye={class:"flex aspect-square size-6 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground"},xe={class:"grid flex-1 text-left text-sm leading-tight"},we={class:"truncate font-semibold uppercase"},$e={class:"flex size-6 items-center justify-center rounded-sm border"},Ce={class:"flex size-6 items-center justify-center rounded-md border bg-background"},Se={class:"flex-1 m-2 md:m-2 rounded-2xl overflow-hidden shadow-none border border-border bg-background"},ze={class:"container-fluid mx-auto py-4 px-4"},Le={__name:"Index",setup(c){const d=q(),u=G(),h=async f=>{await u.switchOrganisation(f)},p=b([]),m=b(null),o=b(!0),_=b({name:"User",email:"",avatar:""}),v=K({selector:"html",attribute:"data-bs-theme",valueDark:"dark",valueLight:"light",onChanged(f){f?(document.documentElement.classList.add("dark"),document.documentElement.setAttribute("data-bs-theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-bs-theme","light"))}}),D=de(v);return W(async()=>{if(!await x.get("isLoggedIn")){d.push("/account/login");return}try{const a=await x.get("user");a&&(_.value={name:a.name||"User",email:a.email||"",avatar:a.photoUrl||""})}catch{console.error("Failed to fetch user data")}try{const{data:a}=await me.getOrganisations();p.value=a||[]}catch{}try{const{data:a}=await ue.fetchUserComplianceData("NG");m.value=(a==null?void 0:a.score)||0}catch{m.value=0}o.value=!1}),(f,a)=>{const U=L("RouterView");return i(),l(e(ce),{"storage-key":"donnerSidebar",class:"min-h-screen",style:{"--sidebar-width":"260px"}},{default:t(()=>[s(he,{"verification-score":m.value,user:_.value},null,8,["verification-score","user"]),s(e(X),{class:"shadow-none bg-background"},{default:t(()=>[n("header",ve,[s(e(Z),{class:"btn btn-sm text-secondary shadow-xs bg-background w-fit px-2 py-3"}),n("button",{class:"btn btn-sm btn-dark w-fit px-2 ml-2 flex items-center justify-center",onClick:a[0]||(a[0]=r=>e(D)())},[e(v)?(i(),l(e(Q),{key:1,class:"size-4"})):(i(),l(e(J),{key:0,class:"size-4"}))]),a[5]||(a[5]=n("div",{class:"flex-1"},null,-1)),n("div",ke,[s(e(w),{size:"sm",variant:"outline",class:"gap-2 shadow-none",onClick:a[1]||(a[1]=r=>e(d).push("/raisers/start"))},{default:t(()=>[s(e(z),{class:"size-4"}),a[3]||(a[3]=n("span",null,"Start Raising",-1))]),_:1}),s(e(ee),null,{default:t(()=>[s(e(se),{"as-child":""},{default:t(()=>[s(e(w),{variant:"ghost",size:"sm",class:"gap-2 px-2 data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground d-none"},{default:t(()=>{var r;return[n("div",ye,[s(e($),{class:"size-4"})]),n("div",xe,[n("span",we,C(((r=e(u).activeOrganisation)==null?void 0:r.name)||"Select Org"),1)]),s(e(ge),{class:"ml-auto size-4"})]}),_:1})]),_:1}),s(e(ae),{class:"w-[--reka-dropdown-menu-trigger-width] min-w-56 rounded-lg",align:"end",side:"bottom","side-offset":4},{default:t(()=>[(i(!0),te(ne,null,re(p.value,r=>(i(),l(e(S),{key:r.reference,onClick:k=>h(r),class:"cursor-pointer"},{default:t(()=>{var k;return[n("div",$e,[s(e($),{class:"size-4 shrink-0"})]),oe(" "+C(r.name)+" ",1),((k=e(u).activeOrganisation)==null?void 0:k.reference)===r.reference?(i(),l(e(ie),{key:0,class:"ml-auto size-4"})):M("",!0)]}),_:2},1032,["onClick"]))),128)),s(e(le)),s(e(S),{class:"gap-2 p-2",onClick:a[2]||(a[2]=r=>e(d).push("/onboarding/organisation"))},{default:t(()=>[n("div",Ce,[s(e(z),{class:"size-4"})]),a[4]||(a[4]=n("div",{class:"font-medium text-muted-foreground"},"Add Organisation",-1))]),_:1})]),_:1})]),_:1})])]),n("main",Se,[n("div",ze,[s(U)])])]),_:1})]),_:1})}}},Oe=Y(Le,[["__scopeId","data-v-fa8133c0"]]);export{Oe as default};
