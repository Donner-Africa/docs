import{B as f,D as h,a as d,f as n,b as e,m as y,q as w,s as _,v as p,x as m,t as k,h as P,j as i,A as v}from"./index-1124f981.js";const C={class:"min-h-screen flex items-center justify-center relative overflow-hidden",style:{background:"#EDF9E8"}},V={class:"container mx-auto px-4 relative z-10"},D={class:"max-w-md mx-auto"},S={class:"bg-white shadow-xl rounded-2xl p-8 md:p-10"},B=["disabled"],A=["disabled"],E={key:0,class:"text-red-500 text-sm text-center"},F=["disabled"],N={key:0},j={key:1},q={class:"mt-4 text-center"},z=["disabled"],$={__name:"CreatePasscode",setup(M){const c=f(),a=i(""),l=i(""),t=i(!1),o=i(""),b=h(()=>a.value.length===4&&l.value.length===4&&/^\d{4}$/.test(a.value));async function g(){if(o.value="",a.value!==l.value){o.value="Passcodes do not match";return}if(!/^\d{4}$/.test(a.value)){o.value="Passcode must be exactly 4 digits";return}t.value=!0;try{await v.updatePasscode({passcode:a.value,password:""}),c.push("/me/dashboard")}catch(r){o.value=r.message||"Failed to create passcode. Please try again."}finally{t.value=!1}}async function x(){t.value=!0;try{await v.skipPrompt("passcode"),c.push("/me/dashboard")}catch(r){console.error("Failed to skip passcode prompt",r),c.push("/me/dashboard")}finally{t.value=!1}}return(r,s)=>(d(),n("div",C,[s[5]||(s[5]=e("div",{class:"absolute inset-0 opacity-10",style:{"background-size":"contain !important","background-image":"url('/img/shapes/waves-white.svg')"}},null,-1)),e("div",V,[e("div",D,[e("div",S,[s[4]||(s[4]=y('<div class="text-center mb-6"><a href="/" class="inline-block w-20 h-20 rounded-full bg-white shadow ring-1 ring-slate-200 p-3"><img src="'+w+'" class="w-full h-full" alt="Donner"></a></div><h2 class="text-2xl font-semibold text-center mb-2">Create a Passcode</h2><p class="text-gray-600 text-center mb-6"> A 4-digit passcode for quick access and added security. </p>',3)),e("form",{onSubmit:_(g,["prevent"]),class:"space-y-4"},[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Passcode",-1)),p(e("input",{type:"password","onUpdate:modelValue":s[0]||(s[0]=u=>a.value=u),maxlength:"4",pattern:"[0-9]{4}",inputmode:"numeric",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"••••",disabled:t.value},null,8,B),[[m,a.value]])]),e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Confirm Passcode",-1)),p(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=u=>l.value=u),maxlength:"4",pattern:"[0-9]{4}",inputmode:"numeric",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"••••",disabled:t.value},null,8,A),[[m,l.value]])]),o.value?(d(),n("p",E,k(o.value),1)):P("",!0),e("button",{type:"submit",disabled:t.value||!b.value,class:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t.value?(d(),n("span",N,"Creating...")):(d(),n("span",j,"Create Passcode"))],8,F)],32),e("div",q,[e("button",{onClick:x,disabled:t.value,class:"text-gray-500 hover:text-gray-700 text-sm underline"}," Skip for now ",8,z)])])])])]))}};export{$ as default};
