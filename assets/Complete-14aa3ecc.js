import{B as f}from"./BaseButton-c6c5ab63.js";import{_ as g}from"./PublicLayout-5ccc5a06.js";import{l as x,S as w,p as h,A as b,r as n,a as l,c as _,w as i,b as s,z as v,q as y,n as c,s as d,v as m,f as P,h as B,e as k,d as S}from"./index-7ab8b32e.js";import"./logo-f32e4fd3.js";import"./NavigationStore-5ae23ca1.js";import"./StarryBackground-a80d183f.js";const C={components:{BaseButton:f,PublicLayout:g},data(){return{loading:!1,password:"",confirmPassword:""}},async mounted(){try{const{token:e}=await w.IndexedDB.get("DonnerDB","UserStore","passwordResetAuthorization")}catch{this.$router.push("/account/password-reset")}},methods:{async changePassword(){this.loading=!0;const e=h();try{await b.completePasswordReset(this.password),e.toast({message:"Your new password is set.<br/>Login to your account.",duration:5e3,type:"success"}),setTimeout(()=>{this.$router.push("/account/login")},3e3)}catch(o){e.toast({message:o.message,duration:5e3,type:"error"})}this.loading=!1}}},U={class:"page-header min-vh-100 align-items-start bg-background"},V={class:"container px-sm-auto px-0"},N={class:"row"},T={class:"col-lg-6 col-md-7 mx-sm-auto mx-0 my-0 my-sm-5 px-0 px-sm-auto py-sm-7"},D={class:"card rounded-3 min-vh-100 min-vh-sm-80 bg-transparent"},L={class:"card-body px-lg-5 py-lg-5 text-start"},q={class:"px-md-4 ps-2 pe-4 row"},z={class:"form-group mt-3 col-sm-6 px-3"},A={class:"float-end"},M={class:"input-group"},R=["disabled"],E={class:"form-group mt-3 col-sm-6 px-3"},I={key:0,class:"float-end"},Y={class:"input-group"},j=["disabled"],F={class:"form-group mt-3"};function G(e,o,H,J,t,a){const u=n("BaseButton"),p=n("PublicLayout");return l(),_(p,null,{default:i(()=>[s("section",null,[s("div",U,[s("div",V,[s("div",N,[s("div",T,[s("div",D,[s("div",L,[o[9]||(o[9]=s("div",{class:"success mb-6 mb-md-4"},[s("a",{href:"/",class:"icon icon-shape icon-xl rounded-circle bg-background shadow text-center p-3 mx-auto"},[s("img",{src:v,class:"w-[90%] h-[90%] mt-1"})])],-1)),o[10]||(o[10]=s("h2",{class:"text-foreground"},"Secure your account",-1)),o[11]||(o[11]=s("p",{class:"mb-4 text-foreground opacity-8"},"Set a stronger password to protect your account",-1)),s("form",{class:"form-section active",onSubmit:o[2]||(o[2]=y((...r)=>a.changePassword&&a.changePassword(...r),["prevent"]))},[s("div",q,[s("div",z,[o[4]||(o[4]=s("label",{class:"text-foreground text-sm"}," Password ",-1)),s("label",A,[s("i",{class:c(["pt-2 fa",t.password.length>7?"text-success fa-check-circle":""])},null,2)]),s("div",M,[o[3]||(o[3]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),d(s("input",{class:"form-control form-control-lg text-lg",disabled:t.loading?!0:void 0,"onUpdate:modelValue":o[0]||(o[0]=r=>t.password=r),required:"",type:"password",placeholder:"********"},null,8,R),[[m,t.password]])])]),s("div",E,[o[6]||(o[6]=s("label",{class:"text-foreground text-sm"}," Confirm Password ",-1)),t.confirmPassword?(l(),P("label",I,[s("i",{class:c(["pt-2 fa",t.password==t.confirmPassword?"text-success fa-check-circle":"text-secondary fa-times-circle"])},null,2)])):B("",!0),s("div",Y,[o[5]||(o[5]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),d(s("input",{class:"form-control form-control-lg text-lg",disabled:t.loading?!0:void 0,"onUpdate:modelValue":o[1]||(o[1]=r=>t.confirmPassword=r),required:"",type:"password",placeholder:"********"},null,8,j),[[m,t.confirmPassword]])])]),o[8]||(o[8]=s("div",{class:"form-group mt-3"},[s("p",{class:"text-muted mb-2 mx-2"}," Please follow this guide for a strong password: "),s("ol",{class:"text-muted mb-0 float-start mx-2"},[s("li",null,[s("span",{class:"text-sm"},"Use two special characters (examples: #, @, â‚¦, &)")]),s("li",null,[s("span",{class:"text-sm"},"Use a minimum of eight (8) characters")]),s("li",null,[s("span",{class:"text-sm"},"Use at least one (1) number")]),s("li",null,[s("span",{class:"text-sm"},"Change it often")])])],-1)),s("div",F,[k(u,{class:"btn btn-primary float-end",disabled:!t.password||t.password!=t.confirmPassword,loading:t.loading,nativeType:"submit"},{default:i(()=>[...o[7]||(o[7]=[S(" Complete ",-1)])]),_:1},8,["disabled","loading"])])])],32)])])])])])])])]),_:1})}const $=x(C,[["render",G]]);export{$ as default};
