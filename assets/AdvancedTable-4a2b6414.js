import{E as p,a,f as r,n as h,u as y,H as _,G as x,l as P,r as C,F as f,g as m,e as w,m as S,h as u,b as l,P as v,d as D,t as d,s as E,x as N}from"./index-7ab8b32e.js";const O=p({__name:"Skeleton",props:{class:{}},setup(t){const e=t;return(n,g)=>(a(),r("div",{class:h(y(_)("animate-pulse rounded-md bg-primary/10",e.class))},null,2))}}),A=p({__name:"Empty",props:{class:{}},setup(t){const e=t;return(n,g)=>(a(),r("div",{"data-slot":"empty",class:h(y(_)("flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-solid border-slate-50 p-6 text-center md:p-12",e.class))},[x(n.$slots,"default")],2))}}),I=p({__name:"EmptyTitle",props:{class:{}},setup(t){const e=t;return(n,g)=>(a(),r("div",{"data-slot":"empty-title",class:h(y(_)("text-lg font-medium tracking-tight",e.class))},[x(n.$slots,"default")],2))}}),B=p({__name:"EmptyDescription",props:{class:{}},setup(t){const e=t;return(n,g)=>(a(),r("p",{"data-slot":"empty-description",class:h(y(_)("text-muted-foreground [&>a:hover]:text-success text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4",e.class))},[x(n.$slots,"default")],2))}});const T={name:"CustomTable",components:{Skeleton:O,Empty:A,EmptyTitle:I,EmptyDescription:B},props:{title:{type:String,default:"donations"},initialData:{type:Array,required:!1},columns:{type:Array,required:!0},filterQuery:{type:String,default:""},rowStyle:{type:Object,default:()=>({even:{},odd:{}})},columnStyles:{type:Object,default:()=>({})},loadAsync:{type:Boolean,required:!1},fetchData:{type:Function,required:!1},filterEnabled:{type:Boolean,default:!0},hasActions:{type:Boolean,default:!1},selectedRow:{type:Object,default:{}}},data(){return{data:[],sortColumn:null,sortOrder:"DESC",currentPage:1,rowsPerPage:10,totalElements:0,totalPages:1,pageSizeOptions:[10,15,25,50],loading:!1}},async mounted(){this.loadAsync&&this.fetchData&&await this.fetchDataIfNeeded({page:this.currentPage,size:this.rowsPerPage,sort:this.sortColumn,direction:this.sortOrder,search:this.filterQuery})},computed:{},methods:{handleClick(t){this.$emit("update:selectedRow",t)},sortByColumn(t){this.columns.findLast(n=>n.key===t).sort!==!1&&(this.sortColumn===t?(this.sortColumn=this.sortOrder==="ASC"?t:"",this.sortOrder=this.sortOrder==="ASC"?"DESC":""):(this.sortColumn=t,this.sortOrder="ASC"),this.fetchDataIfNeeded())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchDataIfNeeded())},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchDataIfNeeded())},async fetchDataIfNeeded(){if(this.fetchData){this.loading=!0;try{const t=await this.fetchData({page:this.currentPage-1,size:this.rowsPerPage,sort:this.sortColumn,direction:this.sortOrder,search:this.filterQuery});this.data=t.content,this.totalElements=t.totalElements,this.totalPages=t.totalPages}finally{this.loading=!1}}}},watch:{currentPage(t){this.fetchDataIfNeeded(),document.getElementById("DataTablePagingIndexOption"+t).scrollIntoView({behavior:"smooth"})},rowsPerPage(){this.currentPage=1,this.fetchDataIfNeeded()},filterQuery(){this.currentPage=1,this.fetchDataIfNeeded()}}},V={class:"table-container no-scrollbar"},j={key:0,class:"w-[100%] py-3"},q={key:1,class:"w-full py-20 flex flex-col items-center justify-center text-center"},z={key:2,class:"advanced-table"},Q=["onClick"],F={key:0,class:"text-success"},L={key:0},R=["onClick"],G={key:0},H={key:3,class:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4 px-4 pb-4"},M={class:"text-xs font-semibold uppercase tracking-wider text-muted-foreground flex items-center gap-2"},U=["value"],W={key:0,class:"flex items-center gap-1"},J=["disabled"],X={class:"flex items-center px-2"},Y={class:"text-sm font-bold text-foreground"},Z={class:"text-sm text-muted-foreground"},K=["disabled"];function $(t,e,n,g,o,c){const k=C("Skeleton");return a(),r("div",V,[o.loading?(a(),r("div",j,[(a(),r(f,null,m(5,s=>w(k,{class:"h-12 w-[100%] my-2",key:s})),64))])):!o.loading&&o.data.length===0?(a(),r("div",q,[e[4]||(e[4]=S('<div class="relative mb-6" data-v-3ea2426f><div class="absolute inset-0 bg-[#367D21]/10 blur-3xl rounded-full" data-v-3ea2426f></div><div class="relative rounded-full bg-card p-6 shadow-sm border border-border/40" data-v-3ea2426f><i class="fa fa-search-minus text-4xl text-muted-foreground/40" data-v-3ea2426f></i></div></div><h3 class="text-xl font-bold text-foreground mb-2" data-v-3ea2426f>No results found</h3><p class="text-muted-foreground max-w-xs mx-auto mb-8" data-v-3ea2426f> We couldn&#39;t find any organizations matching your current search or filters. </p>',3)),n.filterQuery?(a(),r("button",{key:0,onClick:e[0]||(e[0]=s=>t.$emit("clear-filters")),class:"px-6 py-2 rounded-full border border-border hover:bg-accent transition-colors text-sm font-medium"}," Clear search query ")):u("",!0)])):(a(),r("table",z,[l("thead",null,[l("tr",null,[(a(!0),r(f,null,m(n.columns,s=>(a(),r("th",{key:s.key,onClick:b=>c.sortByColumn(s.key),style:v(n.columnStyles[s.key]||{})},[D(d(s.label)+" ",1),o.sortColumn===s.key?(a(),r("span",F,[l("i",{class:h(o.sortOrder==="ASC"?"fa fa-arrow-up":"fa fa-arrow-down")},null,2)])):u("",!0)],12,Q))),128)),n.hasActions?(a(),r("th",L,"Actions")):u("",!0)])]),l("tbody",null,[(a(!0),r(f,null,m(o.data,(s,b)=>(a(),r("tr",{key:b,style:v(b%2===0?n.rowStyle.even:n.rowStyle.odd),onClick:i=>c.handleClick(s)},[(a(!0),r(f,null,m(n.columns,i=>(a(),r("td",{key:i.key,style:v(n.columnStyles[i.key]||{})},d(i.formatter?i.formatter(s[i.key]):s[i.key]),5))),128)),n.hasActions?(a(),r("td",G,[x(t.$slots,"actions",{row:s},void 0,!0)])):u("",!0)],12,R))),128))])])),!o.loading&&o.data.length>0?(a(),r("div",H,[l("div",M,[e[5]||(e[5]=l("span",null,"Showing",-1)),E(l("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.rowsPerPage=s),class:"bg-accent/50 border-none rounded-md px-2 py-1 focus:ring-1 focus:ring-[#367D21]"},[(a(!0),r(f,null,m(o.pageSizeOptions,s=>(a(),r("option",{key:s,value:s},d(s),9,U))),128))],512),[[N,o.rowsPerPage]]),l("span",null,"of "+d(o.totalElements)+" "+d(n.title),1)]),o.totalPages>1?(a(),r("div",W,[l("button",{onClick:e[2]||(e[2]=(...s)=>c.prevPage&&c.prevPage(...s)),disabled:o.currentPage===1,class:"p-2 rounded-full hover:bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},[...e[6]||(e[6]=[l("i",{class:"fa fa-chevron-left text-sm"},null,-1)])],8,J),l("div",X,[l("span",Y,d(o.currentPage),1),e[7]||(e[7]=l("span",{class:"mx-2 text-muted-foreground/40"},"/",-1)),l("span",Z,d(o.totalPages),1)]),l("button",{onClick:e[3]||(e[3]=(...s)=>c.nextPage&&c.nextPage(...s)),disabled:o.currentPage===o.totalPages,class:"p-2 rounded-full hover:bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},[...e[8]||(e[8]=[l("i",{class:"fa fa-chevron-right text-sm"},null,-1)])],8,K)])):u("",!0)])):u("",!0)])}const te=P(T,[["render",$],["__scopeId","data-v-3ea2426f"]]);export{te as D};
