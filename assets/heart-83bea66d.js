import{B as v}from"./BaseButton-c6c5ab63.js";import{C as x}from"./ContactService-d2c6f12e.js";import{l as b,p as _,r as h,s as m,Q as w,a as l,f as c,b as s,n,t as C,q as u,v as g,e as M,w as f,d as S,G as k,h as I,c as T,F as V,g as B,P as N}from"./index-7ab8b32e.js";import{M as z}from"./Modal-9e207090.js";const j={name:"modal",components:{BaseButton:v},props:{raiser:{required:!0},show:Boolean,showClose:{type:Boolean,default:!0},type:{type:String,default:"mini",validator(i){return["","notice","mini"].indexOf(i)!==-1},description:'Modal type (notice|mini|"") '},modalClasses:{type:[Object,String],description:"Modal dialog css classes"},modalContentClasses:{type:[Object,String],description:"Modal dialog content css classes"},gradient:{type:String,description:"Modal gradient type (error, primary etc)"},headerClasses:{type:[Object,String],description:"Modal Header css classes"},bodyClasses:{type:[Object,String],description:"Modal Body css classes"},footerClasses:{type:[Object,String],description:"Modal Footer css classes"},animationDuration:{type:Number,default:500,description:"Modal transition duration"}},data(){return{name:"",email:"",message:"",sending:!1}},methods:{closeModal(){this.$emit("update:show",!1),this.$emit("close")},async sendMessage(){if(this.sending)return;const i=_(),e=this.message+`

This message is for raiser: `+this.raiser.reference;try{this.sending=!0;const o=await x.postMessage({name:this.name,email:this.email,message:e});i.toast({duration:5e3,type:"success",message:"Your message has been sent."}),this.closeModal()}catch{i.toast({duration:5e3,type:"error",message:"Error sending message to fundraiser organizer."})}this.sendingMessage=!1}}},q=["aria-hidden"],D={class:"card bg-transparent shadow-xs p-3 modal-fade-in rounded-3 mx-1"},O={class:"card shadow-none backdrop-blur-md border-top-0 border-bottom-0 py-0 p-2 pt-4 mb-3"},F={class:"mt-2 mb-0 px-4"},U={class:"card-body"},E={class:"row"},Y={class:"col-12"},A={class:"form-group"},L={class:"input-group mb-4 bg-white"},P={class:"col-12 ps-md-2"},G={class:"form-group"},H={class:"input-group mb-4 bg-white"},Q={class:"form-group mb-4 mt-md-0 mt-4"},J={class:"row"},K={class:"col-md-12 text-end"};function R(i,e,o,y,a,r){const p=h("base-button");return m((l(),c("div",{class:n(["modal fade backdrop-blur-md",[{"show d-block":o.show},{"d-none":!o.show},{"modal-mini":o.type==="mini"}]]),onClick:e[5]||(e[5]=u((...t)=>r.closeModal&&r.closeModal(...t),["self"])),tabindex:"-1",role:"dialog","aria-hidden":!o.show},[s("div",{class:n(["modal-dialog modal-dialog-centered modal-lg",[{"modal-notice":o.type==="notice"},o.modalClasses]])},[s("div",{class:n(["modal-content",[o.gradient?`bg-gradient-${o.gradient}`:"",o.modalContentClasses]])},[s("div",{class:n(["modal-body",o.bodyClasses])},[s("div",D,[s("button",{onClick:e[0]||(e[0]=(...t)=>r.closeModal&&r.closeModal(...t)),class:"position-absolute end-0 me-4 mt-1 btn btn-sm backdrop-blur-md bg-secondary rounded-3 px-2 py-1 rounded-3",style:{"z-index":"1000000"}},[...e[6]||(e[6]=[s("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),s("div",O,[s("h4",F,"Contact "+C(o.raiser.organizerName),1),e[13]||(e[13]=s("hr",{class:"horizontal dark mb-1"},null,-1)),s("form",{onSubmit:e[4]||(e[4]=u((...t)=>r.sendMessage&&r.sendMessage(...t),["prevent"])),method:"post",autocomplete:"off"},[s("div",U,[s("div",E,[s("div",Y,[s("div",A,[e[8]||(e[8]=s("label",{class:"text-sm"},"Full Name",-1)),s("div",L,[e[7]||(e[7]=s("span",{class:"input-group-text backdrop-blur-md"},[s("i",{class:"fa fa-user mx-2"})],-1)),m(s("input",{class:"form-control form-control-lg px-1 backdrop-blur-md",placeholder:"Firstname Lastname",type:"text",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>a.name=t)},null,512),[[g,a.name]])])])]),s("div",P,[s("div",G,[e[10]||(e[10]=s("label",{class:"text-sm"},"Email Address",-1)),s("div",H,[e[9]||(e[9]=s("span",{class:"input-group-text backdrop-blur-md"},[s("i",{class:"fa fa-leaf mx-2"})],-1)),m(s("input",{class:"form-control form-control-lg px-1 backdrop-blur-md",placeholder:"Your email address for feedback",type:"email",required:"","onUpdate:modelValue":e[2]||(e[2]=t=>a.email=t)},null,512),[[g,a.email]])])])])]),s("div",Q,[e[11]||(e[11]=s("label",{class:"text-sm"},"Your Message",-1)),m(s("textarea",{name:"message",class:"form-control border border-light bg-white py-2 px-3 rounded-3",id:"message",rows:"5",spellcheck:"true",required:"","onUpdate:modelValue":e[3]||(e[3]=t=>a.message=t),placeholder:"Enter your message here.",style:{resize:"none"}},null,512),[[g,a.message]])]),s("div",J,[s("div",K,[M(p,{nativeType:"submit",loading:a.sending,class:"btn btn-success mt-0"},{default:f(()=>[...e[12]||(e[12]=[S(" Send Message ",-1)])]),_:1},8,["loading"])])])])],32),e[14]||(e[14]=s("hr",{class:"horizontal dark my-0"},null,-1))])])],2),i.$slots.footer?(l(),c("div",{key:0,class:n(["modal-footer",o.footerClasses])},[k(i.$slots,"footer",{},void 0,!0)],2)):I("",!0)],2)],2)],10,q)),[[w,o.show]])}const ie=b(j,[["render",R],["__scopeId","data-v-d1cac6ab"]]);const W={components:{Modal:z},props:{images:{type:Array,required:!0},startIndex:{type:Number,default:0},duration:{type:Number,default:5e3}},data(){return{currentIndex:this.startIndex,visible:!0,progress:[],interval:null,startTime:0}},methods:{startTimer(){this.interval&&clearInterval(this.interval),this.progress=this.images.map((i,e)=>e<this.currentIndex?100:0),this.startTime=Date.now(),this.interval=setInterval(()=>{let i=Date.now()-this.startTime,e=Math.min(i/this.duration*100,100);this.progress[this.currentIndex]=e,e>=100&&this.nextStory()},50)},nextStory(){this.currentIndex<this.images.length-1?(this.currentIndex++,this.startTimer()):this.closeViewer()},prevStory(){this.currentIndex>0?(this.currentIndex--,this.startTimer()):this.closeViewer()},pauseTimer(){clearInterval(this.interval)},resumeTimer(){this.startTime=Date.now()-this.progress[this.currentIndex]/100*this.duration,this.startTimer()},closeViewer(){this.visible=!1,this.onModalClose()},onModalClose(){clearInterval(this.interval),this.$emit("close")}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.interval)}},X={class:"story-container"},Z={class:"progress-container"},$=["src"],ee={class:"story-controls"};function se(i,e,o,y,a,r){const p=h("modal");return l(),T(p,{show:a.visible,"onUpdate:show":e[4]||(e[4]=t=>a.visible=t),"modal-classes":"modal-lg","body-classes":"p-0 rounded-3 overflow-hidden","show-close":!1,onClose:r.onModalClose},{default:f(()=>[s("div",X,[s("div",Z,[(l(!0),c(V,null,B(o.images,(t,d)=>(l(),c("div",{key:d,class:n(["progress-bar",{active:d===a.currentIndex,completed:d<a.currentIndex}]),style:N({width:a.progress[d]+"%"})},null,6))),128))]),s("div",{class:"story-image",onMouseenter:e[0]||(e[0]=(...t)=>r.pauseTimer&&r.pauseTimer(...t)),onMouseleave:e[1]||(e[1]=(...t)=>r.resumeTimer&&r.resumeTimer(...t))},[s("img",{src:o.images[a.currentIndex],alt:"Story",style:{background:"#0006 !important","object-fit":"contain !important"}},null,8,$)],32),s("div",ee,[s("div",{class:"story-nav left",onClick:e[2]||(e[2]=u((...t)=>r.prevStory&&r.prevStory(...t),["stop"]))}),s("div",{class:"story-nav right",onClick:e[3]||(e[3]=u((...t)=>r.nextStory&&r.nextStory(...t),["stop"]))})])])]),_:1},8,["show","onClose"])}const ne=b(W,[["render",se],["__scopeId","data-v-87ba904c"]]),le="/img/shapes/heart.png";export{ie as C,ne as S,le as _};
