import{B as U}from"./BaseButton-0ea92229.js";import{F as M}from"./FormMessage-6f32ba9c.js";import{l as _,U as h,A as g,p as b,r as v,a as l,f as r,b as s,q as C,h as d,s as f,v as a,x as c,y as S,z as L,e as p,d as x,w,m as N,t as B}from"./index-5e43ba67.js";const I={components:{BaseButton:U,FormMessage:M},data(){return{loading:!1,signUpModel:{firstName:"",lastName:"",email:"",countryCode:"+234",phone:"",password:"",confirmPassword:"",receiveUpdates:!0},currentStep:1,responseMessage:{text:null,type:"error"}}},async mounted(){const n=await h.get("isLoggedIn"),e=await h.get("user");if(n&&(e!=null&&e.name))return this.$router.push("/");n||e!=null&&e.name?await g.logout():(document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",this.activateGoogleSignIn())},computed:{formDisabled(){return this.loading||void 0}},methods:{async handleCredentialResponse(n){var u;this.loading=!0,typeof((u=this.$Progress)==null?void 0:u.start)=="function"&&this.$Progress.start();let e=null;try{const t=await fetch("https://ipapi.co/json/");if(t.ok){const i=await t.json();e=`${i.city}, ${i.region}, ${i.country}`}}catch{}const m={provider:"google",accessToken:n.credential,location:e};await g.createSession(m),this.$router.push("/")},redirectToGoogleOAuth(){const n="https://donner.africa",e="118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",m=encodeURIComponent(n+"/account/google"),u=encodeURIComponent("openid email profile"),t=Math.random().toString(36).substring(2)+Date.now().toString(36),i=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${e}&redirect_uri=${m}&response_type=id_token&scope=${u}&nonce=${t}`;window.location.href=i},activateGoogleSignIn(){document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",!(!window.google||!window.google.accounts)&&(window.google.accounts.id.initialize({client_id:"118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",callback:this.handleCredentialResponse,use_fedcm_for_prompt:!0}),window.google.accounts.id.prompt())},activateLinkedInSignIn(){window.location.href="https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=77kg1tkj4odek6&redirect_uri=https://donner.africa/account/linkedin&scope=openid%20profile%20email%20w_member_social"},async signUp(){if(this.signUpModel.password!==this.signUpModel.confirmPassword){this.responseMessage={html:"Your passwords do not match. <br/>Confirm your password.",type:"error"};return}this.loading=!0,this.$Progress.start();try{const{data:n,message:e}=await g.registerUser({...this.signUpModel});b().toast({message:e||"You have signed up successfully",type:"success"}),this.currentStep=2}catch(n){b().toast({message:n.message||"An issue was met while signing you up",type:"error"}),this.responseMessage={html:`<strong>${n.message}</strong>`,type:"error"}}this.loading=!1,this.$Progress.finish()}}},V={class:"page-header min-vh-100 align-items-start bg-white"},D={class:"container px-sm-auto px-0"},P={class:"row"},T={class:"col-lg-7 col-md-8 mx-sm-auto mx-0 my-0 my-sm-5 px-0 px-sm-auto py-sm-7"},A={class:"card shadow-none bg-white rounded-3 min-vh-100 min-vh-sm-80"},q={class:"card-body px-lg-5 py-lg-5 text-start"},R={key:0},G={key:1,class:"mb-4"},F={class:"px-md-4 ps-2 pe-4 row"},z={class:"form-group mt-3 col-sm-6"},Y={class:"input-group"},j=["disabled"],E={class:"form-group mt-3 col-sm-6"},J={class:"input-group"},O=["disabled"],H={key:0,class:"form-group mt-3 col-sm-6 form-section active"},K={class:"input-group"},Q=["disabled"],W={key:1,class:"form-group mt-3 col-sm-6 form-section active"},X={class:"input-group"},Z={class:"input-group-text ps-3 pe-1 py-0"},$=["disabled"],ee=["disabled"],se={key:2,class:"form-group mt-3 col-sm-6 form-section active"},te={class:"input-group"},oe=["disabled"],ie={key:3,class:"form-group mt-3 col-sm-6 form-section active"},ne={class:"input-group"},le=["disabled"],re={key:4,class:"col-12 form-section active"},de={class:"form-group mt-3 mx-2"},ae={class:"form-check form-switch"},pe=["disabled"],ce={class:"form-group mt-3"},me={class:"text-lg text-dark mt-4"},ue={class:"col-12 my-2"},ge={class:"row"},fe={class:"col-md-6 h-[100%]"},he={class:"col-md-6 h-[100%]"},be={class:"form-section active"},ve={key:0,class:"px-md-4 ps-2 pe-4 row"},xe={class:"col-12 text-center my-5 py-5"},we={class:"text-lg text-dark mb-4"};function ke(n,e,m,u,t,i){const k=v("BaseButton"),y=v("RouterLink");return l(),r("div",null,[s("section",null,[s("div",V,[s("div",D,[s("div",P,[s("div",T,[s("div",A,[s("div",q,[e[38]||(e[38]=s("div",{class:"success mb-6 mb-md-4"},[s("a",{href:"/",class:"d-none d-md-inline-block icon icon-shape icon-xl rounded-circle bg-white shadow text-center p-3 mx-auto"},[s("img",{src:C,class:"w-[90%] h-[90%] mt-1"})])],-1)),t.currentStep==1?(l(),r("h2",R,"Create an account")):d("",!0),t.currentStep==1?(l(),r("p",G,"Sign up to manage partnerships and publish fundraisers.")):d("",!0),t.currentStep==1?(l(),r("form",{key:2,class:"form-section active",onSubmit:e[10]||(e[10]=f((...o)=>i.signUp&&i.signUp(...o),["prevent"]))},[s("div",F,[e[31]||(e[31]=s("div",{class:"col-12"},null,-1)),s("div",z,[e[12]||(e[12]=s("label",{class:"text-dark text-sm"}," First name ",-1)),s("div",Y,[e[11]||(e[11]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-user","aria-hidden":"true"})],-1)),a(s("input",{class:"form-control form-control-lg text-lg ps-1",minlength:"2",autocomplete:"true","onUpdate:modelValue":e[0]||(e[0]=o=>t.signUpModel.firstName=o),required:"",placeholder:"Hau'wa",disabled:i.formDisabled},null,8,j),[[c,t.signUpModel.firstName]])])]),s("div",E,[e[14]||(e[14]=s("label",{class:"text-dark text-sm"}," Last name ",-1)),s("div",J,[e[13]||(e[13]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-user","aria-hidden":"true"})],-1)),a(s("input",{class:"form-control form-control-lg text-lg ps-1",minlength:"2",autocomplete:"true","onUpdate:modelValue":e[1]||(e[1]=o=>t.signUpModel.lastName=o),required:"",placeholder:"John",disabled:i.formDisabled},null,8,O),[[c,t.signUpModel.lastName]])])]),t.signUpModel.firstName&&t.signUpModel.lastName?(l(),r("div",H,[e[16]||(e[16]=s("label",{class:"text-dark text-sm"}," Email ",-1)),s("div",K,[e[15]||(e[15]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-envelope","aria-hidden":"true"})],-1)),a(s("input",{class:"form-control form-control-lg text-lg ps-1",autocomplete:"true",required:"","onUpdate:modelValue":e[2]||(e[2]=o=>t.signUpModel.email=o),type:"email",placeholder:"firstname.lastname@domain.com",disabled:i.formDisabled},null,8,Q),[[c,t.signUpModel.email]])])])):d("",!0),t.signUpModel.firstName&&t.signUpModel.lastName?(l(),r("div",W,[e[20]||(e[20]=s("label",{class:"text-dark text-sm"}," Phone ",-1)),s("div",X,[s("span",Z,[e[18]||(e[18]=s("span",{class:"","aria-hidden":"true"},[s("i",{class:"fas fa-phone"})],-1)),a(s("select",{class:"form-control form-control-lg text-lg border-0 ms-2 ps-1 rounded-0 disabled:bg-[#fff]","onUpdate:modelValue":e[3]||(e[3]=o=>t.signUpModel.countryCode=o),disabled:i.formDisabled},[...e[17]||(e[17]=[s("option",{selected:""},"+234",-1)])],8,$),[[S,t.signUpModel.countryCode]])]),a(s("input",{class:"form-control form-control-lg text-lg","onUpdate:modelValue":e[4]||(e[4]=o=>t.signUpModel.phone=o),required:"",type:"tel",minlength:"9","max-length":"12",placeholder:"8107758090",disabled:i.formDisabled},null,8,ee),[[c,t.signUpModel.phone]]),e[19]||(e[19]=s("button",{class:"bg-white px-3 mb-0",type:"button",style:{"border-radius":"0 1.83rem 1.83rem 0",border:"solid 0.4px #fff"}}," ðŸ‡³ðŸ‡¬ ",-1))])])):d("",!0),t.signUpModel.email&&t.signUpModel.phone?(l(),r("div",se,[e[22]||(e[22]=s("label",{class:"text-dark text-sm"}," Password ",-1)),s("div",te,[e[21]||(e[21]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),a(s("input",{class:"form-control form-control-lg text-lg ps-1",autocomplete:"true","onUpdate:modelValue":e[5]||(e[5]=o=>t.signUpModel.password=o),required:"",type:"password",placeholder:"********",disabled:i.formDisabled},null,8,oe),[[c,t.signUpModel.password]])])])):d("",!0),t.signUpModel.email&&t.signUpModel.phone?(l(),r("div",ie,[e[24]||(e[24]=s("label",{class:"text-dark text-sm w-[100%]"}," Confirm Password ",-1)),s("div",ne,[e[23]||(e[23]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),a(s("input",{class:"form-control form-control-lg text-lg ps-1",autocomplete:"true","onUpdate:modelValue":e[6]||(e[6]=o=>t.signUpModel.confirmPassword=o),required:"",type:"password",placeholder:"********",disabled:i.formDisabled},null,8,le),[[c,t.signUpModel.confirmPassword]])])])):d("",!0),t.signUpModel.email&&t.signUpModel.phone?(l(),r("div",re,[s("div",de,[s("div",ae,[a(s("input",{class:"form-check-input",type:"checkbox",checked:"true",id:"receiveUpdates","onUpdate:modelValue":e[7]||(e[7]=o=>t.signUpModel.receiveUpdates=o),disabled:i.formDisabled},null,8,pe),[[L,t.signUpModel.receiveUpdates]]),e[25]||(e[25]=s("label",{class:"form-check-label",for:"receiveUpdates"},[p(" Receive updates on raising events and giving tips from "),s("span",{class:"text-bold text-primary"},"your #1 giving platform"),p(". "),s("br"),p(" You can unsubscribe at any time. ")],-1))])]),s("div",ce,[x(k,{nativeType:"submit",class:"btn btn-success float-end",loading:t.loading},{default:w(()=>[...e[26]||(e[26]=[p(" Sign Up ",-1)])]),_:1},8,["loading"])])])):d("",!0),s("span",me,[e[28]||(e[28]=p(" Have an account? ",-1)),x(y,{to:"/account/login",class:"text-primary text-bold"},{default:w(()=>[...e[27]||(e[27]=[p(" Login ",-1)])]),_:1})]),e[32]||(e[32]=s("hr",{style:{margin:"2rem 0",background:"#fff",height:"3px"}},null,-1)),s("div",ue,[s("div",ge,[s("div",fe,[s("a",{class:"btn w-[100%] h-[100%] btn-white border border-light bg-[#fff]",onClick:e[8]||(e[8]=f((...o)=>i.activateLinkedInSignIn&&i.activateLinkedInSignIn(...o),["prevent"]))},[...e[29]||(e[29]=[s("span",{class:"me-2 text-secondary"}," LinkedIn ",-1),s("i",{class:"fab fa-linkedin text-info lead"},null,-1)])])]),s("div",he,[s("a",{class:"btn text-secondary w-[100%] h-[100%] btn-white border border-light bg-[#fff]",onClick:e[9]||(e[9]=f((...o)=>i.redirectToGoogleOAuth&&i.redirectToGoogleOAuth(...o),["prevent"]))},[...e[30]||(e[30]=[N('<span class="me-2"> Google </span><svg width="24px" height="32px" viewBox="0 0 64 64" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(3.000000, 2.000000)" fill-rule="nonzero"><path d="M57.8123233,30.1515267 C57.8123233,27.7263183 57.6155321,25.9565533 57.1896408,24.1212666 L29.4960833,24.1212666 L29.4960833,35.0674653 L45.7515771,35.0674653 C45.4239683,37.7877475 43.6542033,41.8844383 39.7213169,44.6372555 L39.6661883,45.0037254 L48.4223791,51.7870338 L49.0290201,51.8475849 C54.6004021,46.7020943 57.8123233,39.1313952 57.8123233,30.1515267" fill="#4285F4"></path><path d="M29.4960833,58.9921667 C37.4599129,58.9921667 44.1456164,56.3701671 49.0290201,51.8475849 L39.7213169,44.6372555 C37.2305867,46.3742596 33.887622,47.5868638 29.4960833,47.5868638 C21.6960582,47.5868638 15.0758763,42.4415991 12.7159637,35.3297782 L12.3700541,35.3591501 L3.26524241,42.4054492 L3.14617358,42.736447 C7.9965904,52.3717589 17.959737,58.9921667 29.4960833,58.9921667" fill="#34A853"></path><path d="M12.7159637,35.3297782 C12.0932812,33.4944915 11.7329116,31.5279353 11.7329116,29.4960833 C11.7329116,27.4640054 12.0932812,25.4976752 12.6832029,23.6623884 L12.6667095,23.2715173 L3.44779955,16.1120237 L3.14617358,16.2554937 C1.14708246,20.2539019 0,24.7439491 0,29.4960833 C0,34.2482175 1.14708246,38.7380388 3.14617358,42.736447 L12.7159637,35.3297782" fill="#FBBC05"></path><path d="M29.4960833,11.4050769 C35.0347044,11.4050769 38.7707997,13.7975244 40.9011602,15.7968415 L49.2255853,7.66898166 C44.1130815,2.91684746 37.4599129,0 29.4960833,0 C17.959737,0 7.9965904,6.62018183 3.14617358,16.2554937 L12.6832029,23.6623884 C15.0758763,16.5505675 21.6960582,11.4050769 29.4960833,11.4050769" fill="#EB4335"></path></g></g></svg>',2)])])])])])])],32)):d("",!0),s("div",be,[t.currentStep==2?(l(),r("div",ve,[s("div",xe,[e[35]||(e[35]=s("i",{class:"fas fa-check-circle fa-5x text-success mb-4 border-[solid white 20px]"},null,-1)),e[36]||(e[36]=s("h3",{class:"mb-3"},"Account Created!",-1)),e[37]||(e[37]=s("p",{class:"text-lg text-dark mb-4"}," Your account has been created successfully. ",-1)),s("p",we,[e[33]||(e[33]=p(" An email has been sent to ",-1)),s("strong",null,B(t.signUpModel.email),1),e[34]||(e[34]=p(" with a link to verify your email address. ",-1))])])])):d("",!0)])])])])])])])])])}const _e=_(I,[["render",ke]]);export{_e as default};
