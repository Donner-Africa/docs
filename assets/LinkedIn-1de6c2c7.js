import{l as c,o as d,A as l,S as i,U as u,a as v,f as m,e as w,m as f,z as p}from"./index-5f7a37b4.js";import{S as _}from"./StarryBackground-f8eca98f.js";const h={class:"h-[100vh] flex items-center justify-center relative overflow-hidden bg-background"},g={__name:"LinkedIn",setup(b){return d(async()=>{await new Promise(a=>setTimeout(a,300));try{const t=new URLSearchParams(window.location.search).get("code");let s=null;try{const o=await fetch("https://ipapi.co/json/");if(o.ok){const n=await o.json();s=`${n.city}, ${n.region}, ${n.country}`}}catch{}const r={provider:"linkedin",accessToken:t,location:s},{data:e}=await l.createSession(r);e!=null&&e.deviceToken?(await i.IndexedDB.set("DonnerDB","UserStore","authorization",{token:e.deviceToken}),i.LocalStorage.set("DA_IS_AUTHORITY",!0),await i.IndexedDB.delete("DonnerDB","UserStore","preAuthorization"),e.user&&u.set("user",{...e.user}),window.location.href="/"):(console.error("No deviceToken in session response"),window.location.href="/account/login?error=session")}catch(a){console.error("LinkedIn sign-in failed",a),window.location.href="/account/login?error=linkedin"}}),(a,t)=>(v(),m("div",h,[w(_),t[0]||(t[0]=f('<div class="container mx-auto relative z-10" data-v-03825ab5><div class="max-w-lg mx-auto" data-v-03825ab5><div class="bg-card shadow-xl rounded-2xl p-5 flex flex-col items-center text-center animate-slide-up" data-v-03825ab5><div class="w-24 h-24 rounded-full bg-card shadow ring-1 ring-border flex items-center justify-center mb-6" data-v-03825ab5><img src="'+p+'" class="w-16 h-16" alt="App Icon" data-v-03825ab5></div><h2 class="text-2xl font-semibold mb-2" data-v-03825ab5>Signing you in with LinkedIn</h2><p class="text-muted-foreground mb-6" data-v-03825ab5> Please wait while we authenticate you with LinkedIn. </p><div class="flex justify-center" data-v-03825ab5><div class="loader" data-v-03825ab5></div></div></div></div></div>',1))]))}},y=c(g,[["__scopeId","data-v-03825ab5"]]);export{y as default};
