import{Q as H}from"./vue-quill.esm-bundler-24bdcdfc.js";/* empty css                         */import{R as j,S as F,I as Q}from"./ImageUploadService-b85d9786.js";import{B as E}from"./BaseButton-43eca65b.js";import{S as W}from"./SDGSelect-32c5430f.js";import{M as z}from"./Modal-e50977d8.js";import{C as N}from"./ConfigurationService-dd552bd8.js";import{F as b}from"./FundRaiserService-8aa746e2.js";import{l as D,p as y,a as l,f as d,b as t,n as k,P as V,h,e as c,v as m,z as U,U as A,r as x,F as M,g as T,s as S,t as u,x as _,y as I,d as f,w,m as P,c as G,Q as O,R as Y,V as J}from"./index-7b07f307.js";import{f as q}from"./FormUtility-a2bc7d0b.js";import{D as K}from"./AdvancedTable-403376bb.js";import"./Delta-529560f3.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-2f8ded70.js";import"./ohash.D__AXeF1-648599ad.js";const X={data(){return{errorLoadingRaiser:!1,loading:!0,raiser:{},sharingSettings:{loading:[]},savingTheme:!1,publishing:!1}},async mounted(){this.loadRaiser()},methods:{async loadRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/";return}this.raiser=await b.getRaiserByReference(o),this.sharingSettings={seo:this.raiser.seo,featured:this.raiser.featured,privateMode:this.raiser.privateMode,archive:this.raiser.archive,theme:this.raiser.theme,loading:[]}}catch{this.errorLoadingRaiser=!0}this.loading=!1},async publish(){this.publishing=!0;const o=y();try{const e={...JSON.parse(JSON.stringify(this.raiser)),goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,"")},a=await b.updateSectionData(this.raiser.reference,"AFP",e);o.toast({message:"Your raiser is live.",type:"success",duration:5e3}),this.$router.push(`/me/raisers/${e.reference}`)}catch(e){o.toast({message:e.message||"There was an error saving your raiser.",type:"error",duration:5e3})}this.publishing=!1},downloadFlyer(){b.downloadFlyer(this.raiser.reference,this.raiser.theme)},async updateSharingSetting(o,e){this.sharingSettings.loading.push(o);const a=y(),v={setting:o,value:e};try{const{data:r,message:i,flag:g}=await b.updateSharingSettings(this.raiser.reference,v);this.sharingSettings={...this.sharingSettings,...r},a.toast({message:i,type:g,silent:!0})}catch(r){a.toast({message:r.message,type:"error"})}const s=this.sharingSettings.loading.indexOf(o);this.sharingSettings.loading.splice(s,1)}}},Z={class:"px-0 container-fluid"},$={class:"row position-relative"},ee={class:"col-12 col-md-4 order-md-2"},te={class:"position-sticky",style:{top:"100px"}},se={class:"p-4"},oe={class:"row mt-4 pb-1 position-relative"},re={class:"col-4 text-center mt-4"},ie={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},ne={class:"col-4 text-center mt-4"},ae={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},le={class:"col-4 text-center mt-4"},de={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},ce={class:"col-4 text-center mt-4"},ue={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},me={class:"col-4 text-center mt-4"},ge={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},pe={class:"col-4 text-center mt-4"},he={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},fe={class:"row mt-4"},be={class:"col-6"},ve={class:"col-6"},ye=["disabled"],xe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},we={class:"col-md-8"},ke={class:"card shadow-none border border-light mt-4"},Se={class:"card-body pt-0"},_e={class:"table-responsive"},Ce={class:"table mb-0"},Ie={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},De=["disabled"],Re={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Me=["disabled"],Te={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Oe=["disabled"],Ue={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Be=["disabled"];function Ne(o,e,a,v,s,r){return l(),d("div",null,[t("div",Z,[t("div",$,[t("div",ee,[t("div",te,[t("div",{class:k(["w-100 rounded-3 mt-4 position-relative bg-success-light align-items-center",s.sharingSettings.loading.includes("theme")?"opacity-9":""]),style:V([{"min-height":"400px",cursor:"pointer"},s.sharingSettings.loading.includes("theme")?"pointer-events: none;":""])},[t("div",se,[e[28]||(e[28]=t("span",{class:"h4"}," Select This Raiser's Theme ",-1)),e[29]||(e[29]=t("p",{class:"text-sm"}," This is the theme that your flyers will use when published. ",-1)),t("div",oe,[t("div",re,[t("div",{onClick:e[0]||(e[0]=i=>{s.raiser.theme="empowerment",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto",style:{height:"100px","aspect-ratio":"1 / 1",background:"linear-gradient(310deg, #ff20d8, #c959eb)"}},[s.raiser.theme=="empowerment"?(l(),d("div",ie,[...e[16]||(e[16]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[17]||(e[17]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Empowerment ",-1))]),t("div",ne,[t("div",{onClick:e[1]||(e[1]=i=>{s.raiser.theme="intervention",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-warning",style:{height:"100px","aspect-ratio":"1 / 1"}},[s.raiser.theme=="intervention"?(l(),d("div",ae,[...e[18]||(e[18]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[19]||(e[19]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Intervention ",-1))]),t("div",le,[t("div",{onClick:e[2]||(e[2]=i=>{s.raiser.theme="corporate",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-info",style:{height:"100px","aspect-ratio":"1 / 1"}},[s.raiser.theme=="corporate"?(l(),d("div",de,[...e[20]||(e[20]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[21]||(e[21]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Corporate ",-1))]),t("div",ce,[t("div",{onClick:e[3]||(e[3]=i=>{s.raiser.theme="emergency",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-error",style:{height:"100px","aspect-ratio":"1 / 1"}},[s.raiser.theme=="emergency"?(l(),d("div",ue,[...e[22]||(e[22]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[23]||(e[23]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Emergency ",-1))]),t("div",me,[t("div",{onClick:e[4]||(e[4]=i=>{s.raiser.theme="regular",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-primary",style:{height:"100px","aspect-ratio":"1 / 1"}},[s.raiser.theme=="regular"?(l(),d("div",ge,[...e[24]||(e[24]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[25]||(e[25]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Community ",-1))]),t("div",pe,[t("div",{onClick:e[5]||(e[5]=i=>{s.raiser.theme="venture",r.updateSharingSetting("theme",s.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-dark",style:{height:"100px","aspect-ratio":"1 / 1"}},[s.raiser.theme=="venture"?(l(),d("div",he,[...e[26]||(e[26]=[t("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[27]||(e[27]=t("span",{class:"text-xs font-weight-normal d-block mt-2"}," Venture ",-1))])])])],6),t("div",fe,[t("div",be,[t("button",{onClick:e[6]||(e[6]=(...i)=>r.downloadFlyer&&r.downloadFlyer(...i)),class:"btn btn-outline-secondary w-100"},[...e[30]||(e[30]=[t("i",{class:"fa fa-download me-2"},null,-1),c(" Preview Flyer ",-1)])])]),t("div",ve,[s.raiser.status=="DRAFT"?(l(),d("button",{key:0,onClick:e[7]||(e[7]=(...i)=>r.publish&&r.publish(...i)),disabled:s.publishing,class:"btn btn-outline-success w-100"},[s.publishing?(l(),d("span",xe)):h("",!0),e[31]||(e[31]=c(" Publish Raiser ",-1))],8,ye)):h("",!0)])])])]),t("div",we,[t("div",ke,[e[36]||(e[36]=t("div",{class:"card-header pb-0"},[t("h5",null,"Publicity Settings"),t("p",{class:"text-sm"},"Configure your publicity and privacy settings.")],-1)),t("div",Se,[t("div",_e,[t("table",Ce,[t("tbody",null,[t("tr",null,[e[32]||(e[32]=t("td",{class:"ps-1",colspan:"4"},[t("div",{class:"my-auto"},[t("span",{class:"text-dark d-block",style:{"font-size":"20px"}},"SEO Friendly"),t("span",{class:"text-xs font-weight-normal"}," Allow your raiser to popup on search engines. ")])],-1)),t("td",null,[t("div",Ie,[m(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=i=>s.sharingSettings.seo=i),onChange:e[9]||(e[9]=i=>r.updateSharingSetting("seo",s.sharingSettings.seo)),disabled:s.sharingSettings.archive||s.sharingSettings.privateMode||s.sharingSettings.loading.includes("seo")?!0:void 0},null,40,De),[[U,s.sharingSettings.seo]])])])]),t("tr",null,[e[33]||(e[33]=t("td",{class:"ps-1",colspan:"4"},[t("div",{class:"my-auto"},[t("span",{class:"text-dark d-block",style:{"font-size":"20px"}},"Promoted"),t("span",{class:"text-xs font-weight-normal"}," Feature this raiser on the home page and in search results. (+ 5% fee on funds raised) ")])],-1)),t("td",null,[t("div",Re,[m(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=i=>s.sharingSettings.featured=i),onChange:e[11]||(e[11]=i=>r.updateSharingSetting("featured",s.sharingSettings.featured)),disabled:s.sharingSettings.archive||s.sharingSettings.privateMode||s.sharingSettings.loading.includes("featured")?!0:void 0},null,40,Me),[[U,s.sharingSettings.featured]])])])]),t("tr",null,[e[34]||(e[34]=t("td",{class:"ps-1",colspan:"4"},[t("div",{class:"my-auto"},[t("span",{class:"text-dark d-block",style:{"font-size":"20px"}},"Private Mode"),t("span",{class:"text-xs font-weight-normal"}," Hide this raiser from public view and search so only people with the link can view it. ")])],-1)),t("td",null,[t("div",Te,[m(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=i=>s.sharingSettings.privateMode=i),onChange:e[13]||(e[13]=i=>r.updateSharingSetting("privateMode",s.sharingSettings.privateMode)),disabled:s.sharingSettings.archive||s.sharingSettings.loading.includes("privateMode")?!0:void 0},null,40,Oe),[[U,s.sharingSettings.privateMode]])])])]),t("tr",null,[e[35]||(e[35]=t("td",{class:"ps-1",colspan:"4"},[t("div",{class:"my-auto"},[t("div",{class:"mb-0 text-dark",style:{"font-size":"20px"}}," Archive "),t("span",{class:"text-xs font-weight-normal"}," Archive this raiser (this will prevent further viewing). ")])],-1)),t("td",null,[t("div",Ue,[m(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=i=>s.sharingSettings.archive=i),onChange:e[15]||(e[15]=i=>r.updateSharingSetting("archive",s.sharingSettings.archive)),disabled:s.sharingSettings.loading.includes("archive")||void 0},null,40,Be),[[U,s.sharingSettings.archive]])])])])])])])])])])])])])}const Ae=D(X,[["render",Ne]]),qe={components:{BaseButton:E,SDGSelect:W,QuillEditor:H,Modal:z,VuePictureCropper:j},data(){return{categories:[],croppingImage:!1,errorLoadingRaiser:!1,loading:!0,raiser:{},timelineImages:[],photoUrl:"",picture:"",savingImage:!1,showImageCropper:!1,showBannerModal:!1,showRemoveTimelineImageModal:!1,suggestingSummary:!1,savingBasicInfo:!1,savingLocaleInfo:!1,savingGoalInfo:!1,savingStory:!1,savingDraft:!1,updatingTimeline:!1}},beforeMount(){this.categories=N.get("fundRaiserCategories")},async mounted(){if(this.fetchRaiser(),this.loggedIn=await A.get("isLoggedIn"),this.loggedIn){const o=await A.get("user");this.name=o.name,this.email=o.email,this.phone=o.phone}},computed:{categoryNames(){return this.categories.map(o=>o.name)},subCategoryNames(){const o=this.categories.find(e=>e.name===this.raiser.category);return o?o.subCategories:[]},storyWordCount(){const o=document.createElement("div");o.innerHTML=new String(this.raiser.story).replaceAll(".",". ");const e=o.innerText.replaceAll(/ [\s]{2,} /g," ").trim();return e.length===0?0:e.split(" ").length},summaryCharacterCount(){const o=document.createElement("div");o.innerHTML=new String(this.raiser.summary).replaceAll(".",". ");const e=o.innerText.replaceAll(/ [\s]{2,} /g," ").trim();return e.length===0?0:e.length}},methods:{formatAmount:q,openImageSelectionDialog(){this.$refs.imageFileUploadInput.click()},async openImageCropper(o){const e=y();this.picture=!1,this.croppedImage="";const a=o.target.files[0],v=new FileReader;v.onload=()=>{this.picture=String(v.result),this.showImageCropper=!0,o.target.value=""};try{await v.readAsDataURL(a)}catch(s){e.toast({message:s.message||"An error was encountered while loading the image.",type:"error",duration:5e3})}},async cropImage(){const o=y();if(F){this.croppingImage=!0;try{const e=await F.getFile(),a=await Q.uploadBannerImage(e);this.photoUrl=a.secure_url,this.showImageCropper=!1}catch(e){o.toast({message:e.message||"Cropping the image failed",type:"error",duration:5e3})}this.croppingImage=!1}},async saveCroppedImage(){if(this.savingImage)return;this.savingImage=!0;const o=y();try{const e={image:`${this.photoUrl}`},a=this.updatingTimeline?"TIMELINE_INFORMATION":"BANNER_INFORMATION",{data:v}=await b.updateSectionData(this.raiser.reference,a,e);this.updatingTimeline?this.timelineImages=v.timelineImages:this.raiser.bannerImage=this.photoUrl,o.toast({message:"Done",type:"success",duration:5e3}),this.closeBannerModal()}catch(e){o.toast({message:e.message||"We could not save the image.<br/>Check your network and try again.",type:"error",duration:5e3})}this.updatingTimeline=!1,this.savingImage=!1},closeBannerModal(){this.showBannerModal=!1,this.picture="",this.showImageCropper=!1,this.photoUrl=this.raiser.bannerImage},async loadRaiserDetails(){const o=await b.getRaiserByReference(this.raiser.reference);this.raiser=o,this.raiser.sdgs=this.raiser.sdgs||[],this.raiser.goal=this.formatAmount(this.raiser.goal),this.timelineImages=o.timelineImages||[];const e=o.raisedAmount>o.goal?100:100*(o.raisedAmount/o.goal);this.$refs.progressbar.style.width=`${e}%`},async fetchRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/";return}this.raiser.reference=o,await this.loadRaiserDetails(),this.loadRaiserBanner()}catch{this.errorLoadingRaiser=!0}this.loading=!1},async loadRaiserBanner(){const o=this.raiser.bannerImage;if(o){var e=new Image;e.onload=()=>{this.$refs.banner.src=e.src},e.src=o}},async saveBasicInfo(){this.savingBasicInfo=!0;const o=y();try{const e={title:`${this.raiser.title}`,category:`${this.raiser.category}`,subCategory:`${this.raiser.subCategory}`};if(e.title.length>70)throw new Error("Your title is too long.");if(e.title.length<20)throw new Error("Your title is too short.");if(!this.subCategoryNames.includes(e.subCategory))throw new Error("Select a sub category.");const a=await b.updateSectionData(this.raiser.reference,"BASIC_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"You're up to date with the basics.",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your basic information.",type:"error",duration:5e3})}this.savingBasicInfo=!1},async saveLocaleInfo(){this.savingLocaleInfo=!0;const o=y();try{const e={country:`${this.raiser.country}`,location:`${this.raiser.location}`,type:`${this.raiser.type}`},a=await b.updateSectionData(this.raiser.reference,"LOCALE_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your location.",type:"error",duration:5e3})}this.savingLocaleInfo=!1},async saveGoalInfo(){this.savingRaiserInfo=!0;const o=y();try{const e={goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,""),sdgs:[...this.raiser.sdgs]};if(e.goal>1e9)throw new Error("It's tough to say, but your goal is a little too high. Feel free to leave it blank");const a=await b.updateSectionData(this.raiser.reference,"GOAL_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your goals.",type:"error",duration:5e3})}this.savingRaiserInfo=!1},async generateSummary(){if(this.suggestingSummary)return;this.suggestingSummary=!0;const o=y();try{await this.saveStory();const{data:e}=await b.generateSummarySuggestion(this.raiser.reference);this.raiser.summary=e||""}catch(e){o.toast({message:e.message||"We could not suggest a summary.",type:"error",duration:5e3})}this.suggestingSummary=!1},async saveStory(){this.savingStory=!0;const o=y();try{const e={story:`${this.raiser.story}`,summary:`${this.raiser.summary}`},a=await b.updateSectionData(this.raiser.reference,"STORY_INFORMATION",e);this.raiser={...a,...this.raiser},this.suggestingSummary||o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your story.",type:"error",duration:5e3})}this.savingStory=!1},async saveDraft(){this.savingDraft=!0;const o=y();try{const e={...JSON.parse(JSON.stringify(this.raiser)),goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,"")},a=await b.updateSectionData(this.raiser.reference,"AFD",e);o.toast({message:"Your raiser is saved.",type:"success",duration:5e3}),this.$router.push(`/me/raisers/${e.reference}`)}catch(e){o.toast({message:e.message||"There was an error saving your raiser.",type:"error",duration:5e3})}this.savingDraft=!1},async removeTimelineImage(o){const e=y();try{await b.removeTimelineImage(this.raiser.reference,o-1),this.timelineImages=this.timelineImages.filter(a=>a!=this.timelineImages[o-1]),this.showRemoveTimelineImageModal=!1}catch(a){e.toast({message:a.message||"There was an error removing content from your timeline.",type:"error",duration:5e3})}}}},Ee={class:"px-0 container-fluid"},Le={class:"row position-relative"},Fe={class:"col-12 col-md-4 order-md-2"},ze={class:"position-sticky",style:{top:"100px"}},Ve={class:"w-100 rounded-3 mt-4 position-relative bg-success-light text-center align-items-center",style:{height:"400px",cursor:"pointer","aspect-ratio":"16 / 9"}},Pe=["src"],Ge={class:"d-none",type:"file",accept:"image/*",ref:"imageFileUploadInput"},He={class:"row mt-2"},je=["onClick"],Qe=["src"],We={key:0,class:"col-4 mt-4"},Ye={class:"col-12 col-md-8 order-md-1"},Je={class:"card shadow-none border border-light mt-4"},Ke={class:"row"},Xe={class:"col-12"},Ze={key:0,class:"fa fa-check me-1"},$e={key:1,class:"float-end text-secondary"},et={class:"input-group"},tt={class:"row"},st={class:"col-sm-6"},ot={class:"input-group"},rt=["value"],it={class:"col-sm-6"},nt={class:"input-group"},at=["value"],lt={class:"row"},dt={class:"col-md-12 text-end mt-4"},ct={class:"card shadow-none border border-light mt-4"},ut={class:"row"},mt={class:"col-12 mb-md-0"},gt={class:"input-group"},pt={class:"col-md-6"},ht={class:"input-group"},ft={class:"row"},bt={class:"col-md-12 text-end mt-4"},vt={class:"card shadow-none border border-light mt-4"},yt={class:"row"},xt={class:"col-md-8 mb-4 mb-md-0"},wt={class:"col-md-4"},kt={class:"input-group"},St={class:"row"},_t={class:"col-md-12 text-end mt-4"},Ct={class:"card shadow-none border border-light mt-4 mb-4"},It={class:"row"},Dt={class:"col-12"},Rt={class:"form-group mt-0"},Mt={key:0,class:"fa fa-check me-1"},Tt={class:"form-control rounded-3 me-2 p-0 no-scrollbar position-relative w-100 z-index-0 border-light",style:{background:"#fff",height:"400px",overflow:"visible clip","z-index":"30"}},Ot={class:"col-12"},Ut={class:"form-group mt-4"},Bt={key:0,class:"fa fa-check me-1"},Nt={class:"card bg-transparent shadow-xs p-3 rounded-3"},At={class:"mx-1 rounded-3 row backdrop-blur-md blur-light",style:{background:"#ffffffac !important"}},qt={class:"col-lg-12 pb-0 pt-4 text-white px-4",style:{"min-height":"300px"}},Et={class:""},Lt={class:"row"},Ft={class:"mb-3 w-100"},zt={class:"text-gradient text-dark",style:{"font-size":"20px","font-weight":"700"}},Vt={key:0,class:"col-12"},Pt=["src"],Gt=["disabled"],Ht={key:1,class:"col-12"},jt={class:"bg-success-light rounded-3 h-100 border-bottom-end-radius-0"},Qt={class:"form-group no-scrollbar",style:{height:"300px","overflow-y":"scroll"}},Wt={class:"card bg-transparent shadow-xs p-3 rounded-3"},Yt={class:"mx-1 rounded-3 row backdrop-blur-md blur-light",style:{background:"#ffffffac !important"}},Jt={class:"col-lg-12 pb-0 pt-4 text-white px-4",style:{"min-height":"300px"}},Kt={class:""},Xt={class:"row"},Zt={class:"col-12"},$t={class:"position-relative w-100 rounded-3 bg-success-light text-center align-items-center mb-3",style:{height:"300px",cursor:"pointer"}},es=["src"];function ts(o,e,a,v,s,r){const i=x("base-button"),g=x("SDGSelect"),R=x("QuillEditor"),C=x("BaseButton"),B=x("VuePictureCropper"),p=x("modal");return l(),d("div",null,[t("div",Ee,[t("div",Le,[t("div",Fe,[t("div",ze,[t("div",Ve,[t("img",{src:s.raiser.bannerImage||"/img/backgrounds/banner.placeholder.png",style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-100 h-100 position-absolute"},null,8,Pe),s.raiser.bannerImage?h("",!0):(l(),d("span",{key:0,onClick:e[0]||(e[0]=n=>{s.showBannerModal=!0,r.openImageSelectionDialog()}),class:"rounded-3 border bg-light opacity-8 d-inline-block p-3 mt-8 border-white text-lg"},[...e[25]||(e[25]=[c(" Click here to upload a picture. ",-1),t("br",null,null,-1),t("span",{class:"text-sm"}," It will be worth a thousand words.",-1)])])),t("div",{onClick:e[1]||(e[1]=n=>{s.updatingTimeline=!1,s.showBannerModal=!0,r.openImageSelectionDialog()}),class:"position-absolute top-0 end-0 px-3"},[...e[26]||(e[26]=[t("button",{class:"mt-2 btn btn-sm rounded-circle border-0 btn-outline-dark bg-gradient-dark btn-outline-dark bg-gradient-dark text-dark px-0 text-center float-end",style:{width:"35px !important",height:"35px !important"}},[t("i",{class:"fa fa-pen text-white",style:{"font-size":"12px"}})],-1)])]),t("input",Ge,null,512)]),e[29]||(e[29]=t("div",{class:"row mt-5"},[t("div",{class:"col-12"},[t("div",{class:"text-lg"}," Update timeline ")])],-1)),t("div",He,[(l(!0),d(M,null,T(s.timelineImages,(n,L)=>(l(),d("div",{class:"col-4 mt-4",key:L},[t("div",{class:"card border shadow-none position-relative cursor-pointer",style:{height:"100px"},onClick:or=>s.showRemoveTimelineImageModal=L+1},[t("img",{class:"mask rounded-3 opacity-10",style:{"object-fit":"cover"},src:n},null,8,Qe),e[27]||(e[27]=t("div",{class:"pt-4 pb-3 text-center position-relative"},[t("div",{class:"btn bg-transparent"},[t("i",{class:"fa fa-times text-error opacity-7 mx-2"})])],-1))],8,je)]))),128)),s.timelineImages.length<3?(l(),d("div",We,[t("div",{class:"card border shadow-none position-relative cursor-pointer",onClick:e[2]||(e[2]=n=>{s.updatingTimeline=!0,s.showBannerModal=!0,r.openImageSelectionDialog()})},[...e[28]||(e[28]=[t("div",{class:"mask rounded-3 bg-success-light"},null,-1),t("div",{class:"pt-3 pb-2 text-center position-relative"},[t("div",{class:"h1"},[t("i",{class:"fa fa-plus text-secondary"})])],-1)])])])):h("",!0)])])]),t("div",Ye,[t("div",Je,[e[36]||(e[36]=t("div",{class:"card-header pb-0"},[t("h5",null,"Basic Information"),t("p",{class:"text-sm"},"What donors see first")],-1)),t("form",{onSubmit:e[6]||(e[6]=S((...n)=>r.saveBasicInfo&&r.saveBasicInfo(...n),["prevent"])),class:"card-body"},[t("div",Ke,[t("div",Xe,[t("div",null,[e[30]||(e[30]=t("label",{class:"form-label text-lg"},"Title",-1)),s.raiser.title?(l(),d("label",{key:0,class:k(["float-end",`text-${s.raiser.title.length>19&&s.raiser.title.length<101?"success":"secondary"}`])},[t("span",{class:k(`text-${s.raiser.title.length<101&&s.raiser.title.length>19?"success":"secondary"}`)},[s.raiser.title.length>19&&s.raiser.title.length<101?(l(),d("i",Ze)):h("",!0),c(" "+u(s.raiser.title.length||0)+" Character"+u(s.raiser.title.length==1?"":"s")+" | "+u(s.raiser.title.length>19?"Max: 75":"Min: 20"),1)],2)],2)):(l(),d("label",$e," 0 Characters | Min 20 ")),t("div",et,[m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>s.raiser.title=n),class:"form-control form-control-lg text-lg text-lg",type:"text",placeholder:"Title",required:"required"},null,512),[[_,s.raiser.title]])])])])]),t("div",tt,[t("div",st,[e[32]||(e[32]=t("label",{class:"form-label text-lg mt-4"},"Category",-1)),t("div",ot,[m(t("select",{class:"form-control form-control-lg text-lg text-lg","onUpdate:modelValue":e[4]||(e[4]=n=>s.raiser.category=n)},[e[31]||(e[31]=t("option",{disabled:"",selected:""},"Select Category",-1)),(l(!0),d(M,null,T(r.categoryNames,n=>(l(),d("option",{key:n,value:n},u(n),9,rt))),128))],512),[[I,s.raiser.category]])])]),t("div",it,[t("div",null,[e[34]||(e[34]=t("label",{class:"form-label text-lg mt-4"},"Sub Category",-1)),t("div",nt,[m(t("select",{class:"form-control form-control-lg text-lg text-lg","onUpdate:modelValue":e[5]||(e[5]=n=>s.raiser.subCategory=n)},[e[33]||(e[33]=t("option",{disabled:"",selected:""},"Select Sub Category",-1)),(l(!0),d(M,null,T(r.subCategoryNames,n=>(l(),d("option",{key:n,value:n},u(n),9,at))),128))],512),[[I,s.raiser.subCategory]])])])])]),t("div",lt,[t("div",dt,[f(i,{loading:s.savingBasicInfo,type:"secondary",outline:!0,class:"mb-0",nativeType:"submit"},{default:w(()=>[...e[35]||(e[35]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),t("div",ct,[e[42]||(e[42]=t("div",{class:"card-header pb-0"},[t("h5",null,"Locale Information"),t("p",{class:"text-sm"},"Where the cause you are raising for is located, or where you intend to use the support")],-1)),t("form",{onSubmit:e[9]||(e[9]=S((...n)=>r.saveLocaleInfo&&r.saveLocaleInfo(...n),["prevent"])),class:"card-body"},[t("div",ut,[t("div",mt,[e[37]||(e[37]=t("label",{class:"form-label text-lg"},"Location",-1)),t("div",gt,[m(t("input",{class:"form-control form-control-lg text-lg","onUpdate:modelValue":e[7]||(e[7]=n=>s.raiser.location=n),placeholder:"Apartment or House Number, Street, City, State or Province"},null,512),[[_,s.raiser.location]])])]),e[40]||(e[40]=P('<div class="col-md-6"><label class="form-label text-lg mt-4">Country</label><div class="input-group"><select class="form-control form-control-lg text-lg text-lg" disabled=""><option value="Nigeria">Nigeria</option></select></div></div>',1)),t("div",pt,[e[39]||(e[39]=t("label",{class:"form-label text-lg mt-4"},"Mode",-1)),t("div",ht,[m(t("select",{class:"form-control form-control-lg text-lg","onUpdate:modelValue":e[8]||(e[8]=n=>s.raiser.type=n)},[...e[38]||(e[38]=[t("option",{disabled:"",selected:""},"Select Fundraising Mode",-1),t("option",{value:"PERSONAL"},"Personal",-1),t("option",{value:"TEAM"},"Team",-1),t("option",{value:"CORPORATE"},"Corporate",-1)])],512),[[I,s.raiser.type]])])])]),t("div",ft,[t("div",bt,[f(i,{loading:s.savingLocaleInfo,nativeType:"submit",type:"secondary",outline:!0,class:"my-0"},{default:w(()=>[...e[41]||(e[41]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),t("div",vt,[e[48]||(e[48]=t("div",{class:"card-header pb-0"},[t("h5",null,"Goals"),t("p",{class:"text-sm"},"What success means to you")],-1)),t("form",{onSubmit:e[12]||(e[12]=S((...n)=>r.saveGoalInfo&&r.saveGoalInfo(...n),["prevent"])),class:"card-body"},[t("div",yt,[t("div",xt,[e[43]||(e[43]=t("label",{class:"form-label text-lg"},"Sustainable Development Goals (SDGs)",-1)),f(g,{values:s.raiser.sdgs},null,8,["values"])]),t("div",wt,[e[46]||(e[46]=t("label",{class:"form-label text-lg"},"Fundraising Goal",-1)),t("div",kt,[e[44]||(e[44]=t("span",{class:"input-group-text px-3"},[t("i",{class:"fas","aria-hidden":"true"},"₦")],-1)),m(t("input",{class:"form-control form-control-lg text-lg",required:"","onUpdate:modelValue":e[10]||(e[10]=n=>s.raiser.goal=n),onInput:e[11]||(e[11]=n=>s.raiser.goal=r.formatAmount(s.raiser.goal)),placeholder:"Your dream amount"},null,544),[[_,s.raiser.goal]]),e[45]||(e[45]=t("button",{disabled:"",type:"button",class:"px-3 mb-0",style:{"border-radius":"0px 1.83rem 1.83rem 0px",border:"0px",background:"#fff"}},[t("i",{class:"badge bg-gradient-dark text-white text-bold","aria-hidden":"true"},"NGN")],-1))])])]),t("div",St,[t("div",_t,[f(i,{loading:s.savingGoalInfo,nativeType:"submit",type:"secondary",outline:!0,class:"mb-0"},{default:w(()=>[...e[47]||(e[47]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),t("div",Ct,[e[53]||(e[53]=t("div",{class:"card-header pb-0"},[t("h5",null,"Your Story"),t("p",{class:"text-sm"},"Tell donors why you need their support")],-1)),t("form",{onSubmit:e[15]||(e[15]=S((...n)=>r.saveStory&&r.saveStory(...n),["prevent"])),class:"card-body"},[t("div",It,[t("div",Dt,[t("div",Rt,[e[49]||(e[49]=t("label",{class:"text-gradient text-dark text-lg"}," Story ",-1)),t("label",{class:k(["float-end",`text-${r.storyWordCount>99&&r.storyWordCount<1001?"success":"secondary"}`])},[r.storyWordCount>99&&r.storyWordCount<1001?(l(),d("i",Mt)):h("",!0),c(" "+u(r.storyWordCount||0)+" Word"+u(r.storyWordCount==1?"":"s")+" | "+u(r.storyWordCount>99?"Max: 1000":"Min: 100"),1)],2),t("div",Tt,[f(R,{theme:"bubble",contentType:"html",content:s.raiser.story,"onUpdate:content":e[13]||(e[13]=n=>s.raiser.story=n),placeholder:"Hi, my name is Sina and I am fundraising for..."},null,8,["content"])])])]),t("div",Ot,[t("div",Ut,[e[51]||(e[51]=t("label",{class:"text-gradient text-dark"},[t("span",{class:"text-lg"},"Summary"),t("span",{class:"text-sm mx-2"},"(When present, this will replace your story on shared posters)")],-1)),t("label",{class:k(["float-end",`text-${r.summaryCharacterCount>20&&r.summaryCharacterCount<501?"success":"secondary"}`])},[r.summaryCharacterCount>20&&r.summaryCharacterCount<501?(l(),d("i",Bt)):h("",!0),c(" "+u(r.summaryCharacterCount||0)+" Character"+u(r.summaryCharacterCount==1?"":"s")+" | "+u(r.summaryCharacterCount>20?"Max: 500":"Min: 20"),1)],2),m(t("textarea",{class:"form-control text-lg me-2 rounded-3 border-light no-scrollbar position-relative w-100","onUpdate:modelValue":e[14]||(e[14]=n=>s.raiser.summary=n),style:{background:"#fff",height:"150px",overflow:"visible clip","z-index":"30"}},null,512),[[_,s.raiser.summary]]),s.raiser.summarySuggestionCount<=2?(l(),G(C,{key:0,class:"mt-4 mb-0 px-4 btn-sm text-sm",loading:s.suggestingSummary,type:"secondary",outline:!0,size:"sm",onClick:S(r.generateSummary,["prevent"])},{default:w(()=>[...e[50]||(e[50]=[c(" Try Suggestion ",-1)])]),_:1},8,["loading","onClick"])):h("",!0)]),f(C,{class:"float-end mt-2 mb-0",loading:s.savingStory,type:"secondary",outline:!0,nativeType:"submit"},{default:w(()=>[...e[52]||(e[52]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)])])])]),f(p,{show:s.showBannerModal,"onUpdate:show":e[21]||(e[21]=n=>s.showBannerModal=n),"body-classes":"p-0","modal-classes":"modal-lg"},{default:w(()=>[t("div",Nt,[t("button",{onClick:e[16]||(e[16]=n=>r.closeBannerModal()),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 text-primary backdrop-blur-md bg-secondary border-0 px-2 py-1 rounded-3"},[...e[54]||(e[54]=[t("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),t("div",At,[t("div",qt,[t("div",Et,[t("div",Lt,[t("div",Ft,[t("span",zt,u(s.updatingTimeline?"Update Your Fundraiser's Timeline":`Update Your
                                        Fundraiser's Banner`),1)]),s.showImageCropper?h("",!0):(l(),d("div",Vt,[t("div",{onClick:e[18]||(e[18]=(...n)=>r.openImageSelectionDialog&&r.openImageSelectionDialog(...n)),class:"position-relative w-100 rounded-3 bg-success-light text-center align-items-center mb-3",style:{height:"300px",cursor:"pointer"}},[t("img",{src:s.photoUrl||"/img/backgrounds/banner.placeholder.png",style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-100 h-100 position-absolute"},null,8,Pt),e[55]||(e[55]=t("span",{class:"rounded-3 border backdrop-blur-md blur-darker opacity-10 d-inline-block p-3 mt-7 text-white border-white text-lg"},[t("i",{class:"fa fa-2x fa-camera"}),t("br"),c(" Click to update ")],-1)),t("input",{onChange:e[17]||(e[17]=(...n)=>r.openImageCropper&&r.openImageCropper(...n)),class:"d-none",type:"file",accept:"image/*",ref:"imageFileUploadInput"},null,544)]),t("button",{type:"button",onClick:e[19]||(e[19]=n=>s.photoUrl=""),disabled:s.photoUrl==""?!0:void 0,class:"btn btn-outline-secondary bg-white btn-sm float-start position-sticky bottom-0 mx-1 px-2"},[...e[56]||(e[56]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Remove ",-1)])],8,Gt)])),s.showImageCropper?(l(),d("div",Ht,[t("div",jt,[t("div",Qt,[f(B,{boxStyle:{width:"100%",height:"300px",backgroundColor:"#EDF9E8",margin:"0","border-radius":"8px","overflow-y":"clip","overflow-x":"clip"},img:s.picture,options:{viewMode:2,dragMode:"crop",aspectRatio:16/9}},null,8,["img"])]),t("button",{type:"button",onClick:e[20]||(e[20]=n=>{s.photoUrl="",s.showImageCropper=!1}),class:"btn btn-outline-secondary bg-white btn-sm float-start position-sticky bottom-0 mx-3 px-3"},[...e[57]||(e[57]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Cancel ",-1)])]),f(i,{type:"button",onClick:r.cropImage,size:"sm",loading:s.croppingImage,class:"btn btn-outline-secondary bg-white btn-sm float-end position-sticky bottom-0 mx-3 px-3"},{default:w(()=>[...e[58]||(e[58]=[t("svg",{fill:"#7E7E7E",height:"24",width:"24",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330"},[t("path",{id:"XMLID_28_",d:`M315,240h-45V81.213l55.606-55.606c5.858-5.858,5.858-15.355,0-21.213c-5.857-5.858-15.355-5.858-21.213,0
                                                  L248.787,60H90V15c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v45H15C6.716,60,0,66.716,0,75s6.716,15,15,15h45v158.787
                                                  L4.394,304.394c-5.858,5.858-5.858,15.355,0,21.213C7.322,328.536,11.161,330,15,330c3.839,0,7.678-1.464,10.606-4.394L81.213,270
                                                  H240v45c0,8.284,6.716,15,15,15c8.284,0,15-6.716,15-15v-45h45c8.284,0,15-6.716,15-15S323.284,240,315,240z M90,90h128.787
                                                  L90,218.787V90z M240,111.213V240H111.213L240,111.213z`})],-1),c(" Crop ",-1)])]),_:1},8,["onClick","loading"])])])):h("",!0)]),f(C,{class:"float-end btn-success mb-4 mt-3",loading:s.savingImage,disabled:s.photoUrl==s.raiser.bannerImage,onClick:r.saveCroppedImage},{default:w(()=>[...e[59]||(e[59]=[c(" Keep ",-1)])]),_:1},8,["loading","disabled","onClick"])])])])])]),_:1},8,["show"]),f(p,{show:s.showRemoveTimelineImageModal,"onUpdate:show":e[24]||(e[24]=n=>s.showRemoveTimelineImageModal=n),"body-classes":"p-0","modal-classes":"modal-lg"},{default:w(()=>[t("div",Wt,[t("button",{onClick:e[22]||(e[22]=n=>s.showRemoveTimelineImageModal=!1),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 text-primary backdrop-blur-md bg-secondary border-0 px-2 py-1 rounded-3"},[...e[60]||(e[60]=[t("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),t("div",Yt,[t("div",Jt,[t("div",Kt,[t("div",Xt,[e[62]||(e[62]=t("div",{class:"mb-3 w-100"},[t("span",{class:"text-gradient text-dark",style:{"font-size":"20px","font-weight":"700"}}," Clear This Content From Your Fundraiser's Timeline ")],-1)),t("div",Zt,[t("div",$t,[t("img",{src:s.timelineImages[s.showRemoveTimelineImageModal-1],style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-100 h-100 position-absolute"},null,8,es)]),t("button",{type:"button",onClick:e[23]||(e[23]=n=>r.removeTimelineImage(s.showRemoveTimelineImageModal)),class:"btn btn-outline-secondary bg-white btn-sm float-end position-sticky bottom-0 mx-1 px-2"},[...e[61]||(e[61]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Remove ",-1)])])])])])])])])]),_:1},8,["show"])])}const ss=D(qe,[["render",ts]]);const os={name:"modal",components:{BaseButton:E},props:{raiser:{type:String,default:""},raisers:Array,show:Boolean,showClose:{type:Boolean,default:!0},type:{type:String,default:"mini",validator(o){return["","notice","mini"].indexOf(o)!==-1},description:'Modal type (notice|mini|"") '},modalClasses:{type:[Object,String],description:"Modal dialog css classes"},modalContentClasses:{type:[Object,String],description:"Modal dialog content css classes"},gradient:{type:String,description:"Modal gradient type (error, primary etc)"},headerClasses:{type:[Object,String],description:"Modal Header css classes"},bodyClasses:{type:[Object,String],description:"Modal Body css classes"},footerClasses:{type:[Object,String],description:"Modal Footer css classes"},animationDuration:{type:Number,default:500,description:"Modal transition duration"}},data(){return{request:{name:"",email:"",variant:"regular",raiserReference:""},selectedRaiser:{},requestingDonation:!1}},mounted(){this.request.raiserReference=this.raisers[0].reference,this.selectedRaiser=this.raisers[0]},updated(){this.request.raiserReference=this.raisers[0].reference,this.selectedRaiser=this.raisers[0]},methods:{closeModal(){this.$emit("update:show",!1),this.$emit("close")},setRaiser(){this.selectedRaiser=this.raisers.find(o=>o.reference===this.request.raiserReference)},async requestDonation(){const o=y();try{this.requestingDonation=!0;const e={...JSON.parse(JSON.stringify(this.request))},a=await b.sendDonationRequest(e);o.toast({message:"Done",type:"success",duration:5e3}),this.closeModal()}catch(e){o.toast({message:e.message||"There was an error saving your feedback.",type:"error",duration:5e3})}this.requestingDonation=!1}},watch:{show(o){let e=document.body.classList;o?e.add("modal-open"):e.remove("modal-open")}}},rs=["aria-hidden"],is={class:"modal-dialog modal-dialog-centered"},ns={class:"card bg-transparent shadow-xs p-3 modal-fade-in rounded-3 mx-1"},as={class:"mx-1 rounded-3 row",style:{overflow:"hidden"}},ls={class:"col-lg-6 pb-0 pt-4 text-white px-4 bg-white/80",style:{"min-height":"300px"}},ds={class:"px-2"},cs={class:"form-group mb-2 pb-1 mt-4"},us={class:"form-group mb-2 pb-1 mt-4"},ms={class:"form-group mb-2 pb-1 mt-4"},gs={class:"form-group mb-2 pb-1 mt-4 opacity-0",style:{"pointer-events":"none"}},ps=["value"],hs={class:"col-lg-6 mt-4 mt-lg-0 pb-0 pt-4 text-white px-4 backdrop-blur-md blur-darker no-scrollbar",style:{"overflow-x":"clip","overflow-y":"scroll","min-height":"300px"}},fs={class:"px-3 unclickable"},bs={class:"text-white mb-2"},vs=["src"],ys={class:"pt-2 text-white pb-4 pb-lg-2"};function xs(o,e,a,v,s,r){const i=x("BaseButton");return m((l(),d("div",{class:k(["modal backdrop-blur-md fade modal-lg",[{"show d-block":a.show},{"d-none":!a.show},{"modal-mini":a.type==="mini"}]]),onClick:e[6]||(e[6]=S((...g)=>r.closeModal&&r.closeModal(...g),["self"])),tabindex:"-1",role:"dialog","aria-hidden":!a.show},[t("div",is,[t("div",{class:k(["modal-content",[a.gradient?`bg-gradient-${a.gradient}`:"",a.modalContentClasses]])},[t("div",{class:k(["modal-body",a.bodyClasses])},[t("div",ns,[t("button",{onClick:e[0]||(e[0]=g=>r.closeModal()),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 backdrop-blur-md bg-secondary rounded-3 px-2 py-1"},[...e[7]||(e[7]=[t("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),t("div",as,[t("div",ls,[t("form",{class:"form-section active",onSubmit:e[5]||(e[5]=S(g=>r.requestDonation(),["prevent"]))},[t("div",ds,[t("div",cs,[e[8]||(e[8]=t("label",{class:"text-dark text-sm mb-1"},[c(" Name or Alias "),t("span",{class:"text-success"},"*")],-1)),m(t("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=g=>s.request.name=g),class:"form-control",placeholder:"Mr/Mrs Kind Giver"},null,512),[[_,s.request.name]])]),t("div",us,[e[9]||(e[9]=t("label",{class:"text-dark text-sm mb-1"},[c(" Email "),t("span",{class:"text-success"},"*")],-1)),m(t("input",{required:"",type:"email","onUpdate:modelValue":e[2]||(e[2]=g=>s.request.email=g),class:"form-control",placeholder:"kind.donor@mail.com"},null,512),[[_,s.request.email]])]),t("div",ms,[e[11]||(e[11]=t("label",{class:"text-dark text-sm mb-1"}," Type Of Request ",-1)),m(t("select",{required:"","onUpdate:modelValue":e[3]||(e[3]=g=>s.request.variant=g),class:"form-control"},[...e[10]||(e[10]=[t("option",{value:"regular"}," Community",-1),t("option",{value:"corporate"},"Corporate",-1)])],512),[[I,s.request.variant]])]),t("div",gs,[e[12]||(e[12]=t("label",{class:"text-dark text-sm mb-1"},[c(" Raiser "),t("span",{class:"text-success"},"*")],-1)),m(t("select",{required:"","onUpdate:modelValue":e[4]||(e[4]=g=>s.request.raiserReference=g),class:"form-control"},[(l(!0),d(M,null,T(a.raisers,g=>(l(),d("option",{key:g.reference,value:g.reference},u(g.title),9,ps))),128))],512),[[I,s.request.raiserReference]])]),f(i,{class:"float-end btn-success mb-5 mt-5",loading:s.requestingDonation,nativeType:"submit"},{default:w(()=>[...e[13]||(e[13]=[c(" Request ",-1)])]),_:1},8,["loading"])])],32)]),t("div",hs,[t("div",null,[e[17]||(e[17]=t("h6",{class:"text-end w-100 text-white text-xs"},"Preview",-1)),t("div",fs,[t("h4",bs,"Hello, "+u(s.request.name.trim()||"Kind Giver"),1),e[16]||(e[16]=t("p",{class:"text-white w-80"}," Please support my fundraising campaign... ",-1)),t("img",{src:`/img/flyers/${s.request.variant}.png`,alt:".",style:{width:"80%","object-fit":"contain"}},null,8,vs),t("div",ys,[e[14]||(e[14]=c(" Sincerely, ",-1)),e[15]||(e[15]=t("br",null,null,-1)),t("span",null,u(s.selectedRaiser.organizerName),1)])])])])])])],2)],2)])],10,rs)),[[O,a.show]])}const ws=D(os,[["render",xs],["__scopeId","data-v-a9177b48"]]);const ks={name:"OfflineDonation",props:{show:{type:Boolean,default:!1},raiser:{type:Object,required:!0}},data(){return{loading:!1,form:{name:"",email:"",amount:"",currency:"NGN",paymentProvider:"CASH"}}},methods:{closeModal(){this.$emit("update:show",!1),this.resetForm()},resetForm(){this.form={name:"",email:"",amount:"",currency:"NGN",paymentProvider:"CASH"}},async submitOfflineDonation(){this.loading=!0;const o=y();try{const e={...this.form,amount:this.form.amount.toString()};await b.addOfflineDonation(this.raiser.reference,e),o.toast({message:"Offline donation recorded successfully",type:"success",duration:5e3}),this.$emit("success"),this.closeModal()}catch(e){o.toast({message:e.message||"Failed to record donation",type:"error",duration:5e3})}finally{this.loading=!1}}}},Ss=["aria-hidden"],_s={class:"modal-dialog modal-dialog-centered"},Cs={class:"modal-content bg-white/90 rounded-3"},Is={class:"modal-header"},Ds={class:"modal-body"},Rs={class:"mb-3"},Ms={class:"mb-3"},Ts={class:"mb-3"},Os={class:"input-group"},Us={class:"input-group-text"},Bs={class:"mb-3"},Ns={class:"mb-3"},As={class:"d-flex justify-content-end"},qs=["disabled"],Es={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"};function Ls(o,e,a,v,s,r){return m((l(),d("div",{class:k(["modal fade",[{"show d-block":a.show},{"d-none":!a.show}]]),onClick:e[8]||(e[8]=S((...i)=>r.closeModal&&r.closeModal(...i),["self"])),tabindex:"-1",role:"dialog","aria-hidden":!a.show},[t("div",_s,[t("div",Cs,[t("div",Is,[e[9]||(e[9]=t("h5",{class:"modal-title"},"Record Offline Donation",-1)),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...i)=>r.closeModal&&r.closeModal(...i)),"aria-label":"Close"})]),t("div",Ds,[t("form",{onSubmit:e[7]||(e[7]=S((...i)=>r.submitOfflineDonation&&r.submitOfflineDonation(...i),["prevent"]))},[t("div",Rs,[e[10]||(e[10]=t("label",{class:"form-label"},[c("Donor Name "),t("span",{class:"text-danger"},"*")],-1)),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=i=>s.form.name=i),required:"",placeholder:"e.g. John Doe"},null,512),[[_,s.form.name]])]),t("div",Ms,[e[11]||(e[11]=t("label",{class:"form-label"},"Email (Optional)",-1)),m(t("input",{type:"email",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=i=>s.form.email=i),placeholder:"donor@example.com"},null,512),[[_,s.form.email]])]),t("div",Ts,[e[12]||(e[12]=t("label",{class:"form-label"},[c("Amount "),t("span",{class:"text-danger"},"*")],-1)),t("div",Os,[t("span",Us,u(s.form.currency),1),m(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=i=>s.form.amount=i),required:"",min:"1",step:"0.01"},null,512),[[_,s.form.amount]])])]),t("div",Bs,[e[14]||(e[14]=t("label",{class:"form-label"},[c("Currency "),t("span",{class:"text-danger"},"*")],-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=i=>s.form.currency=i),required:""},[...e[13]||(e[13]=[t("option",{value:"NGN"},"NGN",-1),t("option",{value:"USD"},"USD",-1),t("option",{value:"GBP"},"GBP",-1),t("option",{value:"EUR"},"EUR",-1)])],512),[[I,s.form.currency]])]),t("div",Ns,[e[16]||(e[16]=t("label",{class:"form-label"},[c("Payment Method "),t("span",{class:"text-danger"},"*")],-1)),m(t("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=i=>s.form.paymentProvider=i),required:""},[...e[15]||(e[15]=[P('<option value="CASH" data-v-41ebf81a>Cash</option><option value="TRANSFER" data-v-41ebf81a>Bank Transfer</option><option value="POS" data-v-41ebf81a>POS Terminal</option><option value="CHEQUE" data-v-41ebf81a>Cheque</option><option value="OTHER" data-v-41ebf81a>Other</option>',5)])],512),[[I,s.form.paymentProvider]])]),t("div",As,[t("button",{type:"button",class:"btn btn-secondary me-2",onClick:e[6]||(e[6]=(...i)=>r.closeModal&&r.closeModal(...i))},"Cancel"),t("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},[s.loading?(l(),d("span",Es)):h("",!0),e[17]||(e[17]=c(" Record Donation ",-1))],8,qs)])],32)])])])],10,Ss)),[[O,a.show]])}const Fs=D(ks,[["render",Ls],["__scopeId","data-v-41ebf81a"]]);const zs={components:{BaseButton:E,Fire:Y,Modal:z,DonationsTable:K,RequestDonation:ws,OfflineDonation:Fs},data(){return{currentStep:0,loading:{raiser:!0,transfers:!0},showRequestModal:!1,showOfflineModal:!1,raiser:{},user:{},searchQuery:"",debouncedSearchQuery:"",searchTimeout:null,columns:[{label:"Giver",key:"name",formatter:o=>o||"Anonymous"},{label:"Amount",key:"amount",formatter:o=>`₦${q(o)}`},{label:"Date",key:"date"},{label:"Fundraiser",key:"raiserTitle",sort:!1}],donations:[],donationCount:0,sdgs:N.get("sdgs"),sdgColors:N.get("sdgColors"),selectedDonation:{},showDonationModal:!1}},created(){const o=J();this.user=o.$state,this.fetchRaiser()},watch:{searchQuery(o){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.debouncedSearchQuery=o},500)}},methods:{formatAmount:q,async loadRaiserDetails(){const o=await b.getRaiserByReference(this.raiser.reference);this.raiser=o},async fetchRaiser(){this.loading.raiser=!0;try{const{reference:o}=this.$route.params;if(!o){this.$router.push("/me/raisers");return}this.raiser.reference=o}catch{this.errorLoadingRaiser=!0}await this.loadRaiserDetails(),this.loading.raiser=!1},async searchDonations(o){const{sort:e,direction:a,page:v=0,size:s=50,search:r}=o||{};try{const i={reference:this.raiser.reference,page:v,size:s,sort:e,direction:a,search:r};return await b.getMyFundRaiserDonations(i)}catch(i){y().toast({message:i.message||"Your donation information could not be loaded<br>Please reload the page",type:"error",duration:5e3})}},viewDonation(o){this.selectedDonation=o,this.showDonationModal=!0},async downloadReceipt(o){A.downloadCreatorReceipt(o)},async handleOfflineDonationSuccess(){await this.loadRaiserDetails(),this.searchDonations()}}},Vs={class:""},Ps={class:"container-fluid py-4"},Gs={class:"row position-relative"},Hs={class:"col-lg-4 order-lg-2 px-4"},js={class:"position-sticky min-vh-25 no-scrollbar",style:{top:"100px"}},Qs={class:"card shadow-none h-100 mt-4 mt-lg-0 border border-light",style:{}},Ws={class:"card-header p-3 pb-0"},Ys={class:"row"},Js={class:"col-6 d-flex"},Ks={class:"btn badge bg-primary text-white"},Xs={class:"col-6"},Zs={class:"card-body p-3 py-3"},$s={class:"d-flex rounded-3 p-3 position-relative ps-1"},eo={class:"my-auto text-dark z-index-3 ps-2"},to={class:"col-lg-8 border border-light rounded-3"},so={class:"page-header min-vh-25 bg-success-light overflow-none mb-4",style:{"border-radius":"0 0 0.5rem 0.5rem"}},oo={class:"container"},ro={class:"row"},io={class:"col-11 text-start mx-auto mb-0 py-5"},no={class:"row w-100 w-sm-80 w-md-70"},ao={class:"col-12 col-sm-9"},lo={class:"input-group"},co=["onClick"],uo=["onClick"],mo={key:0},go={class:"card bg-white/95 p-3 modal-fade-in shadow-xs rounded-3"},po={class:"card-body position-relative mx-1 rounded-3 row backdrop-blur-md border border-light mb-0 rounded-3"},ho={class:"col-lg-12 py-5 text-dark px-2 px-sm-5 text-start position-relative no-scrollbar",style:{overflow:"hidden","overflow-y":"scroll",height:"400px"}},fo={class:"mx-3 mx-md-0"},bo={class:"row"},vo={class:"col-3 position-relative mt-2",style:{scale:"0.2"}},yo={class:"w-100 position-absolute ms-n8 pt-10"},xo={class:"row mb-3 pt-3"},wo={class:"col-12 mb-3"},ko={class:"col-12 mb-3"},So={class:"col-12 mb-3"},_o={class:"col-12 mb-3"},Co={class:"col-12 mb-3"},Io={class:"col-12 mb-3"},Do={class:"badge badge text-success border border-0 border-success bg-success-light px-3"},Ro={class:"col-12 mb-4"},Mo={class:"card-footer mt-0 text-center px-3 row"},To={class:"backdrop-blur-md px-4 py-3 col-12 rounded-3"},Oo={class:"row"},Uo={class:"col-12 text-end"};function Bo(o,e,a,v,s,r){const i=x("DonationsTable"),g=x("Fire"),R=x("Modal"),C=x("RequestDonation"),B=x("OfflineDonation");return l(),d("div",null,[t("section",Vs,[t("div",Ps,[t("div",Gs,[t("div",Hs,[t("div",js,[t("div",Qs,[t("div",Ws,[t("div",Ys,[t("div",Js,[t("span",Ks,u(s.raiser.donationCount)+" Contributions ",1)]),t("div",Xs,[t("span",{onClick:e[0]||(e[0]=p=>s.showOfflineModal=!0),class:"btn badge bg-secondary ms-auto text-white float-end"}," + Offline ")])])]),t("div",Zs,[e[11]||(e[11]=t("h5",null,"Received Donations",-1)),e[12]||(e[12]=t("p",{class:"text-sm"},"This is the total of donations you received.",-1)),t("div",$s,[e[10]||(e[10]=t("div",{class:"mask opacity-10 z-index-0 rounded-3 bg-gray-100 border border-success"},null,-1)),t("h4",eo,[e[9]||(e[9]=t("span",{class:"text-sm me-1"},"₦",-1)),c(" "+u(r.formatAmount(s.raiser.raisedAmount)),1)]),t("a",{onClick:e[1]||(e[1]=p=>s.showRequestModal=!0),class:"btn btn-success mb-0 ms-auto z-index-3"},"Request")])])])])]),t("div",to,[t("div",so,[e[15]||(e[15]=t("div",{class:"mask",style:{"background-image":"url('/img/shapes/waves-green.png')",filter:"blur(4px)",opacity:"0.05 !important"}},null,-1)),t("div",oo,[t("div",ro,[t("div",io,[e[14]||(e[14]=t("h3",{class:"text-dark text-gradient mb-3"}," Search Donations ",-1)),t("form",no,[t("div",ao,[t("div",lo,[e[13]||(e[13]=t("span",{class:"input-group-text"},[t("i",{class:"text-dark px-2 fa fa-search"})],-1)),m(t("input",{required:"",type:"text",class:"form-control text-secondary","onUpdate:modelValue":e[2]||(e[2]=p=>s.searchQuery=p),placeholder:"Search giver's name or amount"},null,512),[[_,s.searchQuery]])])])])])])])]),f(i,{hasActions:!1,loadAsync:!0,selectedRow:s.selectedDonation,"onUpdate:selectedRow":[e[3]||(e[3]=p=>s.selectedDonation=p),r.viewDonation],apiUrl:"/me/donations",fetchData:r.searchDonations,filterQuery:s.debouncedSearchQuery,columns:s.columns},{actions:w(({row:p})=>[t("button",{class:"btn btn-outline-success border-light btn-sm rounded-2 text-sm px-2 me-3",onClick:S(n=>r.viewDonation(p),["stop"])}," View ",8,co),t("button",{class:"btn btn-white text-success btn-sm px-1 rounded-1 border border-light border-success text-center",title:"Print Receipt",onClick:S(n=>r.downloadReceipt(p.reference),["stop"])},[...e[16]||(e[16]=[t("i",{class:"fa fa-receipt",style:{"font-size":"16px"}},null,-1)])],8,uo)]),_:1},8,["selectedRow","fetchData","filterQuery","columns","onUpdate:selectedRow"])])])])]),(l(),d("div",mo,[f(R,{show:s.showDonationModal,"onUpdate:show":e[6]||(e[6]=p=>s.showDonationModal=p),"body-classes":"p-0","modal-classes":"modal-lg position-relative"},{default:w(()=>[t("div",go,[t("button",{onClick:e[4]||(e[4]=p=>s.showDonationModal=!1),class:"position-absolute end-0 me-4 mt-1 btn btn-sm backdrop-blur-md bg-secondary rounded-3 rounded-3 px-2 py-1",style:{"z-index":"1000000"}},[...e[17]||(e[17]=[t("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),t("div",po,[t("div",ho,[t("div",fo,[t("div",bo,[e[18]||(e[18]=t("div",{class:"col-9"},[t("h4",{class:"text-start text-dark pb-2"},"Contribution Summary")],-1)),t("div",vo,[t("div",yo,[f(g)])])]),e[29]||(e[29]=t("hr",{class:"horizontal dark"},null,-1)),t("div",xo,[t("div",wo,[e[19]||(e[19]=t("strong",null," To: ",-1)),c(" "+u(s.selectedDonation.raiserTitle),1)]),t("div",ko,[e[20]||(e[20]=t("strong",null,"Giver:",-1)),c(" "+u(s.selectedDonation.name),1)]),t("div",So,[e[21]||(e[21]=t("strong",null,"Beneficiary:",-1)),c(" "+u(s.selectedDonation.raiserOrganizerName),1)]),t("div",_o,[e[22]||(e[22]=t("strong",null,"Date:",-1)),c(" "+u(s.selectedDonation.formattedDate),1)]),t("div",Co,[e[23]||(e[23]=t("strong",null,"Amount:",-1)),c(" ₦"+u(r.formatAmount(s.selectedDonation.amount)),1)]),t("div",Io,[e[25]||(e[25]=t("strong",{class:"me-2"},"Category:",-1)),t("span",Do,[c(u(s.selectedDonation.raiserCategory)+" ",1),e[24]||(e[24]=t("i",{class:"fa fa-arrow-right text-dark mx-2"},null,-1)),c(" "+u(s.selectedDonation.raiserSubCategory),1)])]),t("div",Ro,[e[26]||(e[26]=t("strong",{class:"me-2"},[t("u",null,"Supported Goals")],-1)),e[27]||(e[27]=t("br",null,null,-1)),(l(!0),d(M,null,T(s.selectedDonation.sdgs,(p,n)=>(l(),d("span",{key:n,class:"badge me-1 mb-1",style:V({backgroundColor:"#"+s.sdgColors[p-1]})},u(s.sdgs[p-1]),5))),128))]),e[28]||(e[28]=t("div",{class:"mb-8"},null,-1))]),e[30]||(e[30]=t("hr",null,null,-1))])])]),t("div",Mo,[t("div",To,[t("div",Oo,[t("div",Uo,[t("button",{onClick:e[5]||(e[5]=p=>r.downloadReceipt(s.selectedDonation.reference)),class:"btn btn-outline-success backdrop-blur-md mb-0"}," Print Receipt ")])])])])])]),_:1},8,["show"])])),f(C,{show:s.showRequestModal,"onUpdate:show":e[7]||(e[7]=p=>s.showRequestModal=p),"body-classes":"p-0","modal-classes":"modal",raisers:[s.raiser]},null,8,["show","raisers"]),s.raiser.reference?(l(),G(B,{key:1,show:s.showOfflineModal,"onUpdate:show":e[8]||(e[8]=p=>s.showOfflineModal=p),raiser:s.raiser,onSuccess:r.handleOfflineDonationSuccess},null,8,["show","raiser","onSuccess"])):h("",!0)])}const No=D(zs,[["render",Bo],["__scopeId","data-v-94e8a969"]]);const Ao={components:{Edit:ss,ContributionHistory:No,ShareSettings:Ae},data(){return{currentTab:"Overview",errorLoadingRaiser:!1,loading:!0,raiser:{}}},async mounted(){switch(this.fetchRaiser(),this.$route.hash){case"#general-settings":this.currentTab="General Settings";break;case"#payment-settings":this.currentTab="Payment Settings";break;case"#sharing-settings":this.currentTab="Sharing Settings";break;case"#contributions":this.currentTab="Contribution History";break;default:this.currentTab="Contribution History"}},methods:{async fetchRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/me/raisers";return}this.raiser=await b.getRaiserByReference(o)}catch{this.errorLoadingRaiser=!0}this.loading=!1}}},qo={class:"container-fluid"},Eo={class:"row mb-3"},Lo={class:"col-sm-12 order-sm-0 text-start pt-0"},Fo={class:"lead",style:{"font-size":"30px"}},zo={class:"strong text-dark mb-0"},Vo={class:"text-lg p-0 mb-3"},Po={key:0,class:"text-primary text-gradient mx-2"},Go={key:1,class:"text-dark fa fa-edit mx-2"},Ho={key:2,class:"text-secondary fa fa-folder mx-2"},jo=["href"],Qo={class:"row mb-5"},Wo={class:"col-lg-4 col-sm-8 z-index-0"},Yo={class:"nav-wrapper position-relative end-0 border border-light rounded-2"},Jo={class:"nav nav-pills nav-fill p-1"},Ko={class:"nav-item"},Xo={class:"nav-item",role:"presentation"},Zo={class:"nav-item"},$o={class:"row form-section active"},er={class:"row form-section active"},tr={class:"row form-section active"};function sr(o,e,a,v,s,r){const i=x("Edit"),g=x("ContributionHistory"),R=x("ShareSettings");return l(),d("div",null,[t("div",qo,[t("div",Eo,[t("div",Lo,[t("h1",Fo,[t("span",zo,u(s.currentTab),1)]),t("p",Vo,[s.raiser.status=="PUBLISHED"?(l(),d("span",Po,"🍀")):h("",!0),s.raiser.status=="DRAFT"?(l(),d("i",Go)):h("",!0),s.raiser.status=="ARCHIVED"?(l(),d("i",Ho)):h("",!0),c(" "+u(s.raiser.title)+" ",1),t("a",{class:"text-xs text-success mx-2",target:"_blank",href:`/raisers/${s.raiser.urlPath}`},[...e[3]||(e[3]=[c(" Preview ",-1),t("i",{class:"fa fa-arrow-right mx-1 text-xs",style:{rotate:"-45deg"}},null,-1)])],8,jo)])])]),t("div",Qo,[t("div",Wo,[t("div",Yo,[t("ul",Jo,[t("li",Ko,[t("a",{href:"#contributions",class:k(["nav-link mb-0 px-0 py-1 cursor-pointer",s.currentTab=="Contribution History"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[0]||(e[0]=C=>s.currentTab="Contribution History")}," Contributions ",2)]),t("li",Xo,[t("a",{href:"#general-settings",class:k(["nav-link mb-0 px-0 py-1 cursor-pointer",s.currentTab=="General Settings"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[1]||(e[1]=C=>s.currentTab="General Settings")}," Edit ",2)]),t("li",Zo,[t("a",{href:"#sharing-settings",class:k(["nav-link mb-0 px-0 py-1 cursor-pointer",s.currentTab=="Sharing Settings"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[2]||(e[2]=C=>s.currentTab="Sharing Settings")}," Sharing ",2)])])])])]),m(t("div",$o,[f(i)],512),[[O,s.currentTab=="General Settings"]]),m(t("div",er,[f(g)],512),[[O,s.currentTab=="Contribution History"]]),m(t("div",tr,[f(R)],512),[[O,s.currentTab=="Sharing Settings"]])])])}const vr=D(Ao,[["render",sr],["__scopeId","data-v-32b3c47a"]]);export{vr as default};
