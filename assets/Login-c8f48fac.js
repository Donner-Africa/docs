import{B as y}from"./BaseButton-693bb1ef.js";import{l as _,U as h,A as p,S as v,p as x,r as b,a as C,f as L,b as e,m as w,s as g,v as m,x as k,d as u,w as f,e as c,z as S}from"./index-a1754a89.js";import"./NavigationStore-6c8450f5.js";import{_ as B}from"./logo-f32e4fd3.js";const I={components:{BaseButton:y},data(){return{loading:!1,loginModel:{email:"",password:"",rememberDevice:!1}}},async mounted(){const n=await h.get("isLoggedIn"),t=await h.get("user");if(n&&t.name)return this.$router.push("/");n||t.name?await p.logout():(document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",this.activateGoogleSignIn())},computed:{formDisabled(){return this.loading||void 0}},methods:{async handleCredentialResponse(n){var d,s,o;this.loading=!0,typeof((d=this.$Progress)==null?void 0:d.start)=="function"&&this.$Progress.start();let t=null;try{const i=await fetch("https://ipapi.co/json/");if(i.ok){const a=await i.json();t=`${a.city}, ${a.region}, ${a.country}`}}catch{}const l={provider:"google",accessToken:n.credential,location:t};try{const{data:i}=await p.createSession(l);if(((s=i.verification)==null?void 0:s.status)!=="VERIFIED"){await v.IndexedDB.set("DonnerDB","UserStore","verification",i.verification),this.$router.push({name:"Verification"});return}const a=i.prompts||{};a.phone?this.$router.push({name:"CollectPhone"}):a.passcode?this.$router.push({name:"CreatePasscode"}):this.$router.push("/")}catch(i){x().toast({message:i.message||"Google sign-in failed",type:"error",duration:5e3})}this.loading=!1,typeof((o=this.$Progress)==null?void 0:o.finish)=="function"&&this.$Progress.finish()},redirectToGoogleOAuth(){const n={}.VITE_ACCOUNTS_BASE_URL||window.location.origin,t="118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",l=encodeURIComponent(n+"/account/google"),d=encodeURIComponent("openid email profile"),s=Math.random().toString(36).substring(2)+Date.now().toString(36),o=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${t}&redirect_uri=${l}&response_type=id_token&scope=${d}&nonce=${s}`;window.location.href=o},activateGoogleSignIn(){document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",!(!window.google||!window.google.accounts)&&(window.google.accounts.id.initialize({client_id:"118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",callback:this.handleCredentialResponse,use_fedcm_for_prompt:!0}),window.google.accounts.id.prompt())},activateLinkedInSignIn(){window.location.href="https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=77kg1tkj4odek6&redirect_uri=https://donner.africa/account/linkedin&scope=openid%20profile%20email%20w_member_social"},async login(){try{this.loading=!0,this.$Progress.start();const n={...this.loginModel},t=await p.createSession(n),{data:l}=t;l.verification&&await v.IndexedDB.set("DonnerDB","UserStore","verification",l.verification),this.$router.push({name:"Verification"})}catch(n){x().toast({...n.getToast(),type:"error",duration:5e3})}this.loading=!1,this.$Progress.finish()}}},M={class:"page-header min-vh-100 align-items-start p-3 bg-success",style:{}},U={class:"container px-sm-auto px-3 rounded-3"},D={class:"row"},T={class:"col-lg-5 col-md-8 mx-md-auto mx-0 my-3 my-sm-5 px-0 px-sm-auto py-sm-5"},P={class:"card shadow-none rounded-3 min-vh-100 min-vh-sm-80 bg-white",style:{}},V={class:"card-body px-lg-5 py-lg-5 text-start"},R={class:"px-md-4 ps-2 pe-4 row"},A={class:"form-group mt-2"},E={class:"input-group"},G=["disabled"],$={class:"form-group mt-2"},N={class:"input-group"},z=["disabled"],O={class:"form-group mt-2 mx-2"},j={class:"form-check form-switch"},F=["disabled"],q={class:"form-group"},J={class:"text-lg text-bold text-dark"},W={class:"col-12 my-2"},H={class:"row"},K={class:"col-md-6 h-100"},Q={class:"col-md-6 h-100"};function X(n,t,l,d,s,o){const i=b("RouterLink"),a=b("BaseButton");return C(),L("div",null,[e("section",null,[e("div",M,[t[20]||(t[20]=e("div",{class:"mask opacity-10",style:{"background-image":"url('/img/shapes/waves-white.svg')",filter:"blur(6px)"}},null,-1)),e("div",U,[e("div",D,[e("div",T,[e("div",P,[e("div",V,[t[19]||(t[19]=w('<div class="success mb-0"><a href="/" class="icon icon-shape icon-xl rounded-circle bg-white text-center p-3 mx-auto"><img src="'+B+'" class="mt-md-3 mb-n4" style="height:30px;"></a></div><h2 class="px-3 text mb-0">Welcome Back</h2><p class="px-3 text-dark text-sm mb-4"> Enter your email and password to sign in </p>',3)),e("form",{class:"form-section active",onSubmit:t[5]||(t[5]=g((...r)=>o.login&&o.login(...r),["prevent"]))},[e("div",R,[e("div",A,[t[7]||(t[7]=e("label",{class:"text-gradient text-dark text-sm"}," Email ",-1)),e("div",E,[t[6]||(t[6]=e("span",{class:"input-group-text px-3"},[e("i",{class:"fas fa-leaf","aria-hidden":"true"})],-1)),m(e("input",{class:"form-control form-control-lg text-lg ps-1",required:"",type:"email",placeholder:"email@email.com","onUpdate:modelValue":t[0]||(t[0]=r=>s.loginModel.email=r),disabled:o.formDisabled},null,8,G),[[k,s.loginModel.email]])])]),e("div",$,[t[10]||(t[10]=e("label",{class:"text-gradient text-dark text-sm"}," Password ",-1)),e("div",N,[t[8]||(t[8]=e("span",{class:"input-group-text px-3"},[e("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),m(e("input",{class:"form-control form-control-lg text-lg ps-1",required:"",type:"password",placeholder:"* * * * * * * *","onUpdate:modelValue":t[1]||(t[1]=r=>s.loginModel.password=r),disabled:o.formDisabled},null,8,z),[[k,s.loginModel.password]])]),u(i,{to:"/account/password-reset",class:"mb-4 text-bold text-xs text-success"},{default:f(()=>[...t[9]||(t[9]=[c(" Reset Password ",-1),e("i",{class:"fa fa-arrow-right",style:{rotate:"-45deg"}},null,-1)])]),_:1})]),e("div",O,[e("div",j,[m(e("input",{class:"form-check-input",type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[2]||(t[2]=r=>s.loginModel.rememberDevice=r),disabled:o.formDisabled},null,8,F),[[S,s.loginModel.rememberDevice]]),t[11]||(t[11]=e("label",{class:"form-check-label",for:"rememberMe"}," Stay logged in on this device ",-1))])]),e("div",q,[u(a,{class:"btn btn-success float-end mb-2",loading:s.loading,nativeType:"submit"},{default:f(()=>[...t[12]||(t[12]=[c(" Login ",-1)])]),_:1},8,["loading"])]),e("span",J,[t[14]||(t[14]=c(" Don't have an account? ",-1)),u(i,{to:"/account/sign-up",class:"text-success text-bold"},{default:f(()=>[...t[13]||(t[13]=[c(" Sign Up ",-1)])]),_:1})]),t[17]||(t[17]=e("hr",{style:{margin:"1.6rem 0","background-color":"#ccc"}},null,-1)),t[18]||(t[18]=e("span",{class:"text-xs text-bold text-dark text-center w-100 mb-3"},"or",-1)),e("div",W,[e("div",H,[e("div",K,[e("a",{class:"btn btn-white w-100 h-100 border border-light bg-[#fff]",onClick:t[3]||(t[3]=g((...r)=>o.activateLinkedInSignIn&&o.activateLinkedInSignIn(...r),["prevent"]))},[...t[15]||(t[15]=[e("span",{class:"me-2 text-secondary"}," LinkedIn ",-1),e("i",{class:"fab fa-linkedin text-info lead"},null,-1)])])]),e("div",Q,[e("a",{class:"btn btn-white text-secondary w-100 h-100 border border-light bg-[#fff]",onClick:t[4]||(t[4]=g((...r)=>o.redirectToGoogleOAuth&&o.redirectToGoogleOAuth(...r),["prevent"]))},[...t[16]||(t[16]=[w('<span class="me-2"> Google </span><svg width="24px" height="32px" viewBox="0 0 64 64" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(3.000000, 2.000000)" fill-rule="nonzero"><path d="M57.8123233,30.1515267 C57.8123233,27.7263183 57.6155321,25.9565533 57.1896408,24.1212666 L29.4960833,24.1212666 L29.4960833,35.0674653 L45.7515771,35.0674653 C45.4239683,37.7877475 43.6542033,41.8844383 39.7213169,44.6372555 L39.6661883,45.0037254 L48.4223791,51.7870338 L49.0290201,51.8475849 C54.6004021,46.7020943 57.8123233,39.1313952 57.8123233,30.1515267" fill="#4285F4"></path><path d="M29.4960833,58.9921667 C37.4599129,58.9921667 44.1456164,56.3701671 49.0290201,51.8475849 L39.7213169,44.6372555 C37.2305867,46.3742596 33.887622,47.5868638 29.4960833,47.5868638 C21.6960582,47.5868638 15.0758763,42.4415991 12.7159637,35.3297782 L12.3700541,35.3591501 L3.26524241,42.4054492 L3.14617358,42.736447 C7.9965904,52.3717589 17.959737,58.9921667 29.4960833,58.9921667" fill="#34A853"></path><path d="M12.7159637,35.3297782 C12.0932812,33.4944915 11.7329116,31.5279353 11.7329116,29.4960833 C11.7329116,27.4640054 12.0932812,25.4976752 12.6832029,23.6623884 L12.6667095,23.2715173 L3.44779955,16.1120237 L3.14617358,16.2554937 C1.14708246,20.2539019 0,24.7439491 0,29.4960833 C0,34.2482175 1.14708246,38.7380388 3.14617358,42.736447 L12.7159637,35.3297782" fill="#FBBC05"></path><path d="M29.4960833,11.4050769 C35.0347044,11.4050769 38.7707997,13.7975244 40.9011602,15.7968415 L49.2255853,7.66898166 C44.1130815,2.91684746 37.4599129,0 29.4960833,0 C17.959737,0 7.9965904,6.62018183 3.14617358,16.2554937 L12.6832029,23.6623884 C15.0758763,16.5505675 21.6960582,11.4050769 29.4960833,11.4050769" fill="#EB4335"></path></g></g></svg>',2)])])])])])])],32)])])])])])])])])}const ot=_(I,[["render",X]]);export{ot as default};
