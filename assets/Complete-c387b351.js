import{B as p}from"./BaseButton-7f466b62.js";import{l as u,S as g,p as f,A as x,r as w,a as n,f as i,b as s,q as h,s as b,n as l,v as d,x as c,h as v,m as y,d as k,w as _,e as P}from"./index-224ff9c4.js";const B={components:{BaseButton:p},data(){return{loading:!1,password:"",confirmPassword:""}},async mounted(){try{const{token:e}=await g.IndexedDB.get("DonnerDB","UserStore","passwordResetAuthorization")}catch{this.$router.push("/account/password-reset")}},methods:{async changePassword(){this.loading=!0;const e=f();try{await x.completePasswordReset(this.password),e.toast({message:"Your new password is set.<br/>Login to your account.",duration:5e3,type:"success"}),setTimeout(()=>{this.$router.push("/account/login")},3e3)}catch(t){e.toast({message:t.message,duration:5e3,type:"error"})}this.loading=!1}}},S={class:"page-header min-vh-100 align-items-start",style:{background:"#EDF9E8"}},C={class:"container px-sm-auto px-0"},U={class:"row"},V={class:"col-lg-6 col-md-7 mx-sm-auto mx-0 my-0 my-sm-5 px-0 px-sm-auto py-sm-7"},N={class:"card rounded-3 min-vh-100 min-vh-sm-80 bg-white",style:{}},D={class:"card-body px-lg-5 py-lg-5 text-start"},T={class:"px-md-4 ps-2 pe-4 row"},q={class:"form-group mt-3 col-sm-6 px-3"},z={class:"float-end"},A={class:"input-group"},E=["disabled"],M={class:"form-group mt-3 col-sm-6 px-3"},R={key:0,class:"float-end"},F={class:"input-group"},I=["disabled"],L={class:"form-group mt-3"};function Y(e,t,j,G,o,r){const m=w("BaseButton");return n(),i("div",null,[s("section",null,[s("div",S,[t[12]||(t[12]=s("div",{class:"mask bg-success-light-dark opacity-10 d-none d-md-block"},null,-1)),t[13]||(t[13]=s("div",{class:"mask gradient-animation",style:{"background-size":"contain !important","background-image":"url('/img/shapes/waves-green.png')",filter:"blur(4px)",opacity:"0.1"}},null,-1)),s("div",C,[s("div",U,[s("div",V,[s("div",N,[s("div",D,[t[9]||(t[9]=s("div",{class:"success mb-6 mb-md-4"},[s("a",{href:"/",class:"icon icon-shape icon-xl rounded-circle bg-white shadow text-center p-3 mx-auto"},[s("img",{src:h,class:"w-[90%] h-[90%] mt-1"})])],-1)),t[10]||(t[10]=s("h2",null,"Secure your account",-1)),t[11]||(t[11]=s("p",{class:"mb-4"},"Set a stronger password to protect your account",-1)),s("form",{class:"form-section active",onSubmit:t[2]||(t[2]=b((...a)=>r.changePassword&&r.changePassword(...a),["prevent"]))},[s("div",T,[s("div",q,[t[4]||(t[4]=s("label",{class:"text-dark text-sm"}," Password ",-1)),s("label",z,[s("i",{class:l(["pt-2 fa",o.password.length>7?"text-success fa-check-circle":""])},null,2)]),s("div",A,[t[3]||(t[3]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),d(s("input",{class:"form-control form-control-lg text-lg",disabled:o.loading?!0:void 0,"onUpdate:modelValue":t[0]||(t[0]=a=>o.password=a),required:"",type:"password",placeholder:"********"},null,8,E),[[c,o.password]])])]),s("div",M,[t[6]||(t[6]=s("label",{class:"text-dark text-sm"}," Confirm Password ",-1)),o.confirmPassword?(n(),i("label",R,[s("i",{class:l(["pt-2 fa",o.password==o.confirmPassword?"text-success fa-check-circle":"text-secondary fa-times-circle"])},null,2)])):v("",!0),s("div",F,[t[5]||(t[5]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),d(s("input",{class:"form-control form-control-lg text-lg",disabled:o.loading?!0:void 0,"onUpdate:modelValue":t[1]||(t[1]=a=>o.confirmPassword=a),required:"",type:"password",placeholder:"********"},null,8,I),[[c,o.confirmPassword]])])]),t[8]||(t[8]=y('<div class="form-group mt-3"><p class="text-muted mb-2 mx-2"> Please follow this guide for a strong password: </p><ol class="text-muted mb-0 float-start mx-2"><li><span class="text-sm">Use two special characters (examples: #, @, â‚¦, &amp;)</span></li><li><span class="text-sm">Use a minimum of eight (8) characters</span></li><li><span class="text-sm">Use at least one (1) number</span></li><li><span class="text-sm">Change it often</span></li></ol></div>',1)),s("div",L,[k(m,{class:"btn btn-success float-end",disabled:!o.password||o.password!=o.confirmPassword,loading:o.loading,nativeType:"submit"},{default:_(()=>[...t[7]||(t[7]=[P(" Complete ",-1)])]),_:1},8,["disabled","loading"])])])],32)])])])])])])])])}const K=u(B,[["render",Y]]);export{K as default};
