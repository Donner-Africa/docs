import{M as E}from"./Modal-1bb2a264.js";import{P as I}from"./PermissionGate-e4dc4759.js";import{S as U}from"./StatusBadge-cfc123eb.js";import{A as N}from"./AuditTimeline-9b98e117.js";import{C as V}from"./ConfirmationModal-ef27838f.js";import{f as F}from"./FormUtility-a2bc7d0b.js";import{l as z,r as w,a as l,f as n,b as e,d as u,w as m,e as d,s as f,v as c,x as g,y as k,F as v,g as p,t as r,h as x,n as b,m as q,Q as _}from"./index-d5783bed.js";const j={name:"BeneficiaryManagement",components:{Modal:E,PermissionGate:I,StatusBadge:U,AuditTimeline:N,ConfirmationModal:V},data(){return{loading:!0,loadingDetails:!1,registering:!1,archiving:!1,userRole:"ADMIN",userPermissions:["beneficiary:view","beneficiary:create","beneficiary:edit","beneficiary:archive","cohort:create","update:create","evidence:create"],searchQuery:"",activeTab:"all",filters:{cohort:"",fundraiser:"",kycStatus:""},beneficiaries:[],cohorts:[],fundraisers:[],selectedBeneficiary:null,detailTab:"timeline",currentPage:1,pageSize:10,totalCount:0,lifecycleTabs:[{label:"All",value:"all"},{label:"Registered",value:"registered"},{label:"Verified",value:"verified"},{label:"Assisted",value:"assisted"},{label:"Closed",value:"closed"}],showRegisterModal:!1,showCohortModal:!1,showUpdateModal:!1,showEvidenceModal:!1,showEditModal:!1,showArchiveConfirm:!1,newBeneficiary:{name:"",phone:"",email:"",nationalId:"",cohortId:"",fundraiserId:"",notes:""},duplicateWarning:null,searchTimeout:null}},computed:{totalPages(){return Math.ceil(this.totalCount/this.pageSize)},visiblePages(){const a=[],s=Math.max(1,this.currentPage-2),P=Math.min(this.totalPages,this.currentPage+2);for(let C=s;C<=P;C++)a.push(C);return a},hasActiveFilters(){return this.searchQuery||this.filters.cohort||this.filters.fundraiser||this.filters.kycStatus}},watch:{activeTab(){this.currentPage=1,this.fetchBeneficiaries()},currentPage(){this.fetchBeneficiaries()},filters:{deep:!0,handler(){this.currentPage=1,this.fetchBeneficiaries()}}},methods:{formatAmount:F,getInitials(a){return a?a.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"?"},formatDate(a){return a?new Date(a).toLocaleDateString():""},getTabCount(a){return{all:this.totalCount,registered:12,verified:8,assisted:5,closed:2}[a]||0},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.currentPage=1,this.fetchBeneficiaries()},300)},clearFilters(){this.searchQuery="",this.filters={cohort:"",fundraiser:"",kycStatus:""}},selectBeneficiary(a){this.selectedBeneficiary=a,this.detailTab="timeline",this.loadBeneficiaryDetails(a.id)},async fetchBeneficiaries(){this.loading=!0;try{await new Promise(a=>setTimeout(a,500)),this.beneficiaries=[{id:1,reference:"BEN-001",name:"Jane Doe",phone:"+234 812 345 6789",email:"jane@example.com",lifecycleStatus:"verified",kycStatus:"verified",cohort:{id:1,name:"Cohort A"},totalReceived:15e4,interventionCount:3,updateCount:5},{id:2,reference:"BEN-002",name:"John Kamara",phone:"+234 811 222 3334",email:"john.k@example.com",lifecycleStatus:"assisted",kycStatus:"in_progress",cohort:{id:1,name:"Cohort A"},totalReceived:75e3,interventionCount:2,updateCount:3},{id:3,reference:"BEN-003",name:"Mary Johnson",phone:"+234 803 456 7890",email:"",lifecycleStatus:"registered",kycStatus:"not_started",cohort:null,totalReceived:0,interventionCount:0,updateCount:0}],this.totalCount=27,this.cohorts=[{id:1,name:"Cohort A"},{id:2,name:"Cohort B"}],this.fundraisers=[{id:1,title:"Medical Aid Campaign"},{id:2,title:"Education Support"}]}finally{this.loading=!1}},async loadBeneficiaryDetails(a){this.loadingDetails=!0;try{await new Promise(s=>setTimeout(s,300)),this.selectedBeneficiary.auditLog=[{id:1,action:"BENEFICIARY_CREATED",actor:"Admin User",timestamp:new Date(Date.now()-864e5*7)},{id:2,action:"BENEFICIARY_STATE_CHANGED",entity:"Registered → Verified",actor:"Operations",timestamp:new Date(Date.now()-864e5*3)},{id:3,action:"UPDATE_POSTED",entity:"Medical supplies received",actor:"Operations",timestamp:new Date(Date.now()-864e5)},{id:4,action:"PAYOUT_EXECUTED",entity:"₦50,000",actor:"Finance",timestamp:new Date(Date.now()-36e5)}],this.selectedBeneficiary.payouts=[{id:1,amount:5e4,date:new Date(Date.now()-36e5),status:"completed"},{id:2,amount:1e5,date:new Date(Date.now()-864e5*5),status:"completed"}]}finally{this.loadingDetails=!1}},async registerBeneficiary(){this.registering=!0;try{await new Promise(a=>setTimeout(a,1e3)),this.showRegisterModal=!1,this.newBeneficiary={name:"",phone:"",email:"",nationalId:"",cohortId:"",fundraiserId:"",notes:""},this.fetchBeneficiaries(),alert("Beneficiary registered successfully")}finally{this.registering=!1}},async archiveBeneficiary({reason:a}){this.archiving=!0;try{await new Promise(s=>setTimeout(s,1e3)),this.showArchiveConfirm=!1,this.selectedBeneficiary=null,this.fetchBeneficiaries(),alert("Beneficiary archived successfully")}finally{this.archiving=!1}},advanceLifecycle(){alert("Advance lifecycle - to be implemented")},generateReport(){alert("Generate report - to be implemented")},exportData(a){alert(`Export ${a.toUpperCase()} - to be implemented`)}},async mounted(){await this.fetchBeneficiaries()}},L={class:"beneficiary-management"},Q={class:"page-header mb-4"},Y={class:"row align-items-center"},G={class:"col-md-6 text-md-end mt-3 mt-md-0"},O={class:"dropdown d-inline-block"},J={class:"dropdown-menu dropdown-menu-end"},K={class:"filters-section card shadow-none border mb-4"},W={class:"card-body py-3"},H={class:"row g-3"},X={class:"col-md-4"},Z={class:"input-group"},$={class:"col-md-2"},ee=["value"],se={class:"col-md-2"},te=["value"],ie={class:"col-md-2"},le={class:"col-md-2 text-end"},ne={class:"nav nav-pills mb-4"},oe=["onClick"],re={class:"content-area"},ae={class:"row"},de={class:"card shadow-none border"},ue={class:"card-body p-0"},ce={key:0,class:"p-4"},fe={key:1,class:"empty-state text-center py-6"},me={class:"text-muted mb-4"},ve={key:2,class:"table-responsive"},pe={class:"table table-hover mb-0"},be=["onClick"],ye={class:"d-flex align-items-center"},ge={class:"avatar-circle me-3"},he={class:"fw-semibold text-foreground"},we={class:"text-muted"},ke={key:0,class:"badge bg-light text-dark"},xe={key:1,class:"text-muted"},Ce={class:"text-end fw-semibold"},Be={key:3,class:"p-3 border-top d-flex justify-content-between align-items-center"},_e={class:"text-muted text-sm"},Pe={class:"pagination pagination-sm mb-0"},Te=["onClick"],Se={key:0,class:"col-lg-5"},Ae={class:"card shadow-none border detail-panel"},De={class:"card-header bg-white border-bottom"},Re={class:"d-flex justify-content-between align-items-start"},Me={class:"mb-1 text-foreground"},Ee={class:"text-muted"},Ie={class:"mt-3"},Ue={class:"card-body"},Ne={class:"row g-2 mb-4"},Ve={class:"col-4"},Fe={class:"stat-box text-center p-2 rounded bg-light"},ze={class:"stat-value text-success fw-bold"},qe={class:"col-4"},je={class:"stat-box text-center p-2 rounded bg-light"},Le={class:"stat-value text-primary fw-bold"},Qe={class:"col-4"},Ye={class:"stat-box text-center p-2 rounded bg-light"},Ge={class:"stat-value text-foreground fw-bold"},Oe={class:"nav nav-tabs nav-tabs-sm mb-3"},Je={class:"nav-item"},Ke={class:"nav-item"},We={class:"nav-item"},He={key:0,class:"text-center py-4 text-muted"},Xe={key:1,class:"evidence-gallery"},Ze=["src","alt"],$e={class:"evidence-meta"},es={class:"text-xs"},ss={key:0,class:"text-center py-4 text-muted"},ts={key:1,class:"payout-list"},is={class:"fw-semibold"},ls={class:"text-muted"},ns={class:"card-footer bg-white border-top"},os={class:"d-flex gap-2"},rs={class:"dropdown"},as={class:"dropdown-menu dropdown-menu-end"},ds={class:"row g-3"},us={class:"col-md-6"},cs={class:"col-md-6"},fs={class:"col-md-6"},ms={class:"col-md-6"},vs={class:"col-md-6"},ps=["value"],bs={class:"col-md-6"},ys=["value"],gs={class:"col-12"},hs={key:0,class:"alert alert-warning mt-3"},ws=["disabled"],ks={key:0,class:"fa fa-spinner fa-spin me-1"};function xs(a,s,P,C,i,o){var T,S,A;const y=w("permission-gate"),h=w("status-badge"),D=w("audit-timeline"),R=w("modal"),M=w("confirmation-modal");return l(),n("div",L,[e("div",Q,[e("div",Y,[s[40]||(s[40]=e("div",{class:"col-md-6"},[e("h4",{class:"mb-1 text-foreground"},"Beneficiary Management"),e("p",{class:"text-muted mb-0"},"Register, track, and report on beneficiaries and interventions")],-1)),e("div",G,[u(y,{requires:"beneficiary:create","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-success me-2",onClick:s[0]||(s[0]=t=>i.showRegisterModal=!0)},[...s[35]||(s[35]=[e("i",{class:"fa fa-user-plus me-1"},null,-1),d(" Register Beneficiary ",-1)])])]),_:1},8,["user-permissions","user-role"]),u(y,{requires:"cohort:create","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-outline-success me-2",onClick:s[1]||(s[1]=t=>i.showCohortModal=!0)},[...s[36]||(s[36]=[e("i",{class:"fa fa-users me-1"},null,-1),d(" Create Cohort ",-1)])])]),_:1},8,["user-permissions","user-role"]),e("div",O,[s[39]||(s[39]=e("button",{class:"btn btn-outline-secondary dropdown-toggle","data-bs-toggle":"dropdown"},[e("i",{class:"fa fa-download me-1"}),d(" Export ")],-1)),e("ul",J,[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:s[2]||(s[2]=f(t=>o.exportData("csv"),["prevent"]))},[...s[37]||(s[37]=[e("i",{class:"fa fa-file-csv me-2"},null,-1),d(" Export CSV ",-1)])])]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:s[3]||(s[3]=f(t=>o.exportData("pdf"),["prevent"]))},[...s[38]||(s[38]=[e("i",{class:"fa fa-file-pdf me-2"},null,-1),d(" Export PDF ",-1)])])])])])])])]),e("div",K,[e("div",W,[e("div",H,[e("div",X,[e("div",Z,[s[41]||(s[41]=e("span",{class:"input-group-text bg-white border-end-0"},[e("i",{class:"fa fa-search text-muted"})],-1)),c(e("input",{type:"text",class:"form-control border-start-0",placeholder:"Search by name, ID, or phone...","onUpdate:modelValue":s[4]||(s[4]=t=>i.searchQuery=t),onInput:s[5]||(s[5]=(...t)=>o.debouncedSearch&&o.debouncedSearch(...t))},null,544),[[g,i.searchQuery]])])]),e("div",$,[c(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=t=>i.filters.cohort=t)},[s[42]||(s[42]=e("option",{value:""},"All Cohorts",-1)),(l(!0),n(v,null,p(i.cohorts,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name),9,ee))),128))],512),[[k,i.filters.cohort]])]),e("div",se,[c(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=t=>i.filters.fundraiser=t)},[s[43]||(s[43]=e("option",{value:""},"All Fundraisers",-1)),(l(!0),n(v,null,p(i.fundraisers,t=>(l(),n("option",{key:t.id,value:t.id},r(t.title),9,te))),128))],512),[[k,i.filters.fundraiser]])]),e("div",ie,[c(e("select",{class:"form-select","onUpdate:modelValue":s[8]||(s[8]=t=>i.filters.kycStatus=t)},[...s[44]||(s[44]=[e("option",{value:""},"KYC Status",-1),e("option",{value:"verified"},"Verified",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"none"},"Not Started",-1)])],512),[[k,i.filters.kycStatus]])]),e("div",le,[o.hasActiveFilters?(l(),n("button",{key:0,class:"btn btn-light w-[100%]",onClick:s[9]||(s[9]=(...t)=>o.clearFilters&&o.clearFilters(...t))},[...s[45]||(s[45]=[e("i",{class:"fa fa-times me-1"},null,-1),d(" Clear ",-1)])])):x("",!0)])])])]),e("ul",ne,[(l(!0),n(v,null,p(i.lifecycleTabs,t=>(l(),n("li",{class:"nav-item",key:t.value},[e("a",{class:b(["nav-link",{active:i.activeTab===t.value}]),href:"#",onClick:f(B=>i.activeTab=t.value,["prevent"])},[d(r(t.label)+" ",1),e("span",{class:b(["badge ms-1",i.activeTab===t.value?"bg-white text-success":"bg-secondary"])},r(o.getTabCount(t.value)),3)],10,oe)]))),128))]),e("div",re,[e("div",ae,[e("div",{class:b(i.selectedBeneficiary?"col-lg-7":"col-12")},[e("div",de,[e("div",ue,[i.loading?(l(),n("div",ce,[(l(),n(v,null,p(6,t=>e("div",{key:t,class:"skeleton-row mb-3"},[...s[46]||(s[46]=[q('<div class="d-flex gap-3" data-v-befbe95f><div class="skeleton skeleton-avatar" data-v-befbe95f></div><div class="flex-grow-1" data-v-befbe95f><div class="skeleton skeleton-text mb-2" style="width:60%;" data-v-befbe95f></div><div class="skeleton skeleton-text" style="width:40%;" data-v-befbe95f></div></div><div class="skeleton skeleton-badge" data-v-befbe95f></div></div>',1)])])),64))])):i.beneficiaries.length?(l(),n("div",ve,[e("table",pe,[s[50]||(s[50]=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"border-0"},"Beneficiary"),e("th",{class:"border-0"},"Cohort"),e("th",{class:"border-0"},"Status"),e("th",{class:"border-0"},"KYC"),e("th",{class:"border-0 text-end"},"Total Received")])],-1)),e("tbody",null,[(l(!0),n(v,null,p(i.beneficiaries,t=>{var B;return l(),n("tr",{key:t.id,onClick:Cs=>o.selectBeneficiary(t),class:b([{"table-active":((B=i.selectedBeneficiary)==null?void 0:B.id)===t.id},"cursor-pointer"])},[e("td",null,[e("div",ye,[e("div",ge,r(o.getInitials(t.name)),1),e("div",null,[e("div",he,r(t.name),1),e("small",we,r(t.reference),1)])])]),e("td",null,[t.cohort?(l(),n("span",ke,r(t.cohort.name),1)):(l(),n("span",xe,"—"))]),e("td",null,[u(h,{status:t.lifecycleStatus,type:"lifecycle"},null,8,["status"])]),e("td",null,[u(h,{status:t.kycStatus,type:"kyc",size:"sm"},null,8,["status"])]),e("td",Ce," ₦"+r(o.formatAmount(t.totalReceived)),1)],10,be)}),128))])])])):(l(),n("div",fe,[s[48]||(s[48]=e("div",{class:"empty-icon mb-3"},[e("i",{class:"fa fa-users-slash",style:{"font-size":"3rem",color:"#ccc"}})],-1)),s[49]||(s[49]=e("h5",{class:"text-foreground"},"No beneficiaries found",-1)),e("p",me,r(o.hasActiveFilters?"Try adjusting your filters":"Start by registering your first beneficiary"),1),u(y,{requires:"beneficiary:create","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-success",onClick:s[10]||(s[10]=t=>i.showRegisterModal=!0)},[...s[47]||(s[47]=[e("i",{class:"fa fa-user-plus me-1"},null,-1),d(" Register Beneficiary ",-1)])])]),_:1},8,["user-permissions","user-role"])])),o.totalPages>1?(l(),n("div",Be,[e("span",_e," Showing "+r((i.currentPage-1)*i.pageSize+1)+" - "+r(Math.min(i.currentPage*i.pageSize,i.totalCount))+" of "+r(i.totalCount),1),e("nav",null,[e("ul",Pe,[e("li",{class:b(["page-item",{disabled:i.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:s[11]||(s[11]=f(t=>i.currentPage--,["prevent"]))},[...s[51]||(s[51]=[e("i",{class:"fa fa-chevron-left"},null,-1)])])],2),(l(!0),n(v,null,p(o.visiblePages,t=>(l(),n("li",{key:t,class:b(["page-item",{active:i.currentPage===t}])},[e("a",{class:"page-link",href:"#",onClick:f(B=>i.currentPage=t,["prevent"])},r(t),9,Te)],2))),128)),e("li",{class:b(["page-item",{disabled:i.currentPage===o.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:s[12]||(s[12]=f(t=>i.currentPage++,["prevent"]))},[...s[52]||(s[52]=[e("i",{class:"fa fa-chevron-right"},null,-1)])])],2)])])])):x("",!0)])])],2),i.selectedBeneficiary?(l(),n("div",Se,[e("div",Ae,[e("div",De,[e("div",Re,[e("div",null,[e("h5",Me,r(i.selectedBeneficiary.name),1),e("span",Ee,r(i.selectedBeneficiary.reference),1)]),e("button",{class:"btn btn-sm btn-light",onClick:s[13]||(s[13]=t=>i.selectedBeneficiary=null)},[...s[53]||(s[53]=[e("i",{class:"fa fa-times"},null,-1)])])]),e("div",Ie,[u(h,{status:i.selectedBeneficiary.lifecycleStatus,type:"lifecycle"},null,8,["status"]),u(h,{status:i.selectedBeneficiary.kycStatus,type:"kyc",class:"ms-2"},null,8,["status"])])]),e("div",Ue,[e("div",Ne,[e("div",Ve,[e("div",Fe,[e("div",ze,"₦"+r(o.formatAmount(i.selectedBeneficiary.totalReceived)),1),s[54]||(s[54]=e("div",{class:"stat-label text-muted text-xs"},"Received",-1))])]),e("div",qe,[e("div",je,[e("div",Le,r(i.selectedBeneficiary.interventionCount||0),1),s[55]||(s[55]=e("div",{class:"stat-label text-muted text-xs"},"Interventions",-1))])]),e("div",Qe,[e("div",Ye,[e("div",Ge,r(i.selectedBeneficiary.updateCount||0),1),s[56]||(s[56]=e("div",{class:"stat-label text-muted text-xs"},"Updates",-1))])])]),e("ul",Oe,[e("li",Je,[e("a",{class:b(["nav-link",{active:i.detailTab==="timeline"}]),href:"#",onClick:s[14]||(s[14]=f(t=>i.detailTab="timeline",["prevent"]))},[...s[57]||(s[57]=[e("i",{class:"fa fa-history me-1"},null,-1),d(" Timeline ",-1)])],2)]),e("li",Ke,[e("a",{class:b(["nav-link",{active:i.detailTab==="evidence"}]),href:"#",onClick:s[15]||(s[15]=f(t=>i.detailTab="evidence",["prevent"]))},[...s[58]||(s[58]=[e("i",{class:"fa fa-images me-1"},null,-1),d(" Evidence ",-1)])],2)]),e("li",We,[e("a",{class:b(["nav-link",{active:i.detailTab==="payouts"}]),href:"#",onClick:s[16]||(s[16]=f(t=>i.detailTab="payouts",["prevent"]))},[...s[59]||(s[59]=[e("i",{class:"fa fa-money-bill me-1"},null,-1),d(" Payouts ",-1)])],2)])]),c(e("div",null,[u(D,{entries:i.selectedBeneficiary.auditLog||[],loading:i.loadingDetails,title:"Intervention Timeline","initial-limit":5,"max-height":"300px"},null,8,["entries","loading"])],512),[[_,i.detailTab==="timeline"]]),c(e("div",null,[(T=i.selectedBeneficiary.evidence)!=null&&T.length?(l(),n("div",Xe,[(l(!0),n(v,null,p(i.selectedBeneficiary.evidence,t=>(l(),n("div",{key:t.id,class:"evidence-item"},[e("img",{src:t.url,alt:t.name,class:"evidence-img"},null,8,Ze),e("div",$e,[e("span",es,r(t.name),1)])]))),128))])):(l(),n("div",He,[...s[60]||(s[60]=[e("i",{class:"fa fa-images mb-2",style:{"font-size":"2rem"}},null,-1),e("p",{class:"mb-0"},"No evidence attached yet.",-1)])]))],512),[[_,i.detailTab==="evidence"]]),c(e("div",null,[(S=i.selectedBeneficiary.payouts)!=null&&S.length?(l(),n("div",ts,[(l(!0),n(v,null,p(i.selectedBeneficiary.payouts,t=>(l(),n("div",{key:t.id,class:"payout-item d-flex justify-content-between align-items-center py-2 border-bottom"},[e("div",null,[e("div",is,"₦"+r(o.formatAmount(t.amount)),1),e("small",ls,r(o.formatDate(t.date)),1)]),u(h,{status:t.status,type:"payout",size:"sm"},null,8,["status"])]))),128))])):(l(),n("div",ss,[...s[61]||(s[61]=[e("i",{class:"fa fa-money-bill mb-2",style:{"font-size":"2rem"}},null,-1),e("p",{class:"mb-0"},"No payouts recorded.",-1)])]))],512),[[_,i.detailTab==="payouts"]])]),e("div",ns,[e("div",os,[u(y,{requires:"update:create","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-sm btn-success flex-grow-1",onClick:s[17]||(s[17]=t=>i.showUpdateModal=!0)},[...s[62]||(s[62]=[e("i",{class:"fa fa-plus me-1"},null,-1),d(" Post Update ",-1)])])]),_:1},8,["user-permissions","user-role"]),u(y,{requires:"evidence:create","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-sm btn-outline-success",onClick:s[18]||(s[18]=t=>i.showEvidenceModal=!0)},[...s[63]||(s[63]=[e("i",{class:"fa fa-camera"},null,-1)])])]),_:1},8,["user-permissions","user-role"]),u(y,{requires:"beneficiary:edit","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("button",{class:"btn btn-sm btn-outline-secondary",onClick:s[19]||(s[19]=t=>i.showEditModal=!0)},[...s[64]||(s[64]=[e("i",{class:"fa fa-edit"},null,-1)])])]),_:1},8,["user-permissions","user-role"]),e("div",rs,[s[69]||(s[69]=e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle","data-bs-toggle":"dropdown"},[e("i",{class:"fa fa-ellipsis-v"})],-1)),e("ul",as,[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:s[20]||(s[20]=f((...t)=>o.advanceLifecycle&&o.advanceLifecycle(...t),["prevent"]))},[...s[65]||(s[65]=[e("i",{class:"fa fa-arrow-right me-2"},null,-1),d(" Advance Status ",-1)])])]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:s[21]||(s[21]=f((...t)=>o.generateReport&&o.generateReport(...t),["prevent"]))},[...s[66]||(s[66]=[e("i",{class:"fa fa-file-alt me-2"},null,-1),d(" Generate Report ",-1)])])]),s[68]||(s[68]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[u(y,{requires:"beneficiary:archive","user-permissions":i.userPermissions,"user-role":i.userRole},{default:m(()=>[e("a",{class:"dropdown-item text-danger",href:"#",onClick:s[22]||(s[22]=f(t=>i.showArchiveConfirm=!0,["prevent"]))},[...s[67]||(s[67]=[e("i",{class:"fa fa-archive me-2"},null,-1),d(" Archive ",-1)])])]),_:1},8,["user-permissions","user-role"])])])])])])])])):x("",!0)])]),u(R,{show:i.showRegisterModal,"onUpdate:show":s[33]||(s[33]=t=>i.showRegisterModal=t),"modal-classes":"modal-lg"},{header:m(()=>[...s[70]||(s[70]=[e("h5",{class:"modal-title"},[e("i",{class:"fa fa-user-plus me-2 text-success"}),d(" Register Beneficiary ")],-1)])]),footer:m(()=>[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[31]||(s[31]=t=>i.showRegisterModal=!1)}," Cancel "),e("button",{type:"button",class:"btn btn-success",onClick:s[32]||(s[32]=(...t)=>o.registerBeneficiary&&o.registerBeneficiary(...t)),disabled:i.registering},[i.registering?(l(),n("i",ks)):x("",!0),s[82]||(s[82]=d(" Register Beneficiary ",-1))],8,ws)]),default:m(()=>[e("form",{onSubmit:s[30]||(s[30]=f((...t)=>o.registerBeneficiary&&o.registerBeneficiary(...t),["prevent"]))},[e("div",ds,[e("div",us,[s[71]||(s[71]=e("label",{class:"form-label"},[d("Full Name "),e("span",{class:"text-danger"},"*")],-1)),c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[23]||(s[23]=t=>i.newBeneficiary.name=t),required:""},null,512),[[g,i.newBeneficiary.name]])]),e("div",cs,[s[72]||(s[72]=e("label",{class:"form-label"},"Phone Number",-1)),c(e("input",{type:"tel",class:"form-control","onUpdate:modelValue":s[24]||(s[24]=t=>i.newBeneficiary.phone=t)},null,512),[[g,i.newBeneficiary.phone]])]),e("div",fs,[s[73]||(s[73]=e("label",{class:"form-label"},"Email",-1)),c(e("input",{type:"email",class:"form-control","onUpdate:modelValue":s[25]||(s[25]=t=>i.newBeneficiary.email=t)},null,512),[[g,i.newBeneficiary.email]])]),e("div",ms,[s[74]||(s[74]=e("label",{class:"form-label"},"National ID",-1)),c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[26]||(s[26]=t=>i.newBeneficiary.nationalId=t)},null,512),[[g,i.newBeneficiary.nationalId]])]),e("div",vs,[s[76]||(s[76]=e("label",{class:"form-label"},"Cohort",-1)),c(e("select",{class:"form-select","onUpdate:modelValue":s[27]||(s[27]=t=>i.newBeneficiary.cohortId=t)},[s[75]||(s[75]=e("option",{value:""},"Select Cohort",-1)),(l(!0),n(v,null,p(i.cohorts,t=>(l(),n("option",{key:t.id,value:t.id},r(t.name),9,ps))),128))],512),[[k,i.newBeneficiary.cohortId]])]),e("div",bs,[s[78]||(s[78]=e("label",{class:"form-label"},"Assign to Fundraiser",-1)),c(e("select",{class:"form-select","onUpdate:modelValue":s[28]||(s[28]=t=>i.newBeneficiary.fundraiserId=t)},[s[77]||(s[77]=e("option",{value:""},"Select Fundraiser",-1)),(l(!0),n(v,null,p(i.fundraisers,t=>(l(),n("option",{key:t.id,value:t.id},r(t.title),9,ys))),128))],512),[[k,i.newBeneficiary.fundraiserId]])]),e("div",gs,[s[79]||(s[79]=e("label",{class:"form-label"},"Notes",-1)),c(e("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":s[29]||(s[29]=t=>i.newBeneficiary.notes=t)},null,512),[[g,i.newBeneficiary.notes]])])]),i.duplicateWarning?(l(),n("div",hs,[s[80]||(s[80]=e("i",{class:"fa fa-exclamation-triangle me-2"},null,-1)),s[81]||(s[81]=e("strong",null,"Potential duplicate:",-1)),d(" "+r(i.duplicateWarning),1)])):x("",!0)],32)]),_:1},8,["show"]),u(M,{show:i.showArchiveConfirm,"onUpdate:show":s[34]||(s[34]=t=>i.showArchiveConfirm=t),title:"Archive Beneficiary",message:`Are you sure you want to archive ${(A=i.selectedBeneficiary)==null?void 0:A.name}?`,destructive:!0,"destructive-message":"This will remove the beneficiary from active lists. Data will be retained for reporting.","requires-reason":!0,"reason-placeholder":"Please provide a reason for archiving this beneficiary...","confirm-text":"Archive",processing:i.archiving,onConfirm:o.archiveBeneficiary},null,8,["show","message","processing","onConfirm"])])}const Rs=z(j,[["render",xs],["__scopeId","data-v-befbe95f"]]);export{Rs as default};
