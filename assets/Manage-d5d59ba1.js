import{Q as H}from"./vue-quill.esm-bundler-bcc91771.js";/* empty css                         */import{R as j,S as F,I as Q}from"./ImageUploadService-89ef3525.js";import{B as E}from"./BaseButton-c6c5ab63.js";import{S as W}from"./SDGSelect-b2c085fa.js";import{M as z}from"./Modal-9e207090.js";import{C as N}from"./ConfigurationService-9573c308.js";import{F as b}from"./FundRaiserService-c9dfbc5b.js";import{l as D,p as y,a as l,f as d,b as s,n as S,P as V,h,d as c,s as m,y as U,U as q,r as x,F as M,g as T,q as k,t as u,v as _,x as I,e as f,w,m as P,c as G,Q as O,R as Y,V as J}from"./index-7ab8b32e.js";import{f as A}from"./FormUtility-a2bc7d0b.js";import{D as K}from"./AdvancedTable-4a2b6414.js";import"./Delta-31332cec.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-fd341d68.js";import"./ohash.D__AXeF1-7a7a490e.js";const X={data(){return{errorLoadingRaiser:!1,loading:!0,raiser:{},sharingSettings:{loading:[]},savingTheme:!1,publishing:!1}},async mounted(){this.loadRaiser()},methods:{async loadRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/";return}this.raiser=await b.getRaiserByReference(o),this.sharingSettings={seo:this.raiser.seo,featured:this.raiser.featured,privateMode:this.raiser.privateMode,archive:this.raiser.archive,theme:this.raiser.theme,loading:[]}}catch{this.errorLoadingRaiser=!0}this.loading=!1},async publish(){this.publishing=!0;const o=y();try{const e={...JSON.parse(JSON.stringify(this.raiser)),goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,"")},a=await b.updateSectionData(this.raiser.reference,"AFP",e);o.toast({message:"Your raiser is live.",type:"success",duration:5e3}),this.$router.push(`/me/raisers/${e.reference}`)}catch(e){o.toast({message:e.message||"There was an error saving your raiser.",type:"error",duration:5e3})}this.publishing=!1},downloadFlyer(){b.downloadFlyer(this.raiser.reference,this.raiser.theme)},async updateSharingSetting(o,e){this.sharingSettings.loading.push(o);const a=y(),v={setting:o,value:e};try{const{data:r,message:i,flag:g}=await b.updateSharingSettings(this.raiser.reference,v);this.sharingSettings={...this.sharingSettings,...r},a.toast({message:i,type:g,silent:!0})}catch(r){a.toast({message:r.message,type:"error"})}const t=this.sharingSettings.loading.indexOf(o);this.sharingSettings.loading.splice(t,1)}}},Z={class:"px-0 container-fluid"},$={class:"row position-relative"},ee={class:"col-12 col-md-4 order-md-2"},se={class:"position-sticky",style:{top:"100px"}},te={class:"p-4"},oe={class:"row mt-4 pb-1 position-relative"},re={class:"col-4 text-center mt-4"},ie={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},ne={class:"col-4 text-center mt-4"},ae={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},le={class:"col-4 text-center mt-4"},de={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},ce={class:"col-4 text-center mt-4"},ue={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},me={class:"col-4 text-center mt-4"},ge={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},pe={class:"col-4 text-center mt-4"},he={key:0,class:"rounded-3 mask text-center opacity-10",style:{background:"#fff8"}},fe={class:"row mt-4"},be={class:"col-6"},ve={class:"col-6"},ye=["disabled"],xe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},we={class:"col-md-8"},Se={class:"card shadow-none border border-light mt-4"},ke={class:"card-body pt-0"},_e={class:"table-responsive"},Ce={class:"table mb-0"},Ie={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},De=["disabled"],Re={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Me=["disabled"],Te={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Oe=["disabled"],Ue={class:"form-check form-switch mt-2 mb-0 d-flex align-items-center justify-content-center"},Be=["disabled"];function Ne(o,e,a,v,t,r){return l(),d("div",null,[s("div",Z,[s("div",$,[s("div",ee,[s("div",se,[s("div",{class:S(["w-[100%] rounded-3 mt-4 position-relative bg-success-light align-items-center",t.sharingSettings.loading.includes("theme")?"opacity-9":""]),style:V([{"min-height":"400px",cursor:"pointer"},t.sharingSettings.loading.includes("theme")?"pointer-events: none;":""])},[s("div",te,[e[28]||(e[28]=s("span",{class:"h4"}," Select This Raiser's Theme ",-1)),e[29]||(e[29]=s("p",{class:"text-sm"}," This is the theme that your flyers will use when published. ",-1)),s("div",oe,[s("div",re,[s("div",{onClick:e[0]||(e[0]=i=>{t.raiser.theme="empowerment",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto",style:{height:"100px","aspect-ratio":"1 / 1",background:"linear-gradient(310deg, #ff20d8, #c959eb)"}},[t.raiser.theme=="empowerment"?(l(),d("div",ie,[...e[16]||(e[16]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[17]||(e[17]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Empowerment ",-1))]),s("div",ne,[s("div",{onClick:e[1]||(e[1]=i=>{t.raiser.theme="intervention",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-warning",style:{height:"100px","aspect-ratio":"1 / 1"}},[t.raiser.theme=="intervention"?(l(),d("div",ae,[...e[18]||(e[18]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[19]||(e[19]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Intervention ",-1))]),s("div",le,[s("div",{onClick:e[2]||(e[2]=i=>{t.raiser.theme="corporate",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-info",style:{height:"100px","aspect-ratio":"1 / 1"}},[t.raiser.theme=="corporate"?(l(),d("div",de,[...e[20]||(e[20]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[21]||(e[21]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Corporate ",-1))]),s("div",ce,[s("div",{onClick:e[3]||(e[3]=i=>{t.raiser.theme="emergency",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-error",style:{height:"100px","aspect-ratio":"1 / 1"}},[t.raiser.theme=="emergency"?(l(),d("div",ue,[...e[22]||(e[22]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[23]||(e[23]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Emergency ",-1))]),s("div",me,[s("div",{onClick:e[4]||(e[4]=i=>{t.raiser.theme="regular",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-primary",style:{height:"100px","aspect-ratio":"1 / 1"}},[t.raiser.theme=="regular"?(l(),d("div",ge,[...e[24]||(e[24]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[25]||(e[25]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Community ",-1))]),s("div",pe,[s("div",{onClick:e[5]||(e[5]=i=>{t.raiser.theme="venture",r.updateSharingSetting("theme",t.raiser.theme)}),class:"card border border-3 border-white shadow-none position-relative cursor-pointer rounded-3 mx-auto bg-gradient-dark",style:{height:"100px","aspect-ratio":"1 / 1"}},[t.raiser.theme=="venture"?(l(),d("div",he,[...e[26]||(e[26]=[s("i",{class:"fa fa-check text-white",style:{"font-size":"30px","margin-top":"30px"}},null,-1)])])):h("",!0)]),e[27]||(e[27]=s("span",{class:"text-xs font-weight-normal d-block mt-2"}," Venture ",-1))])])])],6),s("div",fe,[s("div",be,[s("button",{onClick:e[6]||(e[6]=(...i)=>r.downloadFlyer&&r.downloadFlyer(...i)),class:"btn btn-outline-secondary w-[100%]"},[...e[30]||(e[30]=[s("i",{class:"fa fa-download me-2"},null,-1),c(" Preview Flyer ",-1)])])]),s("div",ve,[t.raiser.status=="DRAFT"?(l(),d("button",{key:0,onClick:e[7]||(e[7]=(...i)=>r.publish&&r.publish(...i)),disabled:t.publishing,class:"btn btn-outline-success w-[100%]"},[t.publishing?(l(),d("span",xe)):h("",!0),e[31]||(e[31]=c(" Publish Raiser ",-1))],8,ye)):h("",!0)])])])]),s("div",we,[s("div",Se,[e[36]||(e[36]=s("div",{class:"card-header pb-0"},[s("h5",null,"Publicity Settings"),s("p",{class:"text-sm"},"Configure your publicity and privacy settings.")],-1)),s("div",ke,[s("div",_e,[s("table",Ce,[s("tbody",null,[s("tr",null,[e[32]||(e[32]=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("span",{class:"text-foreground d-block",style:{"font-size":"20px"}},"SEO Friendly"),s("span",{class:"text-xs font-weight-normal"}," Allow your raiser to popup on search engines. ")])],-1)),s("td",null,[s("div",Ie,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=i=>t.sharingSettings.seo=i),onChange:e[9]||(e[9]=i=>r.updateSharingSetting("seo",t.sharingSettings.seo)),disabled:t.sharingSettings.archive||t.sharingSettings.privateMode||t.sharingSettings.loading.includes("seo")?!0:void 0},null,40,De),[[U,t.sharingSettings.seo]])])])]),s("tr",null,[e[33]||(e[33]=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("span",{class:"text-foreground d-block",style:{"font-size":"20px"}},"Promoted"),s("span",{class:"text-xs font-weight-normal"}," Feature this raiser on the home page and in search results. (+ 5% fee on funds raised) ")])],-1)),s("td",null,[s("div",Re,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=i=>t.sharingSettings.featured=i),onChange:e[11]||(e[11]=i=>r.updateSharingSetting("featured",t.sharingSettings.featured)),disabled:t.sharingSettings.archive||t.sharingSettings.privateMode||t.sharingSettings.loading.includes("featured")?!0:void 0},null,40,Me),[[U,t.sharingSettings.featured]])])])]),s("tr",null,[e[34]||(e[34]=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("span",{class:"text-foreground d-block",style:{"font-size":"20px"}},"Private Mode"),s("span",{class:"text-xs font-weight-normal"}," Hide this raiser from public view and search so only people with the link can view it. ")])],-1)),s("td",null,[s("div",Te,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=i=>t.sharingSettings.privateMode=i),onChange:e[13]||(e[13]=i=>r.updateSharingSetting("privateMode",t.sharingSettings.privateMode)),disabled:t.sharingSettings.archive||t.sharingSettings.loading.includes("privateMode")?!0:void 0},null,40,Oe),[[U,t.sharingSettings.privateMode]])])])]),s("tr",null,[e[35]||(e[35]=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("div",{class:"mb-0 text-foreground",style:{"font-size":"20px"}}," Archive "),s("span",{class:"text-xs font-weight-normal"}," Archive this raiser (this will prevent further viewing). ")])],-1)),s("td",null,[s("div",Ue,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=i=>t.sharingSettings.archive=i),onChange:e[15]||(e[15]=i=>r.updateSharingSetting("archive",t.sharingSettings.archive)),disabled:t.sharingSettings.loading.includes("archive")||void 0},null,40,Be),[[U,t.sharingSettings.archive]])])])])])])])])])])])])])}const qe=D(X,[["render",Ne]]),Ae={components:{BaseButton:E,SDGSelect:W,QuillEditor:H,Modal:z,VuePictureCropper:j},data(){return{categories:[],croppingImage:!1,errorLoadingRaiser:!1,loading:!0,raiser:{},timelineImages:[],photoUrl:"",picture:"",savingImage:!1,showImageCropper:!1,showBannerModal:!1,showRemoveTimelineImageModal:!1,suggestingSummary:!1,savingBasicInfo:!1,savingLocaleInfo:!1,savingGoalInfo:!1,savingStory:!1,savingDraft:!1,updatingTimeline:!1}},beforeMount(){this.categories=N.get("fundRaiserCategories")},async mounted(){if(this.fetchRaiser(),this.loggedIn=await q.get("isLoggedIn"),this.loggedIn){const o=await q.get("user");this.name=o.name,this.email=o.email,this.phone=o.phone}},computed:{categoryNames(){return this.categories.map(o=>o.name)},subCategoryNames(){const o=this.categories.find(e=>e.name===this.raiser.category);return o?o.subCategories:[]},storyWordCount(){const o=document.createElement("div");o.innerHTML=new String(this.raiser.story).replaceAll(".",". ");const e=o.innerText.replaceAll(/ [\s]{2,} /g," ").trim();return e.length===0?0:e.split(" ").length},summaryCharacterCount(){const o=document.createElement("div");o.innerHTML=new String(this.raiser.summary).replaceAll(".",". ");const e=o.innerText.replaceAll(/ [\s]{2,} /g," ").trim();return e.length===0?0:e.length}},methods:{formatAmount:A,openImageSelectionDialog(){this.$refs.imageFileUploadInput.click()},async openImageCropper(o){const e=y();this.picture=!1,this.croppedImage="";const a=o.target.files[0],v=new FileReader;v.onload=()=>{this.picture=String(v.result),this.showImageCropper=!0,o.target.value=""};try{await v.readAsDataURL(a)}catch(t){e.toast({message:t.message||"An error was encountered while loading the image.",type:"error",duration:5e3})}},async cropImage(){const o=y();if(F){this.croppingImage=!0;try{const e=await F.getFile(),a=await Q.uploadBannerImage(e);this.photoUrl=a.secure_url,this.showImageCropper=!1}catch(e){o.toast({message:e.message||"Cropping the image failed",type:"error",duration:5e3})}this.croppingImage=!1}},async saveCroppedImage(){if(this.savingImage)return;this.savingImage=!0;const o=y();try{const e={image:`${this.photoUrl}`},a=this.updatingTimeline?"TIMELINE_INFORMATION":"BANNER_INFORMATION",{data:v}=await b.updateSectionData(this.raiser.reference,a,e);this.updatingTimeline?this.timelineImages=v.timelineImages:this.raiser.bannerImage=this.photoUrl,o.toast({message:"Done",type:"success",duration:5e3}),this.closeBannerModal()}catch(e){o.toast({message:e.message||"We could not save the image.<br/>Check your network and try again.",type:"error",duration:5e3})}this.updatingTimeline=!1,this.savingImage=!1},closeBannerModal(){this.showBannerModal=!1,this.picture="",this.showImageCropper=!1,this.photoUrl=this.raiser.bannerImage},async loadRaiserDetails(){const o=await b.getRaiserByReference(this.raiser.reference);this.raiser=o,this.raiser.sdgs=this.raiser.sdgs||[],this.raiser.goal=this.formatAmount(this.raiser.goal),this.timelineImages=o.timelineImages||[];const e=o.raisedAmount>o.goal?100:100*(o.raisedAmount/o.goal);this.$refs.progressbar.style.width=`${e}%`},async fetchRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/";return}this.raiser.reference=o,await this.loadRaiserDetails(),this.loadRaiserBanner()}catch{this.errorLoadingRaiser=!0}this.loading=!1},async loadRaiserBanner(){const o=this.raiser.bannerImage;if(o){var e=new Image;e.onload=()=>{this.$refs.banner.src=e.src},e.src=o}},async saveBasicInfo(){this.savingBasicInfo=!0;const o=y();try{const e={title:`${this.raiser.title}`,category:`${this.raiser.category}`,subCategory:`${this.raiser.subCategory}`};if(e.title.length>70)throw new Error("Your title is too long.");if(e.title.length<20)throw new Error("Your title is too short.");if(!this.subCategoryNames.includes(e.subCategory))throw new Error("Select a sub category.");const a=await b.updateSectionData(this.raiser.reference,"BASIC_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"You're up to date with the basics.",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your basic information.",type:"error",duration:5e3})}this.savingBasicInfo=!1},async saveLocaleInfo(){this.savingLocaleInfo=!0;const o=y();try{const e={country:`${this.raiser.country}`,location:`${this.raiser.location}`,type:`${this.raiser.type}`},a=await b.updateSectionData(this.raiser.reference,"LOCALE_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your location.",type:"error",duration:5e3})}this.savingLocaleInfo=!1},async saveGoalInfo(){this.savingRaiserInfo=!0;const o=y();try{const e={goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,""),sdgs:[...this.raiser.sdgs]};if(e.goal>1e9)throw new Error("It's tough to say, but your goal is a little too high. Feel free to leave it blank");const a=await b.updateSectionData(this.raiser.reference,"GOAL_INFORMATION",e);this.raiser={...a,...this.raiser},o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your goals.",type:"error",duration:5e3})}this.savingRaiserInfo=!1},async generateSummary(){if(this.suggestingSummary)return;this.suggestingSummary=!0;const o=y();try{await this.saveStory();const{data:e}=await b.generateSummarySuggestion(this.raiser.reference);this.raiser.summary=e||""}catch(e){o.toast({message:e.message||"We could not suggest a summary.",type:"error",duration:5e3})}this.suggestingSummary=!1},async saveStory(){this.savingStory=!0;const o=y();try{const e={story:`${this.raiser.story}`,summary:`${this.raiser.summary}`},a=await b.updateSectionData(this.raiser.reference,"STORY_INFORMATION",e);this.raiser={...a,...this.raiser},this.suggestingSummary||o.toast({message:"Saved",type:"success",duration:5e3})}catch(e){o.toast({message:e.message||"There was an error saving your story.",type:"error",duration:5e3})}this.savingStory=!1},async saveDraft(){this.savingDraft=!0;const o=y();try{const e={...JSON.parse(JSON.stringify(this.raiser)),goal:`${this.raiser.goal}`.replaceAll(/[\D]/g,"")},a=await b.updateSectionData(this.raiser.reference,"AFD",e);o.toast({message:"Your raiser is saved.",type:"success",duration:5e3}),this.$router.push(`/me/raisers/${e.reference}`)}catch(e){o.toast({message:e.message||"There was an error saving your raiser.",type:"error",duration:5e3})}this.savingDraft=!1},async removeTimelineImage(o){const e=y();try{await b.removeTimelineImage(this.raiser.reference,o-1),this.timelineImages=this.timelineImages.filter(a=>a!=this.timelineImages[o-1]),this.showRemoveTimelineImageModal=!1}catch(a){e.toast({message:a.message||"There was an error removing content from your timeline.",type:"error",duration:5e3})}}}},Ee={class:"px-0 container-fluid"},Le={class:"row position-relative"},Fe={class:"col-12 col-md-4 order-md-2"},ze={class:"position-sticky",style:{top:"100px"}},Ve={class:"w-[100%] rounded-3 mt-4 position-relative bg-success-light text-center align-items-center",style:{height:"400px",cursor:"pointer","aspect-ratio":"16 / 9"}},Pe=["src"],Ge={class:"d-none",type:"file",accept:"image/*",ref:"imageFileUploadInput"},He={class:"row mt-2"},je=["onClick"],Qe=["src"],We={key:0,class:"col-4 mt-4"},Ye={class:"col-12 col-md-8 order-md-1"},Je={class:"card shadow-none border border-light mt-4"},Ke={class:"row"},Xe={class:"col-12"},Ze={key:0,class:"fa fa-check me-1"},$e={key:1,class:"float-end text-secondary"},es={class:"input-group"},ss={class:"row"},ts={class:"col-sm-6"},os={class:"input-group"},rs=["value"],is={class:"col-sm-6"},ns={class:"input-group"},as=["value"],ls={class:"row"},ds={class:"col-md-12 text-end mt-4"},cs={class:"card shadow-none border border-light mt-4"},us={class:"row"},ms={class:"col-12 mb-md-0"},gs={class:"input-group"},ps={class:"col-md-6"},hs={class:"input-group"},fs={class:"row"},bs={class:"col-md-12 text-end mt-4"},vs={class:"card shadow-none border border-light mt-4"},ys={class:"row"},xs={class:"col-md-8 mb-4 mb-md-0"},ws={class:"col-md-4"},Ss={class:"input-group"},ks={class:"row"},_s={class:"col-md-12 text-end mt-4"},Cs={class:"card shadow-none border border-light mt-4 mb-4"},Is={class:"row"},Ds={class:"col-12"},Rs={class:"form-group mt-0"},Ms={key:0,class:"fa fa-check me-1"},Ts={class:"form-control rounded-3 me-2 p-0 no-scrollbar position-relative w-[100%] z-index-0 border-light",style:{background:"#fff",height:"400px",overflow:"visible clip","z-index":"30"}},Os={class:"col-12"},Us={class:"form-group mt-4"},Bs={key:0,class:"fa fa-check me-1"},Ns={class:"card bg-transparent shadow-xs p-3 rounded-3"},qs={class:"mx-1 rounded-3 row backdrop-blur-md blur-light",style:{background:"#ffffffac !important"}},As={class:"col-lg-12 pb-0 pt-4 text-white px-4",style:{"min-height":"300px"}},Es={class:""},Ls={class:"row"},Fs={class:"mb-3 w-[100%]"},zs={class:"text-foreground",style:{"font-size":"20px","font-weight":"700"}},Vs={key:0,class:"col-12"},Ps=["src"],Gs=["disabled"],Hs={key:1,class:"col-12"},js={class:"bg-success-light rounded-3 h-[100%] border-bottom-end-radius-0"},Qs={class:"form-group no-scrollbar",style:{height:"300px","overflow-y":"scroll"}},Ws={class:"card bg-transparent shadow-xs p-3 rounded-3"},Ys={class:"mx-1 rounded-3 row backdrop-blur-md blur-light",style:{background:"#ffffffac !important"}},Js={class:"col-lg-12 pb-0 pt-4 text-white px-4",style:{"min-height":"300px"}},Ks={class:""},Xs={class:"row"},Zs={class:"col-12"},$s={class:"position-relative w-[100%] rounded-3 bg-success-light text-center align-items-center mb-3",style:{height:"300px",cursor:"pointer"}},et=["src"];function st(o,e,a,v,t,r){const i=x("base-button"),g=x("SDGSelect"),R=x("QuillEditor"),C=x("BaseButton"),B=x("VuePictureCropper"),p=x("modal");return l(),d("div",null,[s("div",Ee,[s("div",Le,[s("div",Fe,[s("div",ze,[s("div",Ve,[s("img",{src:t.raiser.bannerImage||"/img/backgrounds/banner.placeholder.png",style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-[100%] h-[100%] position-absolute"},null,8,Pe),t.raiser.bannerImage?h("",!0):(l(),d("span",{key:0,onClick:e[0]||(e[0]=n=>{t.showBannerModal=!0,r.openImageSelectionDialog()}),class:"rounded-3 border bg-light opacity-8 d-inline-block p-3 mt-8 border-white text-lg"},[...e[25]||(e[25]=[c(" Click here to upload a picture. ",-1),s("br",null,null,-1),s("span",{class:"text-sm"}," It will be worth a thousand words.",-1)])])),s("div",{onClick:e[1]||(e[1]=n=>{t.updatingTimeline=!1,t.showBannerModal=!0,r.openImageSelectionDialog()}),class:"position-absolute top-0 end-0 px-3"},[...e[26]||(e[26]=[s("button",{class:"mt-2 btn btn-sm rounded-circle border-0 btn-outline-dark bg-gradient-dark btn-outline-dark bg-gradient-dark text-dark px-0 text-center float-end",style:{width:"35px !important",height:"35px !important"}},[s("i",{class:"fa fa-pen text-white",style:{"font-size":"12px"}})],-1)])]),s("input",Ge,null,512)]),e[29]||(e[29]=s("div",{class:"row mt-5"},[s("div",{class:"col-12"},[s("div",{class:"text-lg"}," Update timeline ")])],-1)),s("div",He,[(l(!0),d(M,null,T(t.timelineImages,(n,L)=>(l(),d("div",{class:"col-4 mt-4",key:L},[s("div",{class:"card border shadow-none position-relative cursor-pointer",style:{height:"100px"},onClick:or=>t.showRemoveTimelineImageModal=L+1},[s("img",{class:"mask rounded-3 opacity-10",style:{"object-fit":"cover"},src:n},null,8,Qe),e[27]||(e[27]=s("div",{class:"pt-4 pb-3 text-center position-relative"},[s("div",{class:"btn bg-transparent"},[s("i",{class:"fa fa-times text-error opacity-7 mx-2"})])],-1))],8,je)]))),128)),t.timelineImages.length<3?(l(),d("div",We,[s("div",{class:"card border shadow-none position-relative cursor-pointer",onClick:e[2]||(e[2]=n=>{t.updatingTimeline=!0,t.showBannerModal=!0,r.openImageSelectionDialog()})},[...e[28]||(e[28]=[s("div",{class:"mask rounded-3 bg-success-light"},null,-1),s("div",{class:"pt-3 pb-2 text-center position-relative"},[s("div",{class:"h1"},[s("i",{class:"fa fa-plus text-secondary"})])],-1)])])])):h("",!0)])])]),s("div",Ye,[s("div",Je,[e[36]||(e[36]=s("div",{class:"card-header pb-0"},[s("h5",null,"Basic Information"),s("p",{class:"text-sm"},"What donors see first")],-1)),s("form",{onSubmit:e[6]||(e[6]=k((...n)=>r.saveBasicInfo&&r.saveBasicInfo(...n),["prevent"])),class:"card-body"},[s("div",Ke,[s("div",Xe,[s("div",null,[e[30]||(e[30]=s("label",{class:"form-label text-lg"},"Title",-1)),t.raiser.title?(l(),d("label",{key:0,class:S(["float-end",`text-${t.raiser.title.length>19&&t.raiser.title.length<101?"success":"secondary"}`])},[s("span",{class:S(`text-${t.raiser.title.length<101&&t.raiser.title.length>19?"success":"secondary"}`)},[t.raiser.title.length>19&&t.raiser.title.length<101?(l(),d("i",Ze)):h("",!0),c(" "+u(t.raiser.title.length||0)+" Character"+u(t.raiser.title.length==1?"":"s")+" | "+u(t.raiser.title.length>19?"Max: 75":"Min: 20"),1)],2)],2)):(l(),d("label",$e," 0 Characters | Min 20 ")),s("div",es,[m(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>t.raiser.title=n),class:"form-control form-control-lg text-lg text-lg",type:"text",placeholder:"Title",required:"required"},null,512),[[_,t.raiser.title]])])])])]),s("div",ss,[s("div",ts,[e[32]||(e[32]=s("label",{class:"form-label text-lg mt-4"},"Category",-1)),s("div",os,[m(s("select",{class:"form-control form-control-lg text-lg text-lg","onUpdate:modelValue":e[4]||(e[4]=n=>t.raiser.category=n)},[e[31]||(e[31]=s("option",{disabled:"",selected:""},"Select Category",-1)),(l(!0),d(M,null,T(r.categoryNames,n=>(l(),d("option",{key:n,value:n},u(n),9,rs))),128))],512),[[I,t.raiser.category]])])]),s("div",is,[s("div",null,[e[34]||(e[34]=s("label",{class:"form-label text-lg mt-4"},"Sub Category",-1)),s("div",ns,[m(s("select",{class:"form-control form-control-lg text-lg text-lg","onUpdate:modelValue":e[5]||(e[5]=n=>t.raiser.subCategory=n)},[e[33]||(e[33]=s("option",{disabled:"",selected:""},"Select Sub Category",-1)),(l(!0),d(M,null,T(r.subCategoryNames,n=>(l(),d("option",{key:n,value:n},u(n),9,as))),128))],512),[[I,t.raiser.subCategory]])])])])]),s("div",ls,[s("div",ds,[f(i,{loading:t.savingBasicInfo,type:"secondary",outline:!0,class:"mb-0",nativeType:"submit"},{default:w(()=>[...e[35]||(e[35]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),s("div",cs,[e[42]||(e[42]=s("div",{class:"card-header pb-0"},[s("h5",null,"Locale Information"),s("p",{class:"text-sm"},"Where the cause you are raising for is located, or where you intend to use the support")],-1)),s("form",{onSubmit:e[9]||(e[9]=k((...n)=>r.saveLocaleInfo&&r.saveLocaleInfo(...n),["prevent"])),class:"card-body"},[s("div",us,[s("div",ms,[e[37]||(e[37]=s("label",{class:"form-label text-lg"},"Location",-1)),s("div",gs,[m(s("input",{class:"form-control form-control-lg text-lg","onUpdate:modelValue":e[7]||(e[7]=n=>t.raiser.location=n),placeholder:"Apartment or House Number, Street, City, State or Province"},null,512),[[_,t.raiser.location]])])]),e[40]||(e[40]=P('<div class="col-md-6"><label class="form-label text-lg mt-4">Country</label><div class="input-group"><select class="form-control form-control-lg text-lg text-lg" disabled=""><option value="Nigeria">Nigeria</option></select></div></div>',1)),s("div",ps,[e[39]||(e[39]=s("label",{class:"form-label text-lg mt-4"},"Mode",-1)),s("div",hs,[m(s("select",{class:"form-control form-control-lg text-lg","onUpdate:modelValue":e[8]||(e[8]=n=>t.raiser.type=n)},[...e[38]||(e[38]=[s("option",{disabled:"",selected:""},"Select Fundraising Mode",-1),s("option",{value:"PERSONAL"},"Personal",-1),s("option",{value:"TEAM"},"Team",-1),s("option",{value:"CORPORATE"},"Corporate",-1)])],512),[[I,t.raiser.type]])])])]),s("div",fs,[s("div",bs,[f(i,{loading:t.savingLocaleInfo,nativeType:"submit",type:"secondary",outline:!0,class:"my-0"},{default:w(()=>[...e[41]||(e[41]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),s("div",vs,[e[48]||(e[48]=s("div",{class:"card-header pb-0"},[s("h5",null,"Goals"),s("p",{class:"text-sm"},"What success means to you")],-1)),s("form",{onSubmit:e[12]||(e[12]=k((...n)=>r.saveGoalInfo&&r.saveGoalInfo(...n),["prevent"])),class:"card-body"},[s("div",ys,[s("div",xs,[e[43]||(e[43]=s("label",{class:"form-label text-lg"},"Sustainable Development Goals (SDGs)",-1)),f(g,{values:t.raiser.sdgs},null,8,["values"])]),s("div",ws,[e[46]||(e[46]=s("label",{class:"form-label text-lg"},"Fundraising Goal",-1)),s("div",Ss,[e[44]||(e[44]=s("span",{class:"input-group-text px-3"},[s("i",{class:"fas","aria-hidden":"true"},"₦")],-1)),m(s("input",{class:"form-control form-control-lg text-lg",required:"","onUpdate:modelValue":e[10]||(e[10]=n=>t.raiser.goal=n),onInput:e[11]||(e[11]=n=>t.raiser.goal=r.formatAmount(t.raiser.goal)),placeholder:"Your dream amount"},null,544),[[_,t.raiser.goal]]),e[45]||(e[45]=s("button",{disabled:"",type:"button",class:"px-3 mb-0",style:{"border-radius":"0px 1.83rem 1.83rem 0px",border:"0px",background:"#fff"}},[s("i",{class:"badge bg-gradient-dark text-white text-bold","aria-hidden":"true"},"NGN")],-1))])])]),s("div",ks,[s("div",_s,[f(i,{loading:t.savingGoalInfo,nativeType:"submit",type:"secondary",outline:!0,class:"mb-0"},{default:w(()=>[...e[47]||(e[47]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)]),s("div",Cs,[e[53]||(e[53]=s("div",{class:"card-header pb-0"},[s("h5",null,"Your Story"),s("p",{class:"text-sm"},"Tell donors why you need their support")],-1)),s("form",{onSubmit:e[15]||(e[15]=k((...n)=>r.saveStory&&r.saveStory(...n),["prevent"])),class:"card-body"},[s("div",Is,[s("div",Ds,[s("div",Rs,[e[49]||(e[49]=s("label",{class:"text-foreground text-lg"}," Story ",-1)),s("label",{class:S(["float-end",`text-${r.storyWordCount>99&&r.storyWordCount<1001?"success":"secondary"}`])},[r.storyWordCount>99&&r.storyWordCount<1001?(l(),d("i",Ms)):h("",!0),c(" "+u(r.storyWordCount||0)+" Word"+u(r.storyWordCount==1?"":"s")+" | "+u(r.storyWordCount>99?"Max: 1000":"Min: 100"),1)],2),s("div",Ts,[f(R,{theme:"bubble",contentType:"html",content:t.raiser.story,"onUpdate:content":e[13]||(e[13]=n=>t.raiser.story=n),placeholder:"Hi, my name is Sina and I am fundraising for..."},null,8,["content"])])])]),s("div",Os,[s("div",Us,[e[51]||(e[51]=s("label",{class:"text-foreground"},[s("span",{class:"text-lg"},"Summary"),s("span",{class:"text-sm mx-2"},"(When present, this will replace your story on shared posters)")],-1)),s("label",{class:S(["float-end",`text-${r.summaryCharacterCount>20&&r.summaryCharacterCount<501?"success":"secondary"}`])},[r.summaryCharacterCount>20&&r.summaryCharacterCount<501?(l(),d("i",Bs)):h("",!0),c(" "+u(r.summaryCharacterCount||0)+" Character"+u(r.summaryCharacterCount==1?"":"s")+" | "+u(r.summaryCharacterCount>20?"Max: 500":"Min: 20"),1)],2),m(s("textarea",{class:"form-control text-lg me-2 rounded-3 border-light no-scrollbar position-relative w-[100%]","onUpdate:modelValue":e[14]||(e[14]=n=>t.raiser.summary=n),style:{background:"#fff",height:"150px",overflow:"visible clip","z-index":"30"}},null,512),[[_,t.raiser.summary]]),t.raiser.summarySuggestionCount<=2?(l(),G(C,{key:0,class:"mt-4 mb-0 px-4 btn-sm text-sm",loading:t.suggestingSummary,type:"secondary",outline:!0,size:"sm",onClick:k(r.generateSummary,["prevent"])},{default:w(()=>[...e[50]||(e[50]=[c(" Try Suggestion ",-1)])]),_:1},8,["loading","onClick"])):h("",!0)]),f(C,{class:"float-end mt-2 mb-0",loading:t.savingStory,type:"secondary",outline:!0,nativeType:"submit"},{default:w(()=>[...e[52]||(e[52]=[c(" Save ",-1)])]),_:1},8,["loading"])])])],32)])])])]),f(p,{show:t.showBannerModal,"onUpdate:show":e[21]||(e[21]=n=>t.showBannerModal=n),"body-classes":"p-0","modal-classes":"modal-lg"},{default:w(()=>[s("div",Ns,[s("button",{onClick:e[16]||(e[16]=n=>r.closeBannerModal()),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 text-success backdrop-blur-md bg-secondary border-0 px-2 py-1 rounded-3"},[...e[54]||(e[54]=[s("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),s("div",qs,[s("div",As,[s("div",Es,[s("div",Ls,[s("div",Fs,[s("span",zs,u(t.updatingTimeline?"Update Your Fundraiser's Timeline":`Update Your
                                        Fundraiser's Banner`),1)]),t.showImageCropper?h("",!0):(l(),d("div",Vs,[s("div",{onClick:e[18]||(e[18]=(...n)=>r.openImageSelectionDialog&&r.openImageSelectionDialog(...n)),class:"position-relative w-[100%] rounded-3 bg-success-light text-center align-items-center mb-3",style:{height:"300px",cursor:"pointer"}},[s("img",{src:t.photoUrl||"/img/backgrounds/banner.placeholder.png",style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-[100%] h-[100%] position-absolute"},null,8,Ps),e[55]||(e[55]=s("span",{class:"rounded-3 border backdrop-blur-md blur-darker opacity-10 d-inline-block p-3 mt-7 text-white border-white text-lg"},[s("i",{class:"fa fa-2x fa-camera"}),s("br"),c(" Click to update ")],-1)),s("input",{onChange:e[17]||(e[17]=(...n)=>r.openImageCropper&&r.openImageCropper(...n)),class:"d-none",type:"file",accept:"image/*",ref:"imageFileUploadInput"},null,544)]),s("button",{type:"button",onClick:e[19]||(e[19]=n=>t.photoUrl=""),disabled:t.photoUrl==""?!0:void 0,class:"btn btn-outline-secondary bg-background btn-sm float-start position-sticky bottom-0 mx-1 px-2"},[...e[56]||(e[56]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Remove ",-1)])],8,Gs)])),t.showImageCropper?(l(),d("div",Hs,[s("div",js,[s("div",Qs,[f(B,{boxStyle:{width:"100%",height:"300px",backgroundColor:"#EDF9E8",margin:"0","border-radius":"8px","overflow-y":"clip","overflow-x":"clip"},img:t.picture,options:{viewMode:2,dragMode:"crop",aspectRatio:16/9}},null,8,["img"])]),s("button",{type:"button",onClick:e[20]||(e[20]=n=>{t.photoUrl="",t.showImageCropper=!1}),class:"btn btn-outline-secondary bg-background btn-sm float-start position-sticky bottom-0 mx-3 px-3"},[...e[57]||(e[57]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Cancel ",-1)])]),f(i,{type:"button",onClick:r.cropImage,size:"sm",loading:t.croppingImage,class:"btn btn-outline-secondary bg-background btn-sm float-end position-sticky bottom-0 mx-3 px-3"},{default:w(()=>[...e[58]||(e[58]=[s("svg",{fill:"#7E7E7E",height:"24",width:"24",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330"},[s("path",{id:"XMLID_28_",d:`M315,240h-45V81.213l55.606-55.606c5.858-5.858,5.858-15.355,0-21.213c-5.857-5.858-15.355-5.858-21.213,0
                                                  L248.787,60H90V15c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v45H15C6.716,60,0,66.716,0,75s6.716,15,15,15h45v158.787
                                                  L4.394,304.394c-5.858,5.858-5.858,15.355,0,21.213C7.322,328.536,11.161,330,15,330c3.839,0,7.678-1.464,10.606-4.394L81.213,270
                                                  H240v45c0,8.284,6.716,15,15,15c8.284,0,15-6.716,15-15v-45h45c8.284,0,15-6.716,15-15S323.284,240,315,240z M90,90h128.787
                                                  L90,218.787V90z M240,111.213V240H111.213L240,111.213z`})],-1),c(" Crop ",-1)])]),_:1},8,["onClick","loading"])])])):h("",!0)]),f(C,{class:"float-end btn-success mb-4 mt-3",loading:t.savingImage,disabled:t.photoUrl==t.raiser.bannerImage,onClick:r.saveCroppedImage},{default:w(()=>[...e[59]||(e[59]=[c(" Keep ",-1)])]),_:1},8,["loading","disabled","onClick"])])])])])]),_:1},8,["show"]),f(p,{show:t.showRemoveTimelineImageModal,"onUpdate:show":e[24]||(e[24]=n=>t.showRemoveTimelineImageModal=n),"body-classes":"p-0","modal-classes":"modal-lg"},{default:w(()=>[s("div",Ws,[s("button",{onClick:e[22]||(e[22]=n=>t.showRemoveTimelineImageModal=!1),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 text-success backdrop-blur-md bg-secondary border-0 px-2 py-1 rounded-3"},[...e[60]||(e[60]=[s("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),s("div",Ys,[s("div",Js,[s("div",Ks,[s("div",Xs,[e[62]||(e[62]=s("div",{class:"mb-3 w-[100%]"},[s("span",{class:"text-foreground",style:{"font-size":"20px","font-weight":"700"}}," Clear This Content From Your Fundraiser's Timeline ")],-1)),s("div",Zs,[s("div",$s,[s("img",{src:t.timelineImages[t.showRemoveTimelineImageModal-1],style:{"object-fit":"contain",left:"0"},class:"rounded-3 w-[100%] h-[100%] position-absolute"},null,8,et)]),s("button",{type:"button",onClick:e[23]||(e[23]=n=>r.removeTimelineImage(t.showRemoveTimelineImageModal)),class:"btn btn-outline-secondary bg-background btn-sm float-end position-sticky bottom-0 mx-1 px-2"},[...e[61]||(e[61]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M6 18L12 12L18 18M18 6L11.9989 12L6 6",stroke:"#7E7E7E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" Remove ",-1)])])])])])])])])]),_:1},8,["show"])])}const tt=D(Ae,[["render",st]]);const ot={name:"modal",components:{BaseButton:E},props:{raiser:{type:String,default:""},raisers:Array,show:Boolean,showClose:{type:Boolean,default:!0},type:{type:String,default:"mini",validator(o){return["","notice","mini"].indexOf(o)!==-1},description:'Modal type (notice|mini|"") '},modalClasses:{type:[Object,String],description:"Modal dialog css classes"},modalContentClasses:{type:[Object,String],description:"Modal dialog content css classes"},gradient:{type:String,description:"Modal gradient type (error, primary etc)"},headerClasses:{type:[Object,String],description:"Modal Header css classes"},bodyClasses:{type:[Object,String],description:"Modal Body css classes"},footerClasses:{type:[Object,String],description:"Modal Footer css classes"},animationDuration:{type:Number,default:500,description:"Modal transition duration"}},data(){return{request:{name:"",email:"",variant:"regular",raiserReference:""},selectedRaiser:{},requestingDonation:!1}},mounted(){this.request.raiserReference=this.raisers[0].reference,this.selectedRaiser=this.raisers[0]},updated(){this.request.raiserReference=this.raisers[0].reference,this.selectedRaiser=this.raisers[0]},methods:{closeModal(){this.$emit("update:show",!1),this.$emit("close")},setRaiser(){this.selectedRaiser=this.raisers.find(o=>o.reference===this.request.raiserReference)},async requestDonation(){const o=y();try{this.requestingDonation=!0;const e={...JSON.parse(JSON.stringify(this.request))},a=await b.sendDonationRequest(e);o.toast({message:"Done",type:"success",duration:5e3}),this.closeModal()}catch(e){o.toast({message:e.message||"There was an error saving your feedback.",type:"error",duration:5e3})}this.requestingDonation=!1}},watch:{show(o){let e=document.body.classList;o?e.add("modal-open"):e.remove("modal-open")}}},rt=["aria-hidden"],it={class:"modal-dialog modal-dialog-centered"},nt={class:"card bg-transparent shadow-xs p-3 modal-fade-in rounded-3 mx-1"},at={class:"mx-1 rounded-3 row",style:{overflow:"hidden"}},lt={class:"col-lg-6 pb-0 pt-4 text-white px-4 bg-white/80",style:{"min-height":"300px"}},dt={class:"px-2"},ct={class:"form-group mb-2 pb-1 mt-4"},ut={class:"form-group mb-2 pb-1 mt-4"},mt={class:"form-group mb-2 pb-1 mt-4"},gt={class:"form-group mb-2 pb-1 mt-4 opacity-0",style:{"pointer-events":"none"}},pt=["value"],ht={class:"col-lg-6 mt-4 mt-lg-0 pb-0 pt-4 text-white px-4 backdrop-blur-md blur-darker no-scrollbar",style:{"overflow-x":"clip","overflow-y":"scroll","min-height":"300px"}},ft={class:"px-3 unclickable"},bt={class:"text-white mb-2"},vt=["src"],yt={class:"pt-2 text-white pb-4 pb-lg-2"};function xt(o,e,a,v,t,r){const i=x("BaseButton");return m((l(),d("div",{class:S(["modal backdrop-blur-md fade modal-lg",[{"show d-block":a.show},{"d-none":!a.show},{"modal-mini":a.type==="mini"}]]),onClick:e[6]||(e[6]=k((...g)=>r.closeModal&&r.closeModal(...g),["self"])),tabindex:"-1",role:"dialog","aria-hidden":!a.show},[s("div",it,[s("div",{class:S(["modal-content",[a.gradient?`bg-gradient-${a.gradient}`:"",a.modalContentClasses]])},[s("div",{class:S(["modal-body",a.bodyClasses])},[s("div",nt,[s("button",{onClick:e[0]||(e[0]=g=>r.closeModal()),class:"position-absolute end-0 me-4 mt-1 btn btn-sm z-index-3 backdrop-blur-md bg-secondary rounded-3 px-2 py-1"},[...e[7]||(e[7]=[s("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),s("div",at,[s("div",lt,[s("form",{class:"form-section active",onSubmit:e[5]||(e[5]=k(g=>r.requestDonation(),["prevent"]))},[s("div",dt,[s("div",ct,[e[8]||(e[8]=s("label",{class:"text-dark text-sm mb-1"},[c(" Name or Alias "),s("span",{class:"text-success"},"*")],-1)),m(s("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=g=>t.request.name=g),class:"form-control",placeholder:"Mr/Mrs Kind Giver"},null,512),[[_,t.request.name]])]),s("div",ut,[e[9]||(e[9]=s("label",{class:"text-dark text-sm mb-1"},[c(" Email "),s("span",{class:"text-success"},"*")],-1)),m(s("input",{required:"",type:"email","onUpdate:modelValue":e[2]||(e[2]=g=>t.request.email=g),class:"form-control",placeholder:"kind.donor@mail.com"},null,512),[[_,t.request.email]])]),s("div",mt,[e[11]||(e[11]=s("label",{class:"text-dark text-sm mb-1"}," Type Of Request ",-1)),m(s("select",{required:"","onUpdate:modelValue":e[3]||(e[3]=g=>t.request.variant=g),class:"form-control"},[...e[10]||(e[10]=[s("option",{value:"regular"}," Community",-1),s("option",{value:"corporate"},"Corporate",-1)])],512),[[I,t.request.variant]])]),s("div",gt,[e[12]||(e[12]=s("label",{class:"text-dark text-sm mb-1"},[c(" Raiser "),s("span",{class:"text-success"},"*")],-1)),m(s("select",{required:"","onUpdate:modelValue":e[4]||(e[4]=g=>t.request.raiserReference=g),class:"form-control"},[(l(!0),d(M,null,T(a.raisers,g=>(l(),d("option",{key:g.reference,value:g.reference},u(g.title),9,pt))),128))],512),[[I,t.request.raiserReference]])]),f(i,{class:"float-end btn-success mb-5 mt-5",loading:t.requestingDonation,nativeType:"submit"},{default:w(()=>[...e[13]||(e[13]=[c(" Request ",-1)])]),_:1},8,["loading"])])],32)]),s("div",ht,[s("div",null,[e[17]||(e[17]=s("h6",{class:"text-end w-[100%] text-white text-xs"},"Preview",-1)),s("div",ft,[s("h4",bt,"Hello, "+u(t.request.name.trim()||"Kind Giver"),1),e[16]||(e[16]=s("p",{class:"text-white w-80"}," Please support my fundraising campaign... ",-1)),s("img",{src:`/img/flyers/${t.request.variant}.png`,alt:".",style:{width:"80%","object-fit":"contain"}},null,8,vt),s("div",yt,[e[14]||(e[14]=c(" Sincerely, ",-1)),e[15]||(e[15]=s("br",null,null,-1)),s("span",null,u(t.selectedRaiser.organizerName),1)])])])])])])],2)],2)])],10,rt)),[[O,a.show]])}const wt=D(ot,[["render",xt],["__scopeId","data-v-bc0c39ed"]]);const St={name:"OfflineDonation",props:{show:{type:Boolean,default:!1},raiser:{type:Object,required:!0}},data(){return{loading:!1,form:{name:"",email:"",amount:"",currency:"NGN",paymentProvider:"CASH"}}},methods:{closeModal(){this.$emit("update:show",!1),this.resetForm()},resetForm(){this.form={name:"",email:"",amount:"",currency:"NGN",paymentProvider:"CASH"}},async submitOfflineDonation(){this.loading=!0;const o=y();try{const e={...this.form,amount:this.form.amount.toString()};await b.addOfflineDonation(this.raiser.reference,e),o.toast({message:"Offline donation recorded successfully",type:"success",duration:5e3}),this.$emit("success"),this.closeModal()}catch(e){o.toast({message:e.message||"Failed to record donation",type:"error",duration:5e3})}finally{this.loading=!1}}}},kt=["aria-hidden"],_t={class:"modal-dialog modal-dialog-centered"},Ct={class:"modal-content bg-white/90 rounded-3"},It={class:"modal-header"},Dt={class:"modal-body"},Rt={class:"mb-3"},Mt={class:"mb-3"},Tt={class:"mb-3"},Ot={class:"input-group"},Ut={class:"input-group-text"},Bt={class:"mb-3"},Nt={class:"mb-3"},qt={class:"d-flex justify-content-end"},At=["disabled"],Et={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"};function Lt(o,e,a,v,t,r){return m((l(),d("div",{class:S(["modal fade",[{"show d-block":a.show},{"d-none":!a.show}]]),onClick:e[8]||(e[8]=k((...i)=>r.closeModal&&r.closeModal(...i),["self"])),tabindex:"-1",role:"dialog","aria-hidden":!a.show},[s("div",_t,[s("div",Ct,[s("div",It,[e[9]||(e[9]=s("h5",{class:"modal-title"},"Record Offline Donation",-1)),s("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...i)=>r.closeModal&&r.closeModal(...i)),"aria-label":"Close"})]),s("div",Dt,[s("form",{onSubmit:e[7]||(e[7]=k((...i)=>r.submitOfflineDonation&&r.submitOfflineDonation(...i),["prevent"]))},[s("div",Rt,[e[10]||(e[10]=s("label",{class:"form-label"},[c("Donor Name "),s("span",{class:"text-danger"},"*")],-1)),m(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=i=>t.form.name=i),required:"",placeholder:"e.g. John Doe"},null,512),[[_,t.form.name]])]),s("div",Mt,[e[11]||(e[11]=s("label",{class:"form-label"},"Email (Optional)",-1)),m(s("input",{type:"email",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=i=>t.form.email=i),placeholder:"donor@example.com"},null,512),[[_,t.form.email]])]),s("div",Tt,[e[12]||(e[12]=s("label",{class:"form-label"},[c("Amount "),s("span",{class:"text-danger"},"*")],-1)),s("div",Ot,[s("span",Ut,u(t.form.currency),1),m(s("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=i=>t.form.amount=i),required:"",min:"1",step:"0.01"},null,512),[[_,t.form.amount]])])]),s("div",Bt,[e[14]||(e[14]=s("label",{class:"form-label"},[c("Currency "),s("span",{class:"text-danger"},"*")],-1)),m(s("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=i=>t.form.currency=i),required:""},[...e[13]||(e[13]=[s("option",{value:"NGN"},"NGN",-1),s("option",{value:"USD"},"USD",-1),s("option",{value:"GBP"},"GBP",-1),s("option",{value:"EUR"},"EUR",-1)])],512),[[I,t.form.currency]])]),s("div",Nt,[e[16]||(e[16]=s("label",{class:"form-label"},[c("Payment Method "),s("span",{class:"text-danger"},"*")],-1)),m(s("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=i=>t.form.paymentProvider=i),required:""},[...e[15]||(e[15]=[P('<option value="CASH" data-v-41ebf81a>Cash</option><option value="TRANSFER" data-v-41ebf81a>Bank Transfer</option><option value="POS" data-v-41ebf81a>POS Terminal</option><option value="CHEQUE" data-v-41ebf81a>Cheque</option><option value="OTHER" data-v-41ebf81a>Other</option>',5)])],512),[[I,t.form.paymentProvider]])]),s("div",qt,[s("button",{type:"button",class:"btn btn-secondary me-2",onClick:e[6]||(e[6]=(...i)=>r.closeModal&&r.closeModal(...i))},"Cancel"),s("button",{type:"submit",class:"btn btn-primary",disabled:t.loading},[t.loading?(l(),d("span",Et)):h("",!0),e[17]||(e[17]=c(" Record Donation ",-1))],8,At)])],32)])])])],10,kt)),[[O,a.show]])}const Ft=D(St,[["render",Lt],["__scopeId","data-v-41ebf81a"]]);const zt={components:{BaseButton:E,Fire:Y,Modal:z,DonationsTable:K,RequestDonation:wt,OfflineDonation:Ft},data(){return{currentStep:0,loading:{raiser:!0,transfers:!0},showRequestModal:!1,showOfflineModal:!1,raiser:{},user:{},searchQuery:"",debouncedSearchQuery:"",searchTimeout:null,columns:[{label:"Giver",key:"name",formatter:o=>o||"Anonymous"},{label:"Amount",key:"amount",formatter:o=>`₦${A(o)}`},{label:"Date",key:"date"},{label:"Fundraiser",key:"raiserTitle",sort:!1}],donations:[],donationCount:0,sdgs:N.get("sdgs"),sdgColors:N.get("sdgColors"),selectedDonation:{},showDonationModal:!1}},created(){const o=J();this.user=o.$state,this.fetchRaiser()},watch:{searchQuery(o){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.debouncedSearchQuery=o},500)}},methods:{formatAmount:A,async loadRaiserDetails(){const o=await b.getRaiserByReference(this.raiser.reference);this.raiser=o},async fetchRaiser(){this.loading.raiser=!0;try{const{reference:o}=this.$route.params;if(!o){this.$router.push("/me/raisers");return}this.raiser.reference=o}catch{this.errorLoadingRaiser=!0}await this.loadRaiserDetails(),this.loading.raiser=!1},async searchDonations(o){const{sort:e,direction:a,page:v=0,size:t=50,search:r}=o||{};try{const i={reference:this.raiser.reference,page:v,size:t,sort:e,direction:a,search:r};return await b.getMyFundRaiserDonations(i)}catch(i){y().toast({message:i.message||"Your donation information could not be loaded<br>Please reload the page",type:"error",duration:5e3})}},viewDonation(o){this.selectedDonation=o,this.showDonationModal=!0},async downloadReceipt(o){q.downloadCreatorReceipt(o)},async handleOfflineDonationSuccess(){await this.loadRaiserDetails(),this.searchDonations()}}},Vt={class:""},Pt={class:"container-fluid py-4"},Gt={class:"row position-relative"},Ht={class:"col-lg-4 order-lg-2 px-4"},jt={class:"position-sticky min-vh-25 no-scrollbar",style:{top:"100px"}},Qt={class:"card shadow-none h-[100%] mt-4 mt-lg-0 border border-light",style:{}},Wt={class:"card-header p-3 pb-0"},Yt={class:"row"},Jt={class:"col-6 d-flex"},Kt={class:"btn badge bg-primary text-white"},Xt={class:"col-6"},Zt={class:"card-body p-3 py-3"},$t={class:"d-flex rounded-3 p-3 position-relative ps-1"},eo={class:"my-auto text-foreground z-index-3 ps-2"},so={class:"col-lg-8 border border-light rounded-3"},to={class:"page-header min-vh-25 bg-success-light overflow-none mb-4",style:{"border-radius":"0 0 0.5rem 0.5rem"}},oo={class:"container"},ro={class:"row"},io={class:"col-11 text-start mx-auto mb-0 py-5"},no={class:"row w-[100%] w-sm-80 w-md-70"},ao={class:"col-12 col-sm-9"},lo={class:"input-group"},co=["onClick"],uo=["onClick"],mo={key:0},go={class:"card bg-background/95 p-3 modal-fade-in shadow-xs rounded-3"},po={class:"card-body position-relative mx-1 rounded-3 row backdrop-blur-md border border-light mb-0 rounded-3"},ho={class:"col-lg-12 py-5 text-foreground px-2 px-sm-5 text-start position-relative no-scrollbar",style:{overflow:"hidden","overflow-y":"scroll",height:"400px"}},fo={class:"mx-3 mx-md-0"},bo={class:"row"},vo={class:"col-3 position-relative mt-2",style:{scale:"0.2"}},yo={class:"w-[100%] position-absolute ms-n8 pt-10"},xo={class:"row mb-3 pt-3"},wo={class:"col-12 mb-3"},So={class:"col-12 mb-3"},ko={class:"col-12 mb-3"},_o={class:"col-12 mb-3"},Co={class:"col-12 mb-3"},Io={class:"col-12 mb-3"},Do={class:"badge badge text-success border border-0 border-success bg-success-light px-3"},Ro={class:"col-12 mb-4"},Mo={class:"card-footer mt-0 text-center px-3 row"},To={class:"backdrop-blur-md px-4 py-3 col-12 rounded-3"},Oo={class:"row"},Uo={class:"col-12 text-end"};function Bo(o,e,a,v,t,r){const i=x("DonationsTable"),g=x("Fire"),R=x("Modal"),C=x("RequestDonation"),B=x("OfflineDonation");return l(),d("div",null,[s("section",Vt,[s("div",Pt,[s("div",Gt,[s("div",Ht,[s("div",jt,[s("div",Qt,[s("div",Wt,[s("div",Yt,[s("div",Jt,[s("span",Kt,u(t.raiser.donationCount)+" Contributions ",1)]),s("div",Xt,[s("span",{onClick:e[0]||(e[0]=p=>t.showOfflineModal=!0),class:"btn badge bg-secondary ms-auto text-white float-end"}," + Offline ")])])]),s("div",Zt,[e[11]||(e[11]=s("h5",null,"Received Donations",-1)),e[12]||(e[12]=s("p",{class:"text-sm"},"This is the total of donations you received.",-1)),s("div",$t,[e[10]||(e[10]=s("div",{class:"mask opacity-10 z-index-0 rounded-3 bg-gray-100 border border-success"},null,-1)),s("h4",eo,[e[9]||(e[9]=s("span",{class:"text-sm me-1"},"₦",-1)),c(" "+u(r.formatAmount(t.raiser.raisedAmount)),1)]),s("a",{onClick:e[1]||(e[1]=p=>t.showRequestModal=!0),class:"btn btn-success mb-0 ms-auto z-index-3"},"Request")])])])])]),s("div",so,[s("div",to,[e[15]||(e[15]=s("div",{class:"mask",style:{"background-image":"url('/img/shapes/waves-green.png')",filter:"blur(4px)",opacity:"0.05 !important"}},null,-1)),s("div",oo,[s("div",ro,[s("div",io,[e[14]||(e[14]=s("h3",{class:"text-foreground mb-3"}," Search Donations ",-1)),s("form",no,[s("div",ao,[s("div",lo,[e[13]||(e[13]=s("span",{class:"input-group-text"},[s("i",{class:"text-foreground px-2 fa fa-search"})],-1)),m(s("input",{required:"",type:"text",class:"form-control text-secondary","onUpdate:modelValue":e[2]||(e[2]=p=>t.searchQuery=p),placeholder:"Search giver's name or amount"},null,512),[[_,t.searchQuery]])])])])])])])]),f(i,{hasActions:!1,loadAsync:!0,selectedRow:t.selectedDonation,"onUpdate:selectedRow":[e[3]||(e[3]=p=>t.selectedDonation=p),r.viewDonation],apiUrl:"/me/donations",fetchData:r.searchDonations,filterQuery:t.debouncedSearchQuery,columns:t.columns},{actions:w(({row:p})=>[s("button",{class:"btn btn-outline-success border-light btn-sm rounded-2 text-sm px-2 me-3",onClick:k(n=>r.viewDonation(p),["stop"])}," View ",8,co),s("button",{class:"btn btn-white text-success btn-sm px-1 rounded-1 border border-light border-success text-center",title:"Print Receipt",onClick:k(n=>r.downloadReceipt(p.reference),["stop"])},[...e[16]||(e[16]=[s("i",{class:"fa fa-receipt",style:{"font-size":"16px"}},null,-1)])],8,uo)]),_:1},8,["selectedRow","fetchData","filterQuery","columns","onUpdate:selectedRow"])])])])]),(l(),d("div",mo,[f(R,{show:t.showDonationModal,"onUpdate:show":e[6]||(e[6]=p=>t.showDonationModal=p),"body-classes":"p-0","modal-classes":"modal-lg position-relative"},{default:w(()=>[s("div",go,[s("button",{onClick:e[4]||(e[4]=p=>t.showDonationModal=!1),class:"position-absolute end-0 me-4 mt-1 btn btn-sm backdrop-blur-md bg-secondary rounded-3 rounded-3 px-2 py-1",style:{"z-index":"1000000"}},[...e[17]||(e[17]=[s("i",{class:"fa fa-times text-white",style:{"font-size":"15px"}},null,-1)])]),s("div",po,[s("div",ho,[s("div",fo,[s("div",bo,[e[18]||(e[18]=s("div",{class:"col-9"},[s("h4",{class:"text-start text-foreground pb-2"},"Contribution Summary")],-1)),s("div",vo,[s("div",yo,[f(g)])])]),e[29]||(e[29]=s("hr",{class:"horizontal dark"},null,-1)),s("div",xo,[s("div",wo,[e[19]||(e[19]=s("strong",null," To: ",-1)),c(" "+u(t.selectedDonation.raiserTitle),1)]),s("div",So,[e[20]||(e[20]=s("strong",null,"Giver:",-1)),c(" "+u(t.selectedDonation.name),1)]),s("div",ko,[e[21]||(e[21]=s("strong",null,"Beneficiary:",-1)),c(" "+u(t.selectedDonation.raiserOrganizerName),1)]),s("div",_o,[e[22]||(e[22]=s("strong",null,"Date:",-1)),c(" "+u(t.selectedDonation.formattedDate),1)]),s("div",Co,[e[23]||(e[23]=s("strong",null,"Amount:",-1)),c(" ₦"+u(r.formatAmount(t.selectedDonation.amount)),1)]),s("div",Io,[e[25]||(e[25]=s("strong",{class:"me-2"},"Category:",-1)),s("span",Do,[c(u(t.selectedDonation.raiserCategory)+" ",1),e[24]||(e[24]=s("i",{class:"fa fa-arrow-right text-foreground mx-2"},null,-1)),c(" "+u(t.selectedDonation.raiserSubCategory),1)])]),s("div",Ro,[e[26]||(e[26]=s("strong",{class:"me-2"},[s("u",null,"Supported Goals")],-1)),e[27]||(e[27]=s("br",null,null,-1)),(l(!0),d(M,null,T(t.selectedDonation.sdgs,(p,n)=>(l(),d("span",{key:n,class:"badge me-1 mb-1",style:V({backgroundColor:"#"+t.sdgColors[p-1]})},u(t.sdgs[p-1]),5))),128))]),e[28]||(e[28]=s("div",{class:"mb-8"},null,-1))]),e[30]||(e[30]=s("hr",null,null,-1))])])]),s("div",Mo,[s("div",To,[s("div",Oo,[s("div",Uo,[s("button",{onClick:e[5]||(e[5]=p=>r.downloadReceipt(t.selectedDonation.reference)),class:"btn btn-outline-success backdrop-blur-md mb-0"}," Print Receipt ")])])])])])]),_:1},8,["show"])])),f(C,{show:t.showRequestModal,"onUpdate:show":e[7]||(e[7]=p=>t.showRequestModal=p),"body-classes":"p-0","modal-classes":"modal",raisers:[t.raiser]},null,8,["show","raisers"]),t.raiser.reference?(l(),G(B,{key:1,show:t.showOfflineModal,"onUpdate:show":e[8]||(e[8]=p=>t.showOfflineModal=p),raiser:t.raiser,onSuccess:r.handleOfflineDonationSuccess},null,8,["show","raiser","onSuccess"])):h("",!0)])}const No=D(zt,[["render",Bo],["__scopeId","data-v-f8f4ffee"]]);const qo={components:{Edit:tt,ContributionHistory:No,ShareSettings:qe},data(){return{currentTab:"Overview",errorLoadingRaiser:!1,loading:!0,raiser:{}}},async mounted(){switch(this.fetchRaiser(),this.$route.hash){case"#general-settings":this.currentTab="General Settings";break;case"#payment-settings":this.currentTab="Payment Settings";break;case"#sharing-settings":this.currentTab="Sharing Settings";break;case"#contributions":this.currentTab="Contribution History";break;default:this.currentTab="Contribution History"}},methods:{async fetchRaiser(){this.loading=!0;try{const{reference:o}=this.$route.params;if(!o){window.location="/me/raisers";return}this.raiser=await b.getRaiserByReference(o)}catch{this.errorLoadingRaiser=!0}this.loading=!1}}},Ao={class:"container-fluid"},Eo={class:"row mb-3"},Lo={class:"col-sm-12 order-sm-0 text-start pt-0"},Fo={class:"lead",style:{"font-size":"30px"}},zo={class:"strong text-foreground mb-0"},Vo={class:"text-lg p-0 mb-3"},Po={key:0,class:"text-success mx-2"},Go={key:1,class:"text-foreground fa fa-edit mx-2"},Ho={key:2,class:"text-secondary fa fa-folder mx-2"},jo=["href"],Qo={class:"row mb-5"},Wo={class:"col-lg-4 col-sm-8 z-index-0"},Yo={class:"nav-wrapper position-relative end-0 border border-light rounded-2"},Jo={class:"nav nav-pills nav-fill p-1"},Ko={class:"nav-item"},Xo={class:"nav-item",role:"presentation"},Zo={class:"nav-item"},$o={class:"row form-section active"},er={class:"row form-section active"},sr={class:"row form-section active"};function tr(o,e,a,v,t,r){const i=x("Edit"),g=x("ContributionHistory"),R=x("ShareSettings");return l(),d("div",null,[s("div",Ao,[s("div",Eo,[s("div",Lo,[s("h1",Fo,[s("span",zo,u(t.currentTab),1)]),s("p",Vo,[t.raiser.status=="PUBLISHED"?(l(),d("span",Po,"🍀")):h("",!0),t.raiser.status=="DRAFT"?(l(),d("i",Go)):h("",!0),t.raiser.status=="ARCHIVED"?(l(),d("i",Ho)):h("",!0),c(" "+u(t.raiser.title)+" ",1),s("a",{class:"text-xs text-success mx-2",target:"_blank",href:`/raisers/${t.raiser.urlPath}`},[...e[3]||(e[3]=[c(" Preview ",-1),s("i",{class:"fa fa-arrow-right mx-1 text-xs",style:{rotate:"-45deg"}},null,-1)])],8,jo)])])]),s("div",Qo,[s("div",Wo,[s("div",Yo,[s("ul",Jo,[s("li",Ko,[s("a",{href:"#contributions",class:S(["nav-link mb-0 px-0 py-1 cursor-pointer",t.currentTab=="Contribution History"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[0]||(e[0]=C=>t.currentTab="Contribution History")}," Contributions ",2)]),s("li",Xo,[s("a",{href:"#general-settings",class:S(["nav-link mb-0 px-0 py-1 cursor-pointer",t.currentTab=="General Settings"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[1]||(e[1]=C=>t.currentTab="General Settings")}," Edit ",2)]),s("li",Zo,[s("a",{href:"#sharing-settings",class:S(["nav-link mb-0 px-0 py-1 cursor-pointer",t.currentTab=="Sharing Settings"?"backdrop-blur-md border border-light":""]),style:{"border-radius":".6rem !important"},role:"tab",onClick:e[2]||(e[2]=C=>t.currentTab="Sharing Settings")}," Sharing ",2)])])])])]),m(s("div",$o,[f(i)],512),[[O,t.currentTab=="General Settings"]]),m(s("div",er,[f(g)],512),[[O,t.currentTab=="Contribution History"]]),m(s("div",sr,[f(R)],512),[[O,t.currentTab=="Sharing Settings"]])])])}const vr=D(qo,[["render",tr],["__scopeId","data-v-e5a1aa2a"]]);export{vr as default};
