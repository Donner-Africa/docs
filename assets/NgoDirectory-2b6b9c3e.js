import{_ as k}from"./PublicLayout-c1658ce7.js";import{D as w}from"./AdvancedTable-73c97354.js";import{D as C}from"./DirectoryService-b9b8939b.js";import{_ as N}from"./Card.vue_vue_type_script_setup_true_lang-70106e64.js";import{l as E,r as i,a as f,c as y,w as s,b as t,d as o,v as A,x as T,e as n,f as m,F as V,g as L,t as g,n as I}from"./index-c49e93e4.js";import{_ as R,a as O,b as B,c as F,d as q}from"./SelectValue.vue_vue_type_script_setup_true_lang-842075eb.js";import{_ as P,a as z}from"./SelectLabel.vue_vue_type_script_setup_true_lang-5e991b13.js";import{l as K}from"./lodash-f1948e83.js";import"./logo-f32e4fd3.js";import"./NavigationStore-4749d2b5.js";import"./ohash.D__AXeF1-5c20a697.js";const G={name:"NgoDirectory",components:{PublicLayout:k,AdvancedTable:w,Card:N,Select:R,SelectContent:O,SelectGroup:P,SelectItem:B,SelectLabel:z,SelectTrigger:F,SelectValue:q},data(){return{loading:!1,totalResults:0,filters:{query:"",state:"all",industry:"all"},columns:[{key:"name",label:"Organization Name",sort:!0,class:"font-medium text-foreground"},{key:"fullAddress",label:"Location",sort:!1,formatter:a=>a?a.length>50?a.substring(0,50)+"...":a:"Address not listed"},{key:"legalIDNumber",label:"RC Number",sort:!0,formatter:a=>a?`#${a}`:"-"},{key:"status",label:"Status",sort:!0,slot:"status"}],states:["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"]}},methods:{async loadNgos(a){this.loading=!0;try{const e={page:a.page,size:a.size,sort:a.sort,direction:a.direction,query:this.filters.query,state:this.filters.state==="all"?"":this.filters.state,industry:this.filters.industry==="all"?"":this.filters.industry},c=await C.getNgos(e);return this.totalResults=c.totalElements,{content:c.content,totalElements:c.totalElements,totalPages:c.totalPages}}catch(e){return console.error("Error loading NGOs:",e),{content:[],totalElements:0,totalPages:0}}finally{this.loading=!1}},fetchData(){this.$refs.ngoTable&&this.$refs.ngoTable.fetchDataIfNeeded()},onStateChange(a){this.filters.state=a,this.fetchData()},onIndustryChange(a){this.filters.industry=a,this.fetchData()},resetFilters(){this.filters.query="",this.filters.state="all",this.filters.industry="all",this.fetchData()},onDataLoaded(a){},debouncedSearch:K.debounce(function(){this.fetchData()},500)}},U={class:"pb-8 bg-background"},j={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center"},Q={class:"md:col-span-5"},J={class:"md:col-span-3"},M={class:"md:col-span-3"},Y={class:"md:col-span-1 flex justify-center md:justify-end"},Z={class:"pb-8 bg-background"},W={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},X={class:"px-6 py-4 border-b border-border/40 flex justify-between items-center"},$={class:"text-sm text-muted-foreground bg-accent/30 px-3 py-1 rounded-full border border-border/40"},ee={class:"p-2"},te={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[#367D21]/10 text-[#367D21]"},se={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-accent text-muted-foreground"};function oe(a,e,c,ae,r,d){const p=i("SelectValue"),b=i("SelectTrigger"),u=i("SelectItem"),x=i("SelectContent"),_=i("Select"),h=i("Card"),v=i("router-link"),D=i("AdvancedTable"),S=i("PublicLayout");return f(),y(S,null,{default:s(()=>[e[13]||(e[13]=t("section",{class:"pt-24 pb-5 md:pt-32 md:pb-5 bg-background"},[t("div",{class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center"},[t("span",{class:"inline-block py-1 px-3 rounded-full bg-[#367D21]/10 text-[#367D21] text-xs font-semibold tracking-wider uppercase mb-4"}," Public Registry "),t("h1",{class:"text-4xl md:text-5xl lg:text-6xl font-bold text-foreground tracking-tight mb-4"}," Trusted NGO Directory "),t("p",{class:"text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto"}," Connecting you with verified non-profits making a real difference across Nigeria. ")])],-1)),t("section",U,[t("div",j,[o(h,{class:"p-6 border-border/40 bg-card"},{default:s(()=>[t("div",H,[t("div",Q,[A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.filters.query=l),onInput:e[1]||(e[1]=(...l)=>d.debouncedSearch&&d.debouncedSearch(...l)),type:"text",class:"w-full form-control form-control-lg transition-all duration-200 ease-in-out",placeholder:"Search by organization name..."},null,544),[[T,r.filters.query]])]),t("div",J,[o(_,{"model-value":r.filters.state,"onUpdate:modelValue":d.onStateChange},{default:s(()=>[o(b,{class:"w-full rounded-full border-border/40 bg-accent/30 h-12"},{default:s(()=>[o(p,{placeholder:"All Locations"})]),_:1}),o(x,{class:"bg-card max-h-60"},{default:s(()=>[o(u,{value:"all"},{default:s(()=>[...e[3]||(e[3]=[n("All Locations",-1)])]),_:1}),(f(!0),m(V,null,L(r.states,l=>(f(),y(u,{key:l,value:l},{default:s(()=>[n(g(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),t("div",M,[o(_,{"model-value":r.filters.industry,"onUpdate:modelValue":d.onIndustryChange},{default:s(()=>[o(b,{class:"w-full rounded-full border-border/40 bg-accent/30 h-12"},{default:s(()=>[o(p,{placeholder:"All Categories"})]),_:1}),o(x,{class:"bg-card"},{default:s(()=>[o(u,{value:"all"},{default:s(()=>[...e[4]||(e[4]=[n("All Categories",-1)])]),_:1}),o(u,{value:"Non-Profit"},{default:s(()=>[...e[5]||(e[5]=[n("Non-Profit",-1)])]),_:1}),o(u,{value:"Health"},{default:s(()=>[...e[6]||(e[6]=[n("Health",-1)])]),_:1}),o(u,{value:"Education"},{default:s(()=>[...e[7]||(e[7]=[n("Education",-1)])]),_:1}),o(u,{value:"Environment"},{default:s(()=>[...e[8]||(e[8]=[n("Environment",-1)])]),_:1}),o(u,{value:"Human Rights"},{default:s(()=>[...e[9]||(e[9]=[n("Human Rights",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),t("div",Y,[t("button",{onClick:e[2]||(e[2]=(...l)=>d.resetFilters&&d.resetFilters(...l)),class:"p-3 rounded-full text-muted-foreground hover:text-red-500 hover:bg-red-50 transition-colors",title:"Reset Filters"},[t("i",{class:I(["fa fa-refresh",{"fa-spin":r.loading}])},null,2)])])])]),_:1})])]),t("section",Z,[t("div",W,[o(h,{class:"border-border/40 bg-card overflow-hidden"},{default:s(()=>[t("div",X,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-foreground flex items-center"},[t("span",{class:"w-2 h-2 rounded-full bg-[#367D21] mr-2"}),n(" Verified Organizations ")],-1)),t("span",$,g(r.totalResults>0?`${r.totalResults.toLocaleString()} found`:"Searching..."),1)]),t("div",ee,[o(D,{ref:"ngoTable",title:"NGOs",columns:r.columns,fetchData:d.loadNgos,loadAsync:!0,filterQuery:r.filters.query,hasActions:!0,onDataLoaded:d.onDataLoaded},{status:s(({value:l})=>[l==="VERIFIED"?(f(),m("span",te,[...e[11]||(e[11]=[t("i",{class:"fa fa-check-circle mr-1"},null,-1),n(" Verified ",-1)])])):(f(),m("span",se,g(l),1))]),actions:s(({row:l})=>[o(v,{to:`/directory/${l.reference}`,class:"group inline-flex items-center px-4 py-2 border border-[#367D21]/30 text-sm font-medium rounded-full text-[#367D21] bg-card hover:bg-[#367D21]/5 hover:border-[#367D21]/50 transition-all"},{default:s(()=>[...e[12]||(e[12]=[t("span",null,"View",-1),t("i",{class:"fa fa-arrow-right ml-2 text-xs transform group-hover:translate-x-1 transition-transform"},null,-1)])]),_:1},8,["to"])]),_:1},8,["columns","fetchData","filterQuery","onDataLoaded"])])]),_:1})])])]),_:1})}const be=E(G,[["render",oe]]);export{be as default};
