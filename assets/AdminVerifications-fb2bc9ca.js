import{ah as l,l as u,p as o,a as r,f as n,b as t,F as y,g as m,t as i,h as _}from"./index-7ab8b32e.js";const p={async getPendingVerifications(){return await l.get("/admin/verifications",{authorizeRequest:!0})},async approveVerification(e){return await l.post(`/admin/verifications/${e}/approve`,{authorizeRequest:!0})},async rejectVerification(e,s){return await l.post(`/admin/verifications/${e}/reject`,{data:{reason:s},authorizeRequest:!0})}},g={data(){return{verifications:[]}},async created(){this.loadVerifications()},methods:{async loadVerifications(){try{const{data:e}=await p.getPendingVerifications();this.verifications=e}catch(e){console.error(e)}},async approve(e){if(confirm(`Are you sure you want to approve ${e.stage} for ${e.organisation.name}?`))try{await p.approveVerification(e.id),o().toast({message:"Verification approved",type:"success"}),this.loadVerifications()}catch{o().toast({message:"Failed to approve verification",type:"error"})}},async reject(e){const s=prompt("Enter rejection reason:");if(s!==null)try{await p.rejectVerification(e.id,s),o().toast({message:"Verification rejected",type:"success"}),this.loadVerifications()}catch{o().toast({message:"Failed to reject verification",type:"error"})}},formatMetadata(e){try{return JSON.stringify(JSON.parse(e),null,2)}catch{return e}},formatDate(e){if(!e)return"-";if(Array.isArray(e)){const[s,c,f]=e;return`${s}-${String(c).padStart(2,"0")}-${String(f).padStart(2,"0")}`}return new Date(e).toLocaleDateString()}}},v={class:"container-fluid py-4"},b={class:"row"},w={class:"col-12"},V={class:"card mb-4 min-vh-80"},j={class:"card-body px-0 pt-0 pb-2"},S={class:"table-responsive p-0"},k={class:"table align-items-center mb-0"},A={class:"d-flex px-2 py-1"},$={class:"d-flex flex-column justify-content-center"},N={class:"mb-0 text-sm"},C={class:"text-xs text-secondary mb-0"},F={class:"text-xs font-weight-bold mb-0"},P={class:"align-middle text-sm",style:{"max-width":"300px"}},R={class:"text-xs text-wrap"},q={class:"align-middle text-center"},z={class:"text-secondary text-xs font-weight-bold"},B={class:"align-middle"},O=["onClick"],D=["onClick"],E={key:0};function J(e,s,c,f,x,d){return r(),n("div",v,[t("div",b,[t("div",w,[t("div",V,[s[2]||(s[2]=t("div",{class:"card-header pb-0"},[t("h6",null,"Pending Verifications")],-1)),t("div",j,[t("div",S,[t("table",k,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Organisation"),t("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Stage"),t("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Metadata"),t("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Submitted"),t("th",{class:"text-secondary opacity-7"})])],-1)),t("tbody",null,[(r(!0),n(y,null,m(x.verifications,a=>(r(),n("tr",{key:a.id},[t("td",null,[t("div",A,[t("div",$,[t("h6",N,i(a.organisation.name),1),t("p",C,i(a.organisation.reference),1)])])]),t("td",null,[t("p",F,i(a.stage),1)]),t("td",P,[t("div",R,i(a.metadata),1)]),t("td",q,[t("span",z,i(d.formatDate(a.createdAt)),1)]),t("td",B,[t("a",{href:"javascript:;",class:"text-success font-weight-bold text-xs me-3",onClick:h=>d.approve(a)}," Approve ",8,O),t("a",{href:"javascript:;",class:"text-danger font-weight-bold text-xs",onClick:h=>d.reject(a)}," Reject ",8,D)])]))),128)),x.verifications.length===0?(r(),n("tr",E,[...s[0]||(s[0]=[t("td",{colspan:"5",class:"text-center py-4"},[t("span",{class:"text-secondary text-sm"},"No pending verifications")],-1)])])):_("",!0)])])])])])])])])}const M=u(g,[["render",J]]);export{M as default};
