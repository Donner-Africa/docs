import{B as k}from"./BaseButton-566630b0.js";import{_ as y}from"./PublicLayout-d9380c74.js";import{l as C,U as b,A as p,S as v,p as x,r as g,a as L,c as S,w as c,b as o,q as m,s as f,v as w,e as h,d as u,y as B}from"./index-5f7a37b4.js";import"./logo-f32e4fd3.js";import"./NavigationStore-114d0f28.js";import"./StarryBackground-f8eca98f.js";const I={components:{BaseButton:k,PublicLayout:y},data(){return{loading:!1,loginModel:{email:"",password:"",rememberDevice:!1}}},async mounted(){const n=await b.get("isLoggedIn"),t=await b.get("user");if(n&&t.name)return this.$router.push("/");n||t.name?await p.logout():(document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",this.activateGoogleSignIn())},computed:{formDisabled(){return this.loading||void 0}},methods:{async handleCredentialResponse(n){var d,s,e;this.loading=!0,typeof((d=this.$Progress)==null?void 0:d.start)=="function"&&this.$Progress.start();let t=null;try{const i=await fetch("https://ipapi.co/json/");if(i.ok){const a=await i.json();t=`${a.city}, ${a.region}, ${a.country}`}}catch{}const l={provider:"google",accessToken:n.credential,location:t};try{const{data:i}=await p.createSession(l);if(((s=i.verification)==null?void 0:s.status)!=="VERIFIED"){await v.IndexedDB.set("DonnerDB","UserStore","verification",i.verification),this.$router.push({name:"Verification"});return}const a=i.prompts||{};a.phone?this.$router.push({name:"CollectPhone"}):a.passcode?this.$router.push({name:"CreatePasscode"}):this.$router.push("/")}catch(i){x().toast({message:i.message||"Google sign-in failed",type:"error",duration:5e3})}this.loading=!1,typeof((e=this.$Progress)==null?void 0:e.finish)=="function"&&this.$Progress.finish()},redirectToGoogleOAuth(){const n="https://donner.africa",t="118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",l=encodeURIComponent(n+"/account/google"),d=encodeURIComponent("openid email profile"),s=Math.random().toString(36).substring(2)+Date.now().toString(36),e=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${t}&redirect_uri=${l}&response_type=id_token&scope=${d}&nonce=${s}`;window.location.href=e},activateGoogleSignIn(){document.cookie="g_state=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",!(!window.google||!window.google.accounts)&&(window.google.accounts.id.initialize({client_id:"118530506574-uuknbpk60trrnkdbdafd8gn8vvtfckn3.apps.googleusercontent.com",callback:this.handleCredentialResponse,use_fedcm_for_prompt:!0}),window.google.accounts.id.prompt())},activateLinkedInSignIn(){window.location.href="https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=77kg1tkj4odek6&redirect_uri=https://donner.africa/account/linkedin&scope=openid%20profile%20email%20w_member_social"},async login(){try{this.loading=!0,this.$Progress.start();const n={...this.loginModel},t=await p.createSession(n),{data:l}=t;l.verification&&await v.IndexedDB.set("DonnerDB","UserStore","verification",l.verification),this.$router.push({name:"Verification"})}catch(n){x().toast({...n.getToast(),type:"error",duration:5e3})}this.loading=!1,this.$Progress.finish()}}},M={class:"page-header min-vh-100 align-items-start p-0 bg-background"},D={class:"container px-sm-auto px-3 rounded-3"},U={class:"row"},P={class:"col-lg-5 col-md-8 mx-md-auto mx-0 my-3 px-0 px-sm-auto py-sm-2"},T={class:"card shadow-none rounded-3 min-vh-100 min-vh-sm-80 bg-transparent"},V={class:"card-body px-lg-5 py-lg-5 text-start"},R={class:"px-md-4 ps-2 pe-4 row"},$={class:"form-group mt-2"},G={class:"input-group"},A=["disabled"],E={class:"form-group mt-2"},N={class:"input-group"},j=["disabled"],q={class:"form-group mt-2 mx-2"},z={class:"form-check form-switch"},F=["disabled"],O={class:"form-group"},J={class:"text-lg text-bold text-foreground"},H={class:"col-12 my-2"},K={class:"row"},Q={class:"col-md-6 h-[100%]"},W={class:"col-md-6 h-[100%]"};function X(n,t,l,d,s,e){const i=g("RouterLink"),a=g("BaseButton"),_=g("PublicLayout");return L(),S(_,null,{default:c(()=>[o("section",null,[o("div",M,[o("div",D,[o("div",U,[o("div",P,[o("div",T,[o("div",V,[o("form",{class:"form-section active",onSubmit:t[5]||(t[5]=m((...r)=>e.login&&e.login(...r),["prevent"]))},[o("div",R,[o("div",$,[t[7]||(t[7]=o("label",{class:"text-foreground text-sm"}," Email ",-1)),o("div",G,[t[6]||(t[6]=o("span",{class:"input-group-text px-3"},[o("i",{class:"fas fa-leaf","aria-hidden":"true"})],-1)),f(o("input",{class:"form-control form-control-lg text-lg ps-1",required:"",type:"email",placeholder:"email@email.com","onUpdate:modelValue":t[0]||(t[0]=r=>s.loginModel.email=r),disabled:e.formDisabled},null,8,A),[[w,s.loginModel.email]])])]),o("div",E,[t[10]||(t[10]=o("label",{class:"text-foreground text-sm"}," Password ",-1)),o("div",N,[t[8]||(t[8]=o("span",{class:"input-group-text px-3"},[o("i",{class:"fas fa-lock","aria-hidden":"true"})],-1)),f(o("input",{class:"form-control form-control-lg text-lg ps-1",required:"",type:"password",placeholder:"* * * * * * * *","onUpdate:modelValue":t[1]||(t[1]=r=>s.loginModel.password=r),disabled:e.formDisabled},null,8,j),[[w,s.loginModel.password]])]),h(i,{to:"/account/password-reset",class:"mb-4 text-bold text-xs text-success"},{default:c(()=>[...t[9]||(t[9]=[u(" Reset Password ",-1),o("i",{class:"fa fa-arrow-right",style:{rotate:"-45deg"}},null,-1)])]),_:1})]),o("div",q,[o("div",z,[f(o("input",{class:"form-check-input",type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[2]||(t[2]=r=>s.loginModel.rememberDevice=r),disabled:e.formDisabled},null,8,F),[[B,s.loginModel.rememberDevice]]),t[11]||(t[11]=o("label",{class:"form-check-label text-secondary",for:"rememberMe"}," Stay logged in on this device ",-1))])]),o("div",O,[h(a,{class:"btn btn-primary float-end mb-2",loading:s.loading,nativeType:"submit"},{default:c(()=>[...t[12]||(t[12]=[u(" Login ",-1)])]),_:1},8,["loading"])]),o("span",J,[t[14]||(t[14]=u(" Don't have an account? ",-1)),h(i,{to:"/account/sign-up",class:"text-success text-bold"},{default:c(()=>[...t[13]||(t[13]=[u(" Sign Up ",-1)])]),_:1})]),t[17]||(t[17]=o("hr",{style:{margin:"1.6rem 0","background-color":"#ccc"}},null,-1)),t[18]||(t[18]=o("span",{class:"text-xs text-bold text-foreground text-center w-[100%] mb-3"},"or",-1)),o("div",H,[o("div",K,[o("div",Q,[o("a",{class:"btn btn-white w-[100%] h-[100%] border border-light bg-card",onClick:t[3]||(t[3]=m((...r)=>e.activateLinkedInSignIn&&e.activateLinkedInSignIn(...r),["prevent"]))},[...t[15]||(t[15]=[o("span",{class:"me-2 text-secondary"}," LinkedIn ",-1),o("i",{class:"fab fa-linkedin text-info lead"},null,-1)])])]),o("div",W,[o("a",{class:"btn btn-white text-secondary w-[100%] h-[100%] border border-light bg-card",onClick:t[4]||(t[4]=m((...r)=>e.redirectToGoogleOAuth&&e.redirectToGoogleOAuth(...r),["prevent"]))},[...t[16]||(t[16]=[o("span",{class:"me-2"}," Google ",-1),o("svg",{width:"24px",height:"32px",viewBox:"0 0 64 64",version:"1.1"},[o("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[o("g",{transform:"translate(3.000000, 2.000000)","fill-rule":"nonzero"},[o("path",{d:"M57.8123233,30.1515267 C57.8123233,27.7263183 57.6155321,25.9565533 57.1896408,24.1212666 L29.4960833,24.1212666 L29.4960833,35.0674653 L45.7515771,35.0674653 C45.4239683,37.7877475 43.6542033,41.8844383 39.7213169,44.6372555 L39.6661883,45.0037254 L48.4223791,51.7870338 L49.0290201,51.8475849 C54.6004021,46.7020943 57.8123233,39.1313952 57.8123233,30.1515267",fill:"#4285F4"}),o("path",{d:"M29.4960833,58.9921667 C37.4599129,58.9921667 44.1456164,56.3701671 49.0290201,51.8475849 L39.7213169,44.6372555 C37.2305867,46.3742596 33.887622,47.5868638 29.4960833,47.5868638 C21.6960582,47.5868638 15.0758763,42.4415991 12.7159637,35.3297782 L12.3700541,35.3591501 L3.26524241,42.4054492 L3.14617358,42.736447 C7.9965904,52.3717589 17.959737,58.9921667 29.4960833,58.9921667",fill:"#34A853"}),o("path",{d:"M12.7159637,35.3297782 C12.0932812,33.4944915 11.7329116,31.5279353 11.7329116,29.4960833 C11.7329116,27.4640054 12.0932812,25.4976752 12.6832029,23.6623884 L12.6667095,23.2715173 L3.44779955,16.1120237 L3.14617358,16.2554937 C1.14708246,20.2539019 0,24.7439491 0,29.4960833 C0,34.2482175 1.14708246,38.7380388 3.14617358,42.736447 L12.7159637,35.3297782",fill:"#FBBC05"}),o("path",{d:"M29.4960833,11.4050769 C35.0347044,11.4050769 38.7707997,13.7975244 40.9011602,15.7968415 L49.2255853,7.66898166 C44.1130815,2.91684746 37.4599129,0 29.4960833,0 C17.959737,0 7.9965904,6.62018183 3.14617358,16.2554937 L12.6832029,23.6623884 C15.0758763,16.5505675 21.6960582,11.4050769 29.4960833,11.4050769",fill:"#EB4335"})])])],-1)])])])])])])],32)])])])])])])])]),_:1})}const it=C(I,[["render",X]]);export{it as default};
